{
  "title": "Facebook",
  "icon": "facebk.png",
  "dataPortal": "https://www.facebook.com/help/212802592074644",
  "data": [],
  "hideSummary": true,
  "hideFileExplorer": true,
  "files": {
    "advertisers-interacted": "**/ads_information/advertisers_you've_interacted_with.json",
    "advertisers-contact-list": "**/ads_information/advertisers_who_uploaded_a_contact_list_with_your_information.json",
    "advertisers-using-information": "ads_information/advertisers_using_your_activity_or_information.json",
    "off-facebook-activity": "**/apps_and_websites_off_of_facebook/your_off-facebook_activity.json",
    "ads-interests": "**/other_logged_information/ads_interests.json"
  },
  "preprocessors": {
    "**/*.json": "facebook"
  },
  "collaborator": {
    "title": "The Eyeballs Collective",
    "icon": "the-eyeballs.svg",
    "url": "https://eyeballs.hestialabs.org/"
  },
  "defaultView": [
    {
      "key": "off-facebook-activity-count",
      "sql": "off-facebook-activity-count",
      "files": ["off-facebook-activity"],
      "visualization": "ChartViewTopRow.vue",
      "vizProps": {
        "dateFormat": "%s"
      },
      "showTable": false,
      "title": "Off Facebook activity ranking",
      "text": "See how many times third parties have informed Facebook of your activity outside of Facebook."
    },
    {
      "key": "off-facebook-activity-type-count",
      "sql": "off-facebook-activity-type-count",
      "files": ["off-facebook-activity"],
      "postprocessor": "sunburstTargetingAdvertiser",
      "visualization": "ChartViewSunburst.vue",
      "showTable": false,
      "title": "Off Facebook activity type",
      "text": "See which kind of information advertisers have shared with Facebook of your activity outside of Facebook."
    },
    {
      "key": "ad-interactions",
      "sql": "ad-interactions",
      "files": ["advertisers-interacted"],
      "showTable": true,
      "title": "Ad interactions",
      "text": "See the list of ads with which you have interacted."
    },
    {
      "key": "your-topics",
      "sql": "your-topics",
      "files": ["ads-interests"],
      "showTable": true,
      "title": "Inferred interests",
      "text": "Get a list of topics that Facebook thinks you're interested in."
    },
    {
      "key": "advertisers-contact-list",
      "sql": "advertisers-contact-list",
      "files": ["advertisers-contact-list"],
      "showTable": true,
      "title": "Contact list",
      "text": "Get a list of advertisers that have uploaded a contact list containing you."
    },
    {
      "key": "customAudience",
      "customPipeline": "jsonToTableConverter",
      "customPipelineOptions": [{
        "accessor": {
          "filePath": "**/ads_information/advertisers_using_your_activity_or_information.json",
          "jsonPath": "$.custom_audiences_all_types_v2[*]"
        },
        "columns": [
          {
            "name": "Advertiser",
            "path": "advertiser_name",
            "type": "string"
          },
          {
            "name": "has_data_file_custom_audience",
            "path": "has_data_file_custom_audience",
            "type": "boolean"
          },
          {
            "name": "has_remarketing_custom_audience",
            "path": "has_remarketing_custom_audience",
            "type": "boolean"
          },
          {
            "name": "has_in_person_store_visit",
            "path": "has_in_person_store_visit",
            "type": "boolean"
          }
        ]
      }],
      "files": ["advertisers-using-information"],
      "showTable": true,
      "title": "Advertisers using your data",
      "text": "See all advertisers that use Facebook to get information about you"
    },
    {
      "key": "genericDateViewer",
      "customPipeline": "genericDateViewer",
      "visualization": "ChartViewGenericDateViewer.vue",
      "showTable": false,
      "title": "Timeline",
      "text": "See all the dated events in your files, corresponding to data that has been collected on you at or concerning a specific date."
    },
    {
      "key": "genericLocationViewer",
      "customPipeline": "genericLocationViewer",
      "customPipelineOptions": { "acceptedPaths": ".*" },
      "visualization": "ChartViewGenericLocationViewer.vue",
      "showTable": false,
      "title": "Location observations",
      "text": "See all the location events in your files, corresponding to data that has been collected on you at or concerning a specific location."
    }
  ],
  "databaseConfig": {
    "tables": [
      {
        "name": "AdvertiserInteraction",
        "columns": [
          ["title", "TEXT"],
          ["action", "TEXT"],
          ["timestamp", "INTEGER"]
        ]
      },
      {
        "name": "AdvertiserUploadedContactInformation",
        "columns": [
          ["name", "TEXT"]
        ]
      },
      {
        "name": "OffFacebookActivityEvent",
        "columns": [
          ["name", "TEXT"],
          ["type", "TEXT"],
          ["timestamp", "INTEGER"]
        ]
      },
      {
        "name": "AdsInterest",
        "columns": [
          ["name", "TEXT"]
        ]
      }
    ],
    "getters": [
      {
        "fileId": "advertisers-interacted",
        "path": "$.history_v2[*]",
        "table": "AdvertiserInteraction",
        "getters": [
          {
            "column": "title",
            "path": "$.title"
          },
          {
            "column": "action",
            "path": "$.action"
          },
          {
            "column": "timestamp",
            "path": "$.timestamp"
          }
        ]
      },
      {
        "fileId": "advertisers-contact-list",
        "path": "$.custom_audiences_v2[*]",
        "table": "AdvertiserUploadedContactInformation",
        "getters": [
          {
            "column": "name",
            "path": "$.advertiser"
          }
        ]
      },
      {
        "fileId": "off-facebook-activity",
        "path": "$.off_facebook_activity_v2[*].events[*]",
        "table": "OffFacebookActivityEvent",
        "options": {
          "resultType": "all",
          "callback": "value => value.namePath = value.path.split(\"['events']\")[0] + \"['name']\""
        },
        "getters": [
          {
            "column": "name",
            "pathKey": "namePath",
            "queryRoot": true
          },
          {
            "column": "type",
            "path": "$.value.type"
          },
          {
            "column": "timestamp",
            "path": "$.value.timestamp"
          }
        ]
      },
      {
        "fileId": "ads-interests",
        "path": "$.topics_v2[*]",
        "table": "AdsInterest",
        "getters": [
          {
            "column": "name",
            "path": "$"
          }
        ]
      }
    ]
  }
}
