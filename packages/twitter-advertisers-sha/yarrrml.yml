author: Valentin Oliver Loftsson <valentin@hestia.ai>

prefixes:
  ex: http://www.example.com/
  schema: http://schema.org/

sources:
  imp-impressions:
    access: data/ad-impressions.js
    referenceFormulation: jsonpath
    iterator: $.*.ad.adsUserData.adImpressions.impressions[*]
  eng-impressions:
    access: data/ad-engagements.js
    referenceFormulation: jsonpath
    iterator: $.*.ad.adsUserData.adEngagements.engagements[*].impressionAttributes

m:
  advertiser:
    sources:
      - imp-impressions
      - eng-impressions
    po:
      - [a, schema:Organization]
      - p: schema:identifier
        o:
          f: ex:sha1
          pms:
            - [ex:input, $(advertiserInfo.screenName)]
