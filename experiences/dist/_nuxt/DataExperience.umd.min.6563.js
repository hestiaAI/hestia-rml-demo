"use strict";(("undefined"!=typeof self?self:this).webpackChunkDataExperience=("undefined"!=typeof self?self:this).webpackChunkDataExperience||[]).push([[6563,8736,6622,5225],{76563:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var r=s(60194),i=s(40290),n=s(26641),l=s(74097),o=s(85225),u=s(1949),d=s(18736),c=s(96622),p=s(82132);i.config.defaultColors(r.schemePaired);var g={components:{ChartViewVRowWebShare:d.default,ChartViewFilters:c.default,UnitFilterableTable:p.Z},mixins:[l.default],props:{},data:()=>({header:[{text:"Date",value:"dateStr"},{text:"App",value:"app"},{text:"Likes",value:"likes"},{text:"Passes",value:"passes"},{text:"Messages sent",value:"messagesSent"},{text:"Messages received",value:"messagesReceived"},{text:"Matches",value:"matches"},{text:"Sexual Orientation",value:"sexualOrientations"},{text:"User ID",value:"userId"}],results:[],colorPalette:["#58539E","#847CEB","#605BAB","#4A4685","#9498F2"]}),methods:{resetAll(){i.filterAll(),i.renderAll()},decodeDefault(e){try{return e&&"undefined"!==e?decodeURIComponent(escape(e)):"Unknown"}catch(t){return console.error(t),e||"Unknown"}},drawViz(){const e=r.timeParse("%Y-%m-%d"),t=r.timeFormat("%B, %Y");this.results=this.values.map((t=>{const s=e(t.dateValue)||new Date(t.dateValue);return{date:s,dateStr:t.dateValue,month:r.timeMonth(s),day:r.timeDay(s),app:this.decodeDefault(t.app),likes:+this.decodeDefault(t.likes)||0,passes:+this.decodeDefault(t.passes)||0,messagesSent:+this.decodeDefault(t.messagesSent)||0,messagesReceived:+this.decodeDefault(t.messagesReceived)||0,matches:+this.decodeDefault(t.matches)||0,sexualOrientations:"tinder"===t.app?JSON.parse(t.sexualOrientations).join(" | "):this.decodeDefault(t.sexualOrientations),userId:this.decodeDefault(t.userId)}})).filter((e=>(0,u.qb)(e.date)));const s=(0,n.Z)(this.results),a=new i.LineChart(`#likes-chart-${this.graphId}`),l=new i.LineChart(`#messages-chart-${this.graphId}`),d=new i.PieChart(`#app-chart-${this.graphId}`),c=new i.PieChart(`#sexualOrientations-chart-${this.graphId}`);function h(e,t){return t.userId in e.userIds?e.userIds[t.userId]++:e.userIds[t.userId]=1,e}function p(e,t){return e.userIds[t.userId]--,0===e.userIds[t.userId]&&delete e.userIds[t.userId],e}function g(){return{userIds:{}}}r.select(`#likes-chart-${this.graphId} a.reset`).on("click",(function(){a.filterAll(),i.redrawAll()})),r.select(`#messages-chart-${this.graphId} a.reset`).on("click",(function(){l.filterAll(),i.redrawAll()})),r.select(`#app-chart-${this.graphId} a.reset`).on("click",(function(){d.filterAll(),i.redrawAll()})),r.select(`#sexualOrientations-chart-${this.graphId} a.reset`).on("click",(function(){c.filterAll(),i.redrawAll()}));const f=s.dimension((e=>e.app)),m=s.dimension((e=>e.sexualOrientations)),x=s.dimension((e=>e.month)),v=f.group().reduce(h,p,g),k=m.group().reduce(h,p,g),y=x.group().reduceSum((e=>e.likes)),w=x.group().reduceSum((e=>e.passes)),b=x.group().reduceSum((e=>e.matches)),I=x.group().reduceSum((e=>e.messagesSent)),C=x.group().reduceSum((e=>e.messagesReceived)),A=250;let B=r.select(`#app-chart-${this.graphId}`).node().getBoundingClientRect().width;const $=Math.min(B,A);d.width(B).height(A).slicesCap(10).radius($/4).innerRadius($/8).externalLabels(50).dimension(f).group(v).valueAccessor((e=>Object.keys(e.value.userIds).length)).title((e=>e.key+": "+Object.keys(e.value.userIds).length+" user(s)")).drawPaths(!0).minAngleForLabel(.1).ordinalColors(this.colorPalette),d.on("pretransition",o.addPiePercentage),B=r.select(`#sexualOrientations-chart-${this.graphId}`).node().getBoundingClientRect().width,c.width(B).height(A).slicesCap(10).radius($/4).innerRadius($/8).externalLabels(50).dimension(m).group(k).valueAccessor((e=>Object.keys(e.value.userIds).length)).title((e=>e.key+": "+Object.keys(e.value.userIds).length+" user(s)")).drawPaths(!0).minAngleForLabel(.1).ordinalColors(this.colorPalette),c.on("pretransition",o.addPiePercentage);const S=r.extent(this.results,(e=>e.date));B=r.select(`#likes-chart-${this.graphId}`).node().getBoundingClientRect().width,a.margins({top:20,left:40,right:20,bottom:20}).width(B).turnOnControls(!0).curve(r.curveMonotoneX).xyTipsOn(!0).height(A).brushOn(!1).renderArea(!0).dimension(x).group(y,"Likes").x(r.scaleTime().domain(S)).title("Likes",(e=>`${t(e.key)}: ${e.value} likes`)).legend((new i.Legend).x(B-100).y(5).itemHeight(13).gap(5)).elasticY(!0).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).clipPadding(10).yAxisLabel("Total ").ordinalColors(["#2ecc71","#e74c3c","#3498db"]),a.xAxis().ticks(10),a.yAxis().ticks(6),a.stack(w,"Passes"),a.title("Passes",(e=>`${t(e.key)}: ${e.value} passes`)),a.stack(b,"Matches"),a.title("Matches",(e=>`${t(e.key)}: ${e.value} matches`)),B=r.select(`#messages-chart-${this.graphId}`).node().getBoundingClientRect().width,l.margins({top:20,left:40,right:20,bottom:20}).width(B).turnOnControls(!1).curve(r.curveMonotoneX).xyTipsOn(!0).height(A).brushOn(!1).renderArea(!0).dimension(x).group(I,"Messages Sent").x(r.scaleTime().domain(S)).legend((new i.Legend).x(B-110).y(5).itemHeight(13).gap(5)).elasticY(!0).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).clipPadding(10).yAxisLabel("Total ").ordinalColors(["#2c3e50","#58539E"]),l.xAxis().ticks(10),l.yAxis().ticks(6),l.stack(C,"Messages Received"),l.title("Messages Received",(e=>`${t(e.key)}: ${e.value} messages received`)),l.title("Messages Sent",(e=>`${t(e.key)}: ${e.value} messages sent`));const O=s.groupAll(),V=s.dimension((e=>e));new i.DataCount(`#dc-data-count-${this.graphId}`).crossfilter(s).groupAll(O).html({some:"<strong>%filter-count</strong> selected out of <strong>%total-count</strong> records | <a class='resetAll'>Reset All</a>",all:"All <strong>%total-count</strong> records selected. Please click on the graph to apply filters."}).on("pretransition",((e,t)=>{this.results=V.top(O.value()),r.select(`#dc-data-count-${this.graphId} a.resetAll`).on("click",(()=>{i.filterAll(),i.renderAll()}))})),i.renderAll()}}},h=g,f=(0,s(1001).Z)(h,(function(){var e=this,t=e._self._c;return t("VContainer",[t("ChartViewVRowWebShare",[t("VCol",{attrs:{cols:"12"}},[t("VRow",[t("VCol",{attrs:{cols:"12",md:"8"}},[t("div",{attrs:{id:`likes-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("Likes / Passes / Matches per month")])])])]),t("VCol",{attrs:{cols:"12",md:"4"}},[t("div",{attrs:{id:`app-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("App")])]),t("ChartViewFilters")],1)])],1),t("VRow",[t("VCol",{attrs:{cols:"12",md:"8"}},[t("div",{attrs:{id:`messages-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("Messages per month")])])])]),t("VCol",{attrs:{cols:"12",md:"4"}},[t("div",{attrs:{id:`sexualOrientations-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("Sexual Orientations")])]),t("ChartViewFilters")],1)])],1)],1)],1),t("VRow",[t("div",{staticClass:"dc-data-count",attrs:{id:`dc-data-count-${e.graphId}`}})]),t("VRow",[t("VCol",{attrs:{cols:"12"}},[t("UnitFilterableTable",e._b({},"UnitFilterableTable",{headers:e.header,items:e.results},!1))],1)],1)],1)}),[],!1,null,null,null),m=f.exports},18736:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var r=s(14226),i=s(87261),n=s(97888),l=s(9934),u={components:{BaseButton:i.Z,BaseButtonDownloadData:n.Z,BaseButtonShare:l.Z},mixins:[(0,r.Z)()]},o=(0,s(1001).Z)(u,(function(){var e=this,t=e._self._c;return t("VRow",e._b({ref:"domToImageNode"},"VRow",e.$attrs,!1),[e._t("default"),t("VCol",{staticClass:"dom-to-image-exclude",attrs:{cols:"12"}},[t("BaseButton",e._b({attrs:{icon:"mdiExport",text:"Export"},on:{click:e.exportImage}},"BaseButton",{progress:e.progress,status:e.status,error:e.error},!1)),t("BaseButtonDownloadData",e._b({},"BaseButtonDownloadData",{disabled:!e.blob,extension:e.extension,filename:e.filename,data:e.blob},!1)),t("BaseButtonShare",e._b({attrs:{"file-share":""}},"BaseButtonShare",{files:e.files,disabled:!e.files},!1))],1)],2)}),[],!1,null,null,null),p=o.exports},96622:function(e,t,s){s.r(t),s.d(t,{default:function(){return n}});var i={},r=(0,s(1001).Z)(i,(function(){var e=this,t=e._self._c;return t("p",{staticClass:"filters"},[t("span",[e._v(" "+e._s(e.$t("Current filter"))+" "),t("span",{staticClass:"filter"})]),t("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null),n=r.exports},85225:function(e,t,s){s.r(t),s.d(t,{addPiePercentage:function(){return d},addXLabel:function(){return n},addYLabel:function(){return i},createCumulativeGroup:function(){return l},removeEmptyBins:function(){return o}});var a=s(60194),r=s(40290);function n(e,t){const s=e.svg().append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",e.width()/2).attr("y",e.height()-10).text(t),a=s.node().getBBox(),r=e.margins();s.attr("x",r.left+(e.width()-r.left-r.right)/2).attr("y",e.height()-Math.ceil(a.height)/2)}function i(e,t){const s=e.svg().append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-e.height()/2).attr("y",10).text(t),a=s.node().getBBox(),r=e.margins();s.attr("x",-r.top-(e.height()-r.top-r.bottom)/2).attr("y",Math.max(Math.ceil(a.height),r.left-Math.ceil(a.height)-5))}function l(e){return{all(){const t={};return e.all().map((function(e){return t[e.key[0]]?t[e.key[0]]+=e.value:t[e.key[0]]=e.value,{key:e.key,value:t[e.key[0]]}}))}}}function o(e){return{top:t=>e.top(1/0).filter((function(e){return 0!==e.value.count&&0!==e.value})).slice(0,t)}}function d(e){e.selectAll("text.pie-slice.pie-label").call((function(e){e.each((function(e){const t=a.select(this);let s=t.text();s.length>14&&(s=s.substring(0,14)+".. "),s.length>0&&(s=s+" ("+r.utils.printSingleValue((e.endAngle-e.startAngle)/(2*Math.PI)*100)+"%)"),t.text(s)}))}))}}}]);