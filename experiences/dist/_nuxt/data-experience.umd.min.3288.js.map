{"version":3,"file":"data-experience.umd.min.3288.js","mappings":"wPAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAQF,EAAII,OAAOC,OAAS,EAAGH,EAAG,aAAa,CAACA,EAAG,OAAO,CAACA,EAAG,OAAO,CAACI,MAAM,CAAC,KAAO,OAAO,CAAgB,IAAdN,EAAIO,MAAaL,EAAG,IAAI,CAACM,YAAY,mBAAmB,CAACR,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIW,GAAG,eAAe,OAAOT,EAAG,IAAI,CAACM,YAAY,mBAAmB,CAACR,EAAIS,GAAG,wFAAwF,GAAIT,EAAIO,MAAQ,EAAG,CAACL,EAAG,OAAO,CAACA,EAAG,OAAO,CAACI,MAAM,CAAC,KAAO,OAAO,CAACJ,EAAG,kBAAkBF,EAAIY,GAAG,CAACN,MAAM,CAAC,aAAa,oBAAoB,aAAa,IAAI,UAAU,IAAI,cAAc,gEAAgE,UAAU,mBAAmB,kBAAkB,CAC7pBO,QAASb,EAAIc,sBACbV,OAAQJ,EAAIe,qBACZ,KAAS,IAAI,GAAGb,EAAG,OAAO,CAACA,EAAG,OAAO,CAACI,MAAM,CAAC,KAAO,OAAO,CAACJ,EAAG,IAAI,CAACF,EAAIS,GAAG,qFAAqFP,EAAG,aAAa,CAACI,MAAM,CAAC,KAAON,EAAIgB,eAAe,IAAI,GAAGd,EAAG,OAAO,CAACA,EAAG,OAAO,CAACI,MAAM,CAAC,KAAO,OAAO,CAACJ,EAAG,sBAAsBF,EAAIY,GAAG,CAACK,GAAG,CAAC,gBAAgBjB,EAAIkB,gBAAgB,sBAAsB,CAAEL,QAASb,EAAImB,aAAcC,MAAOpB,EAAIqB,YAAY,KAAS,IAAI,IAAIrB,EAAIsB,MAAM,GAAGtB,EAAIsB,IACtc,EACIC,EAAkB,G,uDCmDtB,GACEC,WAAY,CAAEC,gBAAe,wBAAY,wBAAqB,KAC9DC,OAAQ,CAACC,EAAA,YACTC,MAAO,CACLC,aAAc,CACZC,KAAMC,OACNC,QAAS,IAAM,OAGnBC,OACE,MAAO,CACLC,aAAc,GAElB,EACAC,SAAU,CACR5B,QACE,OAAON,KAAKG,OAAOC,MACrB,EACAU,qBACE,MAAMqB,EAAQnC,KAAKG,OAAOiC,KAAKC,IACtB,CACLC,kBAAmBD,EAAEE,YAAYC,OAAO,EAAGH,EAAEE,YAAYE,QAAQ,MACjEC,EAAGL,EAAEK,MAGHC,GAAM,EAAAC,EAAA,GAAiBT,EAAO,CAAC,qBAAsB,IAC3D,OAAOQ,CACT,EACA9B,wBACE,OAAOiB,OAAOe,KAAK7C,KAAKc,mBAAmB,GAC7C,EACAM,YACE,MAAM0B,EAAQ9C,KAAKG,OAAOiC,KAAKC,IACtB,IACFA,EACHU,UAAWV,EAAEE,YAAYC,OAAOH,EAAEE,YAAYE,QAAQ,KAAO,OAG3DE,GAAM,EAAAC,EAAA,GAAiBE,EAAO,CAAC,aAAc,CAAC,gBAAiB,iBAAkB,cAAe,iBACtG,OAAOH,CACT,EACAzB,eACE,OAAOY,OAAOe,KAAK7C,KAAKoB,UAAU,GACpC,EACA4B,aACE,MAAO,CACLC,OAAQjD,KAAKkB,aAAakB,KAAKc,IACtB,CACLC,KAAMD,MAGVE,KAAMpD,KAAKoB,UAAUgB,KAAIiB,GAAKrD,KAAKkB,aAAakB,KAAIc,GAAKG,EAAEH,OAE/D,EACAnC,aACE,MAAO,CACLiC,WAAYhD,KAAKgD,WACjBM,OAAQtD,KAAK4B,aAEjB,GAEF2B,QAAS,CACPtC,cAAcuC,GACZxD,KAAKiC,aAAeuB,CACtB,ICxHsJ,I,UCOtJC,GAAY,OACd,EACA3D,EACAwB,GACA,EACA,KACA,KACA,MAIF,EAAemC,EAAiB,O,qEClBhC,IAAI3D,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAQF,EAAc,WAAEE,EAAG,aAAa,CAACA,EAAG,OAAO,CAACI,MAAM,CAAC,MAAQ,KAAK,CAACJ,EAAG,OAAO,CAACM,YAAY,cAAcF,MAAM,CAAC,KAAO,KAAK,GAAK,OAAO,CAACJ,EAAG,OAAO,CAACI,MAAM,CAAC,IAAM,IAAI,KAAON,EAAI2C,EAAE,YAAYgB,YAAY3D,EAAI4D,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAAW,MAAO,CAAC5D,EAAG,OAAO,CAACM,YAAY,mBAAmBuD,SAAS,CAAC,YAAc/D,EAAIU,GAAGV,EAAIO,UAAU,EAAEyD,OAAM,GAAM,CAACH,IAAI,aAAaC,GAAG,WAAW,MAAO,CAAC9D,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIiE,YAAY,KAAK,EAAED,OAAM,GAAM,CAACH,IAAI,UAAUC,GAAG,WAAW,MAAO,CAAC5D,EAAG,OAAO,CAACM,YAAY,mBAAmBuD,SAAS,CAAC,YAAc/D,EAAIU,GAAGV,EAAIkE,YAAY,EAAEF,OAAM,GAAM,CAACH,IAAI,UAAUC,GAAG,WAAW,MAAO,CAAC5D,EAAG,OAAO,CAACM,YAAY,mBAAmBuD,SAAS,CAAC,YAAc/D,EAAIU,GAAGV,EAAImE,YAAY,EAAEH,OAAM,IAAO,MAAK,EAAM,cAAc,IAAI,GAAG9D,EAAG,OAAO,CAACI,MAAM,CAAC,QAAU,SAAS,MAAQ,KAAK,CAACJ,EAAG,OAAO,CAACkE,YAAY,CAAC,SAAW,YAAY9D,MAAM,CAAC,KAAO,KAAK,GAAK,MAAM,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,WAAW,GAAG,0BAAyB,GAAOqD,YAAY3D,EAAI4D,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,UAAS,GAAE7C,EAAE,MAAEX,IAAS,MAAO,CAACJ,EAAG,OAAOF,EAAIqE,GAAGrE,EAAIY,GAAG,CAACwD,YAAY,CAAC,SAAW,WAAW,MAAQ,IAAI,UAAU,MAAM9D,MAAM,CAAC,KAAO,KAAK,OAAOA,GAAM,GAAOW,GAAI,CAACf,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIS,GAAG,8BAA8B,GAAG,IAAI,MAAK,EAAM,aAAa,CAACP,EAAG,QAAQ,CAACkE,YAAY,CAAC,MAAQ,UAAU,CAAClE,EAAG,aAAa,CAACF,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,GAAG,gBAAgBT,EAAG,YAAYA,EAAG,YAAY,CAACA,EAAG,OAAO,CAACM,YAAY,QAAQ,CAACN,EAAG,OAAO,CAACA,EAAG,UAAU,CAACI,MAAM,CAAC,MAAQ,MAAMN,EAAIW,GAAG,SAASX,EAAIsE,SAAS,cAAc,UAAU,cAAc,SAAS,IAAM,IAAI,IAAMC,KAAKC,IAAIxE,EAAIO,MAAO,IAAI,eAAe,GAAG,MAAQ,IAAIU,GAAG,CAAC,OAASjB,EAAIyE,MAAMC,MAAM,CAACC,MAAO3E,EAAc,WAAE4E,SAAS,SAAUC,GAAM7E,EAAI8E,WAAWD,CAAG,EAAEE,WAAW,iBAAiB,IAAI,GAAG7E,EAAG,OAAO,CAACA,EAAG,OAAO,CAACA,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,GAAG,MAAQN,EAAIW,GAAG,kBAAkB,eAAe,IAAIM,GAAG,CAAC,OAASjB,EAAIyE,MAAMC,MAAM,CAACC,MAAO3E,EAAe,YAAE4E,SAAS,SAAUC,GAAM7E,EAAIgF,YAAYH,CAAG,EAAEE,WAAW,kBAAkB,IAAI,IAAI,IAAI,IAAI,GAAG7E,EAAG,MAAM,CAACkE,YAAY,CAAC,SAAW,YAAY9D,MAAM,CAAC,GAAKN,EAAIiF,YAAY,IAAI,IAAI,GAAGjF,EAAIsB,IACpmE,EACIC,EAAkB,G,iCCgFtB,GACEG,OAAQ,CAACC,EAAA,YACTC,MAAO,CAILsD,UAAW,CACTpD,KAAMqD,OACNC,UAAU,GAMZC,UAAW,CACTvD,KAAMqD,OACNnD,QAAS,IAMXsD,aAAc,CACZxD,KAAMqD,OACNnD,QAAS,IAKXuD,mBAAoB,CAClBzD,KAAM0D,OACNxD,QAAS,IAKXyD,OAAQ,CACN3D,KAAM0D,OACNxD,QAAS,GAKX0D,YAAa,CACX5D,KAAM6D,MACN3D,QAAS,IAAM,CAAC,EAAG,KAKrB4D,cAAe,CACb9D,KAAM6D,MACN3D,QAAS,IAAM,CAAC,IAAK,MAKvBiC,WAAY,CACVnC,KAAMqD,OACNnD,QAAS,WAKX6D,OAAQ,CACN/D,KAAMqD,OACNnD,QAAS,WAKXsC,OAAQ,CACNxC,KAAMqD,OACNnD,QAAS,aAMX8D,WAAY,CACVhE,KAAMqD,OACNnD,QAAS,KAGbC,OACE,MAAO,CACL1B,MAAO,EACP2D,QAAS,KACTC,QAAS,KACT4B,QAAS,GACTjB,WAAY,KACZE,aAAa,EAEjB,EACA7C,SAAU,CACR6D,aACE,IAAIC,GAAQ,EACZ,OAAKhG,KAAKG,OAAOC,QAMfJ,KAAKqF,eACJvD,OAAOe,KAAK7C,KAAKG,OAAO,IAAI8F,SAASjG,KAAKqF,gBAE3Ca,QAAQC,MAAM,2BACdH,GAAQ,GAELlE,OAAOe,KAAK7C,KAAKG,OAAO,IAAI8F,SAASjG,KAAKiF,aAC7CiB,QAAQC,MAAM,wBACdH,GAAQ,GAGRhG,KAAKoF,YACJtD,OAAOe,KAAK7C,KAAKG,OAAO,IAAI8F,SAASjG,KAAKoF,aAE3Cc,QAAQC,MAAM,wBACdH,GAAQ,GAEHA,IAtBLE,QAAQC,MAAM,mBACdH,GAAQ,EACDA,EAqBX,GAEFzC,QAAS,CACPb,EAAEkB,GACA,MAAO,sBAAsBA,GAC/B,EAEAY,OACE,MAAM4B,EAAUpG,KAAK8F,QAAQO,MAC3B,EACArG,KAAK+E,YAAc/E,KAAK6E,WAAa,EAAI7E,KAAK6E,YAE5C7E,KAAK+E,cACPqB,EAAQE,KAAK,CACX1C,IAAK,SACLc,MAAO,MAAO1E,KAAK8F,QAAQO,MAAMrG,KAAK6E,aAAa0B,GAAKA,EAAE7B,UAE5D0B,EAAQI,MAAK,SAASC,EAAGC,GACvB,OAAO,aAAcD,EAAE/B,MAAOgC,EAAEhC,MAClC,KAGF1E,KAAK2G,OAAOC,OAAO,SAAUR,GAASG,GAAKA,EAAE7B,SAC7C1E,KAAK6G,OAAOD,OACVR,EAAQhE,KAAI,SAASmE,GACnB,OAAOA,EAAE3C,GACX,KAIF,MAAMkD,EAAO9G,KAAK+G,IAAIC,UAAU,SAAShF,KAAKoE,GAASG,GAAKA,EAAE3C,MACxDqD,EAAOjH,KACb8G,EACGI,QACAC,OAAO,QACPC,KAAK,QAAS,QACdA,KAAK,IAAK,GACVA,KAAK,KAAKb,GAAKvG,KAAK6G,OAAON,EAAE3C,OAC7BwD,KAAK,QAAS,GACdA,KAAK,SAAUpH,KAAK6G,OAAOQ,aAC3BD,KAAK,OAAQ,WACbpG,GAAG,aAAa,SAASsG,EAAKf,GAC7B,SAAUvG,MAAMuH,MAAM,UAAW,IACjC,SAAUvH,KAAKwH,YACZL,OAAO,QACPC,KAAK,QAAS,aACdK,KAAKlB,EAAE7B,OACP0C,KAAK,cAAe,SACpBA,KAAK,qBAAsB,UAC3BA,KAAK,IAAKH,EAAKN,OAAOJ,EAAE7B,OAAS,IACjC0C,KAAK,IAAKH,EAAKJ,OAAON,EAAE3C,KAAOqD,EAAKJ,OAAOQ,YAAc,GACzDE,MAAM,YAAa,UACnBA,MAAM,cAAe,QACrBA,MAAM,OAAQ,UACnB,IACCvG,GAAG,cAAc,SAASsG,EAAKf,GAC9B,SAAUvG,MAAMuH,MAAM,UAAW,GACjC,SAAU,cAAcG,QAC1B,IACCC,MAAMb,GACNc,aACAC,SAAS,KACTC,MAAM,KACNV,KAAK,KAAKb,GAAKvG,KAAK6G,OAAON,EAAE3C,OAC7BwD,KAAK,SAASb,GAAKvG,KAAK2G,OAAOJ,EAAE7B,OAAS,IAC1C0C,KAAK,SAAUpH,KAAK6G,OAAOQ,aAG9BP,EAAKiB,OAAOH,aAAaC,SAAS,KAAMT,KAAK,QAAS,GAAGM,SAEzD,SAAU,UACPE,aACAC,SAAS,KACTC,MAAM,KACNE,KAAKhI,KAAKiI,OACb,YAAa,iBACVL,aACAC,SAAS,KACTC,MAAM,KACNP,MAAM,YAAa,IAAMjD,KAAK4D,IAAIlI,KAAK6E,YAAc,OAExD,SAAU,UACP+C,aACAC,SAAS,KACTC,MAAM,KACNE,KAAKhI,KAAKmI,MACf,EACAC,UACE,IAAKpI,KAAK+F,WAAc,OAExB,MAAMsC,EAAarI,KAAK6F,WACpB,YAAa7F,KAAK6F,YAClBU,GAAK,IAAI+B,KAAK/B,GAEZgC,EAAaC,GAAQxI,KAAKyI,GAAGD,EAAM,WAAYxI,KAAK0I,MAAMC,QAChE,GAAI3I,KAAKqF,aAAc,CACrB,MAAOpB,EAASC,GAAW,SACzBlE,KAAKG,QACLoG,GAAK8B,EAAW9B,EAAEvG,KAAKqF,iBAEzB,IAAIpB,IAAWC,EAIb,MAAM,IAAI0E,MAAM,+BAHhB5I,KAAKiE,QAAUsE,EAAWtE,GAC1BjE,KAAKkE,QAAUqE,EAAWrE,EAI9B,CAGAlE,KAAKM,MAASN,KAAKoF,UAEf,MAAOpF,KAAKG,QAAQoG,GAAKA,EAAEvG,KAAKoF,aADhCpF,KAAKG,OAAOC,OAGhBJ,KAAK6E,WAAaP,KAAKC,IAAI,GAAIvE,KAAKM,OAEpCN,KAAK8F,SAAU,UACZlC,KAAI2C,GAAKA,EAAEvG,KAAKiF,aAChB4D,QAAOtC,GAAK,MAAOA,GAAGuC,GAAM9I,KAAKoF,UAAY0D,EAAE9I,KAAKoF,WAAa,MACjE2D,QAAQ/I,KAAKG,QACbqG,MAAK,SAASC,EAAGC,GAChB,OAAO,aAAcD,EAAE/B,MAAOgC,EAAEhC,MAClC,IAGF,MAAMsE,EAAQ,IACRC,EAAS,IA0Bf,SAASC,EAAa/F,EAAMgG,GAC1B,OAAIhG,EAAK/C,OAAS+I,EAAoBhG,EAAKkD,MAAM,EAAG8C,GAAa,KAAqBhG,CACxF,CA3BA,SAAU,IAAMnD,KAAKgF,QAAU,QAAQ0C,SACvC1H,KAAK+G,IAAM,SACD,IAAM/G,KAAKgF,SAClBmC,OAAO,OACPC,KAAK,sBAAuB,iBAC5BA,KACC,UACA,IACEpH,KAAK2F,cAAc,GACnB,KACA3F,KAAKyF,YAAY,GACjB,KACCuD,EAAQ,MAAOhJ,KAAK2F,gBACrB,KACCsD,EAAS,MAAOjJ,KAAKyF,eAEzB8B,MAAM,UAAWvH,KAAKoJ,SACtB7B,MAAM,SAAUvH,KAAKwF,QACrB6D,QAAQ,eAAe,GAG1BrJ,KAAK2G,OAAS,gBAAiB2C,MAAM,CAAC,EAAGN,IACzChJ,KAAK6G,OAAS,cAAeyC,MAAM,CAAC,EAAGL,IAASM,aAAa,IAM7D,MAAMtB,EAAQ,WACFjI,KAAK6G,QACd2C,YAAWC,GAAKP,EAAaO,EAAGzJ,KAAKsF,sBACrCoE,cAAc,GACXvB,EAAQ,aAAcnI,KAAK2G,QAAQgD,MAAM,GAC/C3J,KAAKmI,MAAQA,EACbnI,KAAKiI,MAAQA,EAEbjI,KAAK+G,IACFI,OAAO,KACPC,KAAK,QAAS,SACdA,KAAK,YAAa,eAAiB6B,EAAS,KAC5CjB,KAAKG,GACLhB,OAAO,QACPC,KAAK,KAAM,SACXA,KAAK,IAAK,IACVA,KAAK,IAAK4B,EAAQ,GAClBzB,MAAM,cAAe,UACrBE,KAAKzH,KAAK4F,QACb5F,KAAK+G,IAAII,OAAO,KAAKC,KAAK,QAAS,SAASY,KAAKC,GACjDjI,KAAKwE,MACP,IC1X8I,I,UCQ9If,GAAY,OACd,EACA3D,EACAwB,GACA,EACA,KACA,WACA,MAIF,EAAemC,EAAiB,O,iFCnBzB,IAAImG,EAAS,IAEpB,SAASC,IAAO,CAkDhB,SAASzH,EAAI0H,EAAQC,GACnB,IAAI3H,EAAM,IAAIyH,EAGd,GAAIC,aAAkBD,EAAKC,EAAOE,MAAK,SAAStF,EAAOd,GAAOxB,EAAI6H,IAAIrG,EAAKc,EAAQ,SAG9E,GAAIgB,MAAMwE,QAAQJ,GAAS,CAC9B,IAEIK,EAFAC,GAAK,EACLC,EAAIP,EAAO1J,OAGf,GAAS,MAAL2J,EAAW,QAASK,EAAIC,EAAGjI,EAAI6H,IAAIG,EAAGN,EAAOM,SAC5C,QAASA,EAAIC,EAAGjI,EAAI6H,IAAIF,EAAEI,EAAIL,EAAOM,GAAIA,EAAGN,GAASK,EAC5D,MAGK,GAAIL,EAAQ,IAAK,IAAIlG,KAAOkG,EAAQ1H,EAAI6H,IAAIrG,EAAKkG,EAAOlG,IAE7D,OAAOxB,CACT,CApEAyH,EAAIS,UAAYlI,EAAIkI,UAAY,CAC9BC,YAAaV,EACbW,IAAK,SAAS5G,GACZ,OAAQgG,EAAShG,KAAQ5D,IAC3B,EACAyK,IAAK,SAAS7G,GACZ,OAAO5D,KAAK4J,EAAShG,EACvB,EACAqG,IAAK,SAASrG,EAAKc,GAEjB,OADA1E,KAAK4J,EAAShG,GAAOc,EACd1E,IACT,EACA0H,OAAQ,SAAS9D,GACf,IAAI8G,EAAWd,EAAShG,EACxB,OAAO8G,KAAY1K,aAAeA,KAAK0K,EACzC,EACAC,MAAO,WACL,IAAK,IAAID,KAAY1K,KAAU0K,EAAS,KAAOd,UAAe5J,KAAK0K,EACrE,EACA7H,KAAM,WACJ,IAAIA,EAAO,GACX,IAAK,IAAI6H,KAAY1K,KAAU0K,EAAS,KAAOd,GAAQ/G,EAAKyD,KAAKoE,EAASrE,MAAM,IAChF,OAAOxD,CACT,EACA1C,OAAQ,WACN,IAAIA,EAAS,GACb,IAAK,IAAIuK,KAAY1K,KAAU0K,EAAS,KAAOd,GAAQzJ,EAAOmG,KAAKtG,KAAK0K,IACxE,OAAOvK,CACT,EACA4I,QAAS,WACP,IAAIA,EAAU,GACd,IAAK,IAAI2B,KAAY1K,KAAU0K,EAAS,KAAOd,GAAQb,EAAQzC,KAAK,CAAC1C,IAAK8G,EAASrE,MAAM,GAAI3B,MAAO1E,KAAK0K,KACzG,OAAO3B,CACT,EACA6B,KAAM,WACJ,IAAIA,EAAO,EACX,IAAK,IAAIF,KAAY1K,KAAU0K,EAAS,KAAOd,KAAUgB,EACzD,OAAOA,CACT,EACAC,MAAO,WACL,IAAK,IAAIH,KAAY1K,KAAM,GAAI0K,EAAS,KAAOd,EAAQ,OAAO,EAC9D,OAAO,CACT,EACAI,KAAM,SAASD,GACb,IAAK,IAAIW,KAAY1K,KAAU0K,EAAS,KAAOd,GAAQG,EAAE/J,KAAK0K,GAAWA,EAASrE,MAAM,GAAIrG,KAC9F,GAyBF,QCxEe,aACb,IAEI8K,EACAjC,EACAkC,EAJAlI,EAAO,GACPmI,EAAW,GAKf,SAASC,EAAMC,EAAOC,EAAOC,EAAcC,GACzC,GAAIF,GAAStI,EAAKzC,OAEhB,OADkB,MAAd0K,GAAoBI,EAAM1E,KAAKsE,GAClB,MAAVjC,EAAiBA,EAAOqC,GAASA,EAG1C,IAGII,EACA5G,EAEAvE,EANAiK,GAAK,EACLC,EAAIa,EAAM9K,OACVwD,EAAMf,EAAKsI,KAGXI,EAAc,IAEdC,EAASJ,IAEb,QAAShB,EAAIC,GACPlK,EAASoL,EAAYd,IAAIa,EAAW1H,EAAIc,EAAQwG,EAAMd,IAAM,KAC9DjK,EAAOmG,KAAK5B,GAEZ6G,EAAYtB,IAAIqB,EAAU,CAAC5G,IAQ/B,OAJA6G,EAAYvB,MAAK,SAAS7J,EAAQyD,GAChCyH,EAAUG,EAAQ5H,EAAKqH,EAAM9K,EAAQgL,EAAOC,EAAcC,GAC5D,IAEOG,CACT,CAEA,SAASzC,EAAQ3G,EAAK+I,GACpB,KAAMA,EAAQtI,EAAKzC,OAAQ,OAAOgC,EAClC,IAAI8I,EAAOO,EAAUT,EAASG,EAAQ,GAGtC,OAFc,MAAVtC,GAAkBsC,GAAStI,EAAKzC,OAAQ8K,EAAQ9I,EAAI2G,WACnDmC,EAAQ,GAAI9I,EAAI4H,MAAK,SAAS3H,EAAGK,GAAKwI,EAAM5E,KAAK,CAAC1C,IAAKlB,EAAGvC,OAAQ4I,EAAQ1G,EAAG8I,IAAU,KAC1E,MAAXM,EAAkBP,EAAM1E,MAAK,SAASC,EAAGC,GAAK,OAAO+E,EAAQhF,EAAE7C,IAAK8C,EAAE9C,IAAM,IAAKsH,CAC1F,CAEA,OAAOH,EAAO,CACZjB,OAAQ,SAASoB,GAAS,OAAOD,EAAMC,EAAO,EAAGQ,EAAcC,EAAY,EAC3EvJ,IAAK,SAAS8I,GAAS,OAAOD,EAAMC,EAAO,EAAGU,EAAWC,EAAS,EAClE9C,QAAS,SAASmC,GAAS,OAAOnC,EAAQkC,EAAMC,EAAO,EAAGU,EAAWC,GAAS,EAAI,EAClFjI,IAAK,SAAS2C,GAAmB,OAAd1D,EAAKyD,KAAKC,GAAWwE,CAAM,EAC9CC,SAAU,SAASc,GAA4C,OAAnCd,EAASnI,EAAKzC,OAAS,GAAK0L,EAAcf,CAAM,EAC5ED,WAAY,SAASgB,GAA6B,OAApBhB,EAAagB,EAAcf,CAAM,EAC/DlC,OAAQ,SAASkB,GAAiB,OAAZlB,EAASkB,EAAUgB,CAAM,EAEnD,CAEA,SAASW,IACP,MAAO,CAAC,CACV,CAEA,SAASC,EAAU7B,EAAQlG,EAAKc,GAC9BoF,EAAOlG,GAAOc,CAChB,CAEA,SAASkH,IACP,OAAO,GACT,CAEA,SAASC,EAAOzJ,EAAKwB,EAAKc,GACxBtC,EAAI6H,IAAIrG,EAAKc,EACf,CCtEA,SAASqH,IAAO,CAEhB,IAAIC,EAAQ,YAkBZ,SAAS/B,EAAIH,EAAQC,GACnB,IAAIE,EAAM,IAAI8B,EAGd,GAAIjC,aAAkBiC,EAAKjC,EAAOE,MAAK,SAAStF,GAASuF,EAAIgC,IAAIvH,EAAQ,SAGpE,GAAIoF,EAAQ,CACf,IAAIM,GAAK,EAAGC,EAAIP,EAAO1J,OACvB,GAAS,MAAL2J,EAAW,QAASK,EAAIC,EAAGJ,EAAIgC,IAAInC,EAAOM,SACzC,QAASA,EAAIC,EAAGJ,EAAIgC,IAAIlC,EAAED,EAAOM,GAAIA,EAAGN,GAC/C,CAEA,OAAOG,CACT,CA9BA8B,EAAIzB,UAAYL,EAAIK,UAAY,CAC9BC,YAAawB,EACbvB,IAAKwB,EAAMxB,IACXyB,IAAK,SAASvH,GAGZ,OAFAA,GAAS,GACT1E,KAAK4J,EAASlF,GAASA,EAChB1E,IACT,EACA0H,OAAQsE,EAAMtE,OACdiD,MAAOqB,EAAMrB,MACbxK,OAAQ6L,EAAMnJ,KACd+H,KAAMoB,EAAMpB,KACZC,MAAOmB,EAAMnB,MACbb,KAAMgC,EAAMhC,MCnBC,WAAS5H,GACtB,IAAIS,EAAO,GACX,IAAK,IAAIe,KAAOxB,EAAKS,EAAKyD,KAAK1C,GAC/B,OAAOf,CACT,C,kECCA,MAAMnB,EAAQ,CACZC,MAAO,CACLxB,OAAQ,CACN0B,KAAM6D,MACN3D,QAAS,IAAM,IAEjBnB,QAAS,CACPiB,KAAM6D,MACN3D,QAAS,IAAM,IAEjBmK,SAAU,CACRrK,KAAMC,OACNC,QAAS,KAAM,CAAG,KAGtBC,OACE,MAAO,CACLgD,QAAS,SAAWhF,KAAKmM,KACzBC,WAAY,EACZC,YAAa,EAEjB,EACAC,UACEtM,KAAKoI,SACP,EACAmE,MAAO,CACLpM,SACEH,KAAKoI,SACP,GAEF7E,QAAS,CACP6E,UAAY,EACZoE,uBAAuBC,EAAQC,EAAc,UAC3C,MAAMC,EAAS,IAAI,EAAAC,iBAAiBH,GAEpC,OADAE,EAAOE,YAAY7M,KAAK8M,KAAKJ,EAAaA,IACnCC,CACT,IAIJ,cAAe,OAAMjL,EAAO,I,uEC3C5B,SAASqL,EAAMC,GACb,IAAIC,EAAO,EACX,IAAK,IAAIC,EAAI,EAAGA,GAAK5I,KAAK6I,IAAIlC,MAAM3G,KAAM0I,GAAME,IAAK,CACnD,MAAMpE,EAAIkE,EAAII,QAAO3D,GAAKA,GAAKyD,IAC/B,GAAIpE,EAAE1I,QAAU8M,EAAG,CACjBD,EAAOC,EACP,KACF,CACF,CACA,OAAOD,CACT,CAEA,SAASI,EAAIL,GACX,MAAMM,EAAMN,EAAIO,QAAO,CAAC9G,EAAGC,IAAMD,EAAIC,GAAG,GACxC,OAAO4G,EAAMN,EAAI5M,QAAU,CAC7B,CAEA,SAASoN,EAAUR,EAAKtK,GACtB,OAAOsK,EAAII,QAAO3D,GAAKA,EAAE/G,GAAKA,GAChC,CAEO,SAAS+K,EAAiBtN,EAAQuN,EAAWC,GAClD,MAAMC,EAAQ,GACRC,GAAU,OAAQ1N,GAAQkK,GAAKqD,EAAUtL,KAAIqH,GAAKY,EAAEZ,OACpD5G,EAAOf,OAAOe,KAAKgL,GACzB,IAAK,IAAIzD,EAAI,EAAGA,EAAIvH,EAAKzC,OAAQgK,IAAK,CACpC,MAAMX,EAAI5G,EAAKuH,GACT0D,EAAO,CAAC,EACRC,EAAWtE,EAAEuE,MAAM,KACzB,IAAK,IAAId,EAAI,EAAGA,EAAIQ,EAAUtN,OAAQ8M,IACpCY,EAAKJ,EAAUR,IAAMa,EAASb,GAEhC,MAAMD,EAAOF,EAAMc,EAAQpE,GAAGrH,KAAIC,GAAKA,EAAEK,KACnCuL,EAAOT,EAAUK,EAAQpE,GAAIwD,GACnC,IAAK,IAAIC,EAAI,EAAGA,EAAIS,EAAUvN,OAAQ8M,IACpCY,EAAKH,EAAUT,IAAMG,EAAIY,EAAK7L,KAAIqH,GAAKA,EAAEkE,EAAUT,OAErDY,EAAKpL,EAAIuK,EACTW,EAAMtH,KAAKwH,EACb,CACA,MAAMnL,EAAMiL,EAAMR,QAAO3D,GAAKA,EAAE/G,EAAI,IACpC,OAAOC,CACT,C","sources":["webpack://data-experience/./src/components/chart/view/ChartViewGoogleAggTrips.vue?2087","webpack://data-experience/src/components/chart/view/ChartViewGoogleAggTrips.vue","webpack://data-experience/./src/components/chart/view/ChartViewGoogleAggTrips.vue?d297","webpack://data-experience/./src/components/chart/view/ChartViewGoogleAggTrips.vue","webpack://data-experience/./src/components/chart/view/ChartViewTopRow.vue?4efc","webpack://data-experience/src/components/chart/view/ChartViewTopRow.vue","webpack://data-experience/./src/components/chart/view/ChartViewTopRow.vue?47c9","webpack://data-experience/./src/components/chart/view/ChartViewTopRow.vue","webpack://data-experience/./node_modules/d3-collection/src/map.js","webpack://data-experience/./node_modules/d3-collection/src/nest.js","webpack://data-experience/./node_modules/d3-collection/src/set.js","webpack://data-experience/./node_modules/d3-collection/src/keys.js","webpack://data-experience/./src/components/chart/view/mixin.js","webpack://data-experience/./src/utils/kAnonymity.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.values.length > 0)?_c('VContainer',[_c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\"}},[(_vm.total === 0)?_c('p',{staticClass:\"text-subtitle-2\"},[_vm._v(\" \"+_vm._s(_vm.$t('no-records'))+\" \")]):_c('p',{staticClass:\"text-subtitle-2\"},[_vm._v(\" This shows the public tansportation that was used by at least k participants: \")])])],1),(_vm.total > 0)?[_c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\"}},[_c('ChartViewTopRow',_vm._b({attrs:{\"y-accessor\":\"name_of_transport\",\"x-accessor\":\"k\",\"x-label\":\"k\",\"count-label\":\"public tansportation that was used by at least k participants\",\"y-label\":\"transport line\"}},'ChartViewTopRow',{\n            headers: _vm.header_name_transport,\n            values: _vm.get_name_transport\n          },false))],1)],1),_c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\"}},[_c('p',[_vm._v(\" This map shows the trips made in public transport by at least k participants: \")]),_c('UnitKepler',{attrs:{\"args\":_vm.keplerArgs}})],1)],1),_c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\"}},[_c('UnitFilterableTable',_vm._b({on:{\"current-items\":_vm.onTableFilter}},'UnitFilterableTable',{ headers: _vm.header_trips, items: _vm.get_trips },false))],1)],1)]:_vm._e()],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <VContainer v-if=\"values.length > 0\">\n    <VRow>\n      <VCol cols=\"12\">\n        <p v-if=\"total === 0\" class=\"text-subtitle-2\">\n          {{ $t('no-records') }}\n        </p>\n        <p v-else class=\"text-subtitle-2\">\n          This shows the public tansportation that was used by at least k\n          participants:\n        </p>\n      </VCol>\n    </VRow>\n    <template v-if=\"total > 0\">\n      <VRow>\n        <VCol cols=\"12\">\n          <ChartViewTopRow\n            v-bind=\"{\n              headers: header_name_transport,\n              values: get_name_transport\n            }\"\n            y-accessor=\"name_of_transport\"\n            x-accessor=\"k\"\n            x-label=\"k\"\n            count-label=\"public tansportation that was used by at least k participants\"\n            y-label=\"transport line\"\n          />\n        </VCol>\n      </VRow>\n      <VRow>\n        <VCol cols=\"12\">\n          <p>\n            This map shows the trips made in public transport by at least k\n            participants:\n          </p>\n          <UnitKepler :args=\"keplerArgs\" />\n        </VCol>\n      </VRow>\n      <VRow>\n        <VCol cols=\"12\">\n          <UnitFilterableTable\n            v-bind=\"{ headers: header_trips, items: get_trips }\"\n            @current-items=\"onTableFilter\"\n          />\n        </VCol>\n      </VRow>\n    </template>\n  </VContainer>\n</template>\n<script>\nimport mixin from './mixin'\nimport { kAnonymityFilter } from '@/utils/kAnonymity'\nimport ChartViewTopRow from './ChartViewTopRow.vue'\nimport UnitKepler from '@/components/unit/UnitKepler.vue'\nimport UnitFilterableTable from '@/components/unit/filterable-table/UnitFilterableTable.vue'\n\nexport default {\n  components: { ChartViewTopRow, UnitKepler, UnitFilterableTable },\n  mixins: [mixin],\n  props: {\n    keplerConfig: {\n      type: Object,\n      default: () => null\n    }\n  },\n  data() {\n    return {\n      filteredRows: []\n    }\n  },\n  computed: {\n    total() {\n      return this.values.length\n    },\n    get_name_transport() {\n      const names = this.values.map((v) => {\n        return {\n          name_of_transport: v.transitPath.substr(0, v.transitPath.indexOf(':')),\n          k: v.k\n        }\n      })\n      const res = kAnonymityFilter(names, ['name_of_transport'], [])\n      return res\n    },\n    header_name_transport() {\n      return Object.keys(this.get_name_transport[0])\n    },\n    get_trips() {\n      const trips = this.values.map((v) => {\n        return {\n          ...v,\n          start_end: v.transitPath.substr(v.transitPath.indexOf(':') + 1)\n        }\n      })\n      const res = kAnonymityFilter(trips, ['start_end'], ['startLatitude', 'startLongitude', 'endLatitude', 'endLongitude'])\n      return res\n    },\n    header_trips() {\n      return Object.keys(this.get_trips[0])\n    },\n    keplerData() {\n      return {\n        fields: this.header_trips.map((h) => {\n          return {\n            name: h\n          }\n        }),\n        rows: this.get_trips.map(r => this.header_trips.map(h => r[h]))\n      }\n    },\n    keplerArgs() {\n      return {\n        keplerData: this.keplerData,\n        config: this.keplerConfig\n      }\n    }\n  },\n  methods: {\n    onTableFilter(newItems) {\n      this.filteredRows = newItems\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewGoogleAggTrips.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewGoogleAggTrips.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartViewGoogleAggTrips.vue?vue&type=template&id=190eaee0&\"\nimport script from \"./ChartViewGoogleAggTrips.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewGoogleAggTrips.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.validProps)?_c('VContainer',[_c('VRow',{attrs:{\"dense\":\"\"}},[_c('VCol',{staticClass:\"text-center\",attrs:{\"cols\":\"12\",\"md\":\"12\"}},[_c('i18n',{attrs:{\"tag\":\"p\",\"path\":_vm.k('heading')},scopedSlots:_vm._u([{key:\"total\",fn:function(){return [_c('span',{staticClass:\"font-weight-bold\",domProps:{\"textContent\":_vm._s(_vm.total)}})]},proxy:true},{key:\"countLabel\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.countLabel)+\" \")]},proxy:true},{key:\"minDate\",fn:function(){return [_c('span',{staticClass:\"font-weight-bold\",domProps:{\"textContent\":_vm._s(_vm.minDate)}})]},proxy:true},{key:\"maxDate\",fn:function(){return [_c('span',{staticClass:\"font-weight-bold\",domProps:{\"textContent\":_vm._s(_vm.maxDate)}})]},proxy:true}],null,false,923081494)})],1)],1),_c('VRow',{attrs:{\"justify\":\"center\",\"dense\":\"\"}},[_c('VCol',{staticStyle:{\"position\":\"relative\"},attrs:{\"cols\":\"12\",\"md\":\"7\"}},[_c('VMenu',{attrs:{\"offset-x\":\"\",\"close-on-content-click\":false},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('VBtn',_vm._g(_vm._b({staticStyle:{\"position\":\"absolute\",\"right\":\"0\",\"z-index\":\"10\"},attrs:{\"icon\":\"\"}},'VBtn',attrs,false),on),[_c('VIcon',{attrs:{\"small\":\"\"}},[_vm._v(\" $vuetify.icons.mdiCog \")])],1)]}}],null,false,2520745846)},[_c('VCard',{staticStyle:{\"width\":\"300px\"}},[_c('VCardTitle',[_vm._v(_vm._s(_vm.$t('Settings')))]),_c('VDivider'),_c('VCardText',[_c('VRow',{staticClass:\"mt-3\"},[_c('VCol',[_c('VSlider',{attrs:{\"label\":`N° ${_vm.$t('of')} ${_vm.yLabel}`,\"thumb-color\":\"primary\",\"thumb-label\":\"always\",\"min\":\"1\",\"max\":Math.min(_vm.total, 50),\"hide-details\":\"\",\"dense\":\"\"},on:{\"change\":_vm.draw},model:{value:(_vm.topKSlider),callback:function ($$v) {_vm.topKSlider=$$v},expression:\"topKSlider\"}})],1)],1),_c('VRow',[_c('VCol',[_c('VCheckbox',{attrs:{\"dense\":\"\",\"label\":_vm.$t('Display Others'),\"hide-details\":\"\"},on:{\"change\":_vm.draw},model:{value:(_vm.othersCheck),callback:function ($$v) {_vm.othersCheck=$$v},expression:\"othersCheck\"}})],1)],1)],1)],1)],1),_c('div',{staticStyle:{\"position\":\"relative\"},attrs:{\"id\":_vm.graphId}})],1)],1)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <VContainer v-if=\"validProps\">\n    <VRow dense>\n      <VCol cols=\"12\" md=\"12\" class=\"text-center\">\n        <i18n\n          tag=\"p\"\n          :path=\"k('heading')\"\n        >\n          <template #total>\n            <span class=\"font-weight-bold\" v-text=\"total\" />\n          </template>\n          <template #countLabel>\n            {{ countLabel }}\n          </template>\n          <template #minDate>\n            <span class=\"font-weight-bold\" v-text=\"minDate\" />\n          </template>\n          <template #maxDate>\n            <span class=\"font-weight-bold\" v-text=\"maxDate\" />\n          </template>\n        </i18n>\n      </VCol>\n    </VRow>\n    <VRow justify=\"center\" dense>\n      <VCol cols=\"12\" md=\"7\" style=\"position: relative\">\n        <VMenu offset-x :close-on-content-click=\"false\">\n          <template #activator=\"{ on, attrs }\">\n            <VBtn\n              icon\n              v-bind=\"attrs\"\n              style=\"position: absolute; right: 0; z-index: 10\"\n              v-on=\"on\"\n            >\n              <VIcon small>\n                $vuetify.icons.mdiCog\n              </VIcon>\n            </VBtn>\n          </template>\n          <VCard style=\"width: 300px\">\n            <VCardTitle>{{ $t('Settings') }}</VCardTitle>\n            <VDivider />\n            <VCardText>\n              <VRow class=\"mt-3\">\n                <VCol>\n                  <VSlider\n                    v-model=\"topKSlider\"\n                    :label=\"`N° ${$t('of')} ${yLabel}`\"\n                    thumb-color=\"primary\"\n                    thumb-label=\"always\"\n                    min=\"1\"\n                    :max=\"Math.min(total, 50)\"\n                    hide-details\n                    dense\n                    @change=\"draw\"\n                  />\n                </VCol>\n              </VRow>\n              <VRow>\n                <VCol>\n                  <VCheckbox\n                    v-model=\"othersCheck\"\n                    dense\n                    :label=\"$t('Display Others')\"\n                    hide-details\n                    @change=\"draw\"\n                  />\n                </VCol>\n              </VRow>\n            </VCardText>\n          </VCard>\n        </VMenu>\n        <div :id=\"graphId\" style=\"position: relative\" />\n      </VCol>\n    </VRow>\n  </VContainer>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport { nest } from 'd3-collection'\nimport mixin from './mixin'\n\nexport default {\n  mixins: [mixin],\n  props: {\n    /**\n     * The column name that contains the y values\n     */\n    yAccessor: {\n      type: String,\n      required: true // advertiserName\n    },\n    /**\n     * The column name that contains the x values\n     * if not set, will count the rows\n     */\n    xAccessor: {\n      type: String,\n      default: '' // count,\n    },\n    /**\n     * The column name that contains the dates values\n     * if set, will show the date range\n     */\n    dateAccessor: {\n      type: String,\n      default: '' // date\n    },\n    /**\n     * Max length of labels on y axis\n     */\n    yAxisMaxTickLength: {\n      type: Number,\n      default: 20\n    },\n    /**\n     * Margin\n     */\n    margin: {\n      type: Number,\n      default: 5\n    },\n    /**\n     * Vertical padding\n     */\n    adjVertical: {\n      type: Array,\n      default: () => [5, 50]\n    },\n    /**\n     * Horizontal padding\n     */\n    adjHorizontal: {\n      type: Array,\n      default: () => [150, 150]\n    },\n    /**\n     * Label displayed on xAxis\n     */\n    countLabel: {\n      type: String,\n      default: 'records'\n    },\n    /**\n     * Label displayed on xAxis\n     */\n    xLabel: {\n      type: String,\n      default: 'records'\n    },\n    /**\n     * Label displayed in the number of bars to display selection\n     */\n    yLabel: {\n      type: String,\n      default: 'companies'\n    },\n    /**\n     * Format of the date, if not parsable by new Date, you should\n     * specify the format here\n     */\n    dateFormat: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      total: 0,\n      minDate: null,\n      maxDate: null,\n      records: [],\n      topKSlider: null,\n      othersCheck: false\n    }\n  },\n  computed: {\n    validProps() {\n      let valid = true\n      if (!this.values.length) {\n        console.error('Values is empty')\n        valid = false\n        return valid\n      }\n      if (\n        this.dateAccessor &&\n        !Object.keys(this.values[0]).includes(this.dateAccessor)\n      ) {\n        console.error('Date Accessor not found')\n        valid = false\n      }\n      if (!Object.keys(this.values[0]).includes(this.yAccessor)) {\n        console.error('Y Accessor not found')\n        valid = false\n      }\n      if (\n        this.xAccessor &&\n        !Object.keys(this.values[0]).includes(this.xAccessor)\n      ) {\n        console.error('X Accessor not found')\n        valid = false\n      }\n      return valid\n    }\n  },\n  methods: {\n    k(key) {\n      return `chart-view.top-row.${key}`\n    },\n    // Update data depending on the current states of the buttons\n    draw() {\n      const newData = this.records.slice(\n        0,\n        this.othersCheck ? this.topKSlider - 1 : this.topKSlider\n      )\n      if (this.othersCheck) {\n        newData.push({\n          key: 'Others',\n          value: d3.sum(this.records.slice(this.topKSlider), d => d.value)\n        })\n        newData.sort(function(a, b) {\n          return d3.descending(a.value, b.value)\n        })\n      }\n\n      this.xScale.domain(d3.extent(newData, d => d.value))\n      this.yScale.domain(\n        newData.map(function(d) {\n          return d.key\n        })\n      )\n\n      // Create/update bars\n      const bars = this.svg.selectAll('.bars').data(newData, d => d.key)\n      const that = this\n      bars\n        .enter()\n        .append('rect')\n        .attr('class', 'bars')\n        .attr('x', 5)\n        .attr('y', d => this.yScale(d.key))\n        .attr('width', 0)\n        .attr('height', this.yScale.bandwidth())\n        .attr('fill', '#69b3a2')\n        .on('mouseover', function(evt, d) {\n          d3.select(this).style('opacity', 0.7)\n          d3.select(this.parentNode)\n            .append('text')\n            .attr('class', 'barsLabel')\n            .text(d.value)\n            .attr('text-anchor', 'start')\n            .attr('alignment-baseline', 'middle')\n            .attr('x', that.xScale(d.value) + 15)\n            .attr('y', that.yScale(d.key) + that.yScale.bandwidth() / 2)\n            .style('font-size', '0.8rem')\n            .style('font-weight', 'bold')\n            .style('fill', '#0A0A0A')\n        })\n        .on('mouseleave', function(evt, d) {\n          d3.select(this).style('opacity', 1)\n          d3.select('.barsLabel').remove()\n        })\n        .merge(bars)\n        .transition()\n        .duration(1000)\n        .delay(200)\n        .attr('y', d => this.yScale(d.key))\n        .attr('width', d => this.xScale(d.value) + 5)\n        .attr('height', this.yScale.bandwidth())\n\n      // Animate bars when removing\n      bars.exit().transition().duration(1000).attr('width', 0).remove()\n\n      d3.select('.yAxis')\n        .transition()\n        .duration(1000)\n        .delay(200)\n        .call(this.yAxis)\n      d3.selectAll('.yAxis g text')\n        .transition()\n        .duration(1000)\n        .delay(200)\n        .style('font-size', 1.8 / Math.log(this.topKSlider) + 'rem')\n\n      d3.select('.xAxis')\n        .transition()\n        .duration(1000)\n        .delay(200)\n        .call(this.xAxis)\n    },\n    drawViz() {\n      if (!this.validProps) { return }\n      // Compute date range\n      const dateParser = this.dateFormat\n        ? d3.timeParse(this.dateFormat)\n        : d => new Date(d)\n\n      const formatDate = date => this.$d(date, 'dateOnly', this.$i18n.locale)\n      if (this.dateAccessor) {\n        const [minDate, maxDate] = d3.extent(\n          this.values,\n          d => dateParser(d[this.dateAccessor])\n        )\n        if (minDate && maxDate) {\n          this.minDate = formatDate(minDate)\n          this.maxDate = formatDate(maxDate)\n        } else {\n          throw new Error('Unable to parse date fields')\n        }\n      }\n\n      // Add number of samples\n      this.total = !this.xAccessor\n        ? this.values.length\n        : d3.sum(this.values, d => d[this.xAccessor])\n\n      this.topKSlider = Math.min(20, this.total)\n      // Precompute aggregation\n      this.records = nest()\n        .key(d => d[this.yAccessor])\n        .rollup(d => d3.sum(d, l => (this.xAccessor ? l[this.xAccessor] : 1)))\n        .entries(this.values)\n        .sort(function(a, b) {\n          return d3.descending(a.value, b.value)\n        })\n\n      /* create svg element */\n      const width = 300\n      const height = 380\n      d3.select('#' + this.graphId + ' svg').remove()\n      this.svg = d3\n        .select('#' + this.graphId)\n        .append('svg')\n        .attr('preserveAspectRatio', 'xMinYMin meet')\n        .attr(\n          'viewBox',\n          '-' +\n            this.adjHorizontal[0] +\n            ' -' +\n            this.adjVertical[0] +\n            ' ' +\n            (width + d3.sum(this.adjHorizontal)) +\n            ' ' +\n            (height + d3.sum(this.adjVertical))\n        )\n        .style('padding', this.padding)\n        .style('margin', this.margin)\n        .classed('svg-content', true)\n\n      /* Scales */\n      this.xScale = d3.scaleLinear().range([0, width])\n      this.yScale = d3.scaleBand().range([0, height]).paddingInner(0.1)\n\n      /* Axis */\n      function cutLongNames(name, maxLength) {\n        if (name.length > maxLength) { return name.slice(0, maxLength) + '..' } else { return name }\n      }\n      const yAxis = d3\n        .axisLeft(this.yScale)\n        .tickFormat(x => cutLongNames(x, this.yAxisMaxTickLength))\n        .tickSizeOuter(0)\n      const xAxis = d3.axisBottom(this.xScale).ticks(4)\n      this.xAxis = xAxis\n      this.yAxis = yAxis\n\n      this.svg\n        .append('g')\n        .attr('class', 'xAxis')\n        .attr('transform', 'translate(0,' + height + ')')\n        .call(xAxis)\n        .append('text')\n        .attr('dy', '.75em')\n        .attr('y', 30)\n        .attr('x', width / 2)\n        .style('text-anchor', 'middle')\n        .text(this.xLabel)\n      this.svg.append('g').attr('class', 'yAxis').call(yAxis)\n      this.draw()\n    }\n  }\n}\n</script>\n<style scoped>\n/* AXES */\n/* ticks */\n::v-deep .xAxis line,\n::v-deep .yAxis line {\n  stroke: #706f6f;\n  stroke-width: 0.5;\n  shape-rendering: geometricPrecision;\n}\n\n/* axis contour */\n::v-deep .xAxis path,\n::v-deep .yAxis path {\n  stroke: #706f6f;\n  stroke-width: 0.7;\n  shape-rendering: geometricPrecision;\n}\n\n::v-deep .yAxis path {\n  display: none;\n}\n\n/* axis text */\n::v-deep .xAxis text,\n::v-deep .yAxis text {\n  fill: #2b2929;\n  font-weight: 300;\n}\n::v-deep .xAxis text {\n  fill: #2b2929;\n  font-weight: 300;\n  font-size: 1rem;\n}\n</style>\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewTopRow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewTopRow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartViewTopRow.vue?vue&type=template&id=20abbd90&scoped=true&\"\nimport script from \"./ChartViewTopRow.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewTopRow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChartViewTopRow.vue?vue&type=style&index=0&id=20abbd90&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20abbd90\",\n  null\n  \n)\n\nexport default component.exports","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","export default function(map) {\n  var keys = [];\n  for (var key in map) keys.push(key);\n  return keys;\n}\n","import { TextFilterWidget } from 'dc'\nimport { merge } from 'lodash-es'\n\nimport kViewBlockMixin from '@/mixins/k-view-block'\n\nconst mixin = {\n  props: {\n    values: {\n      type: Array,\n      default: () => []\n    },\n    headers: {\n      type: Array,\n      default: () => []\n    },\n    messages: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  data() {\n    return {\n      graphId: 'graph_' + this._uid,\n      totalCount: 0,\n      filterCount: 0\n    }\n  },\n  mounted() {\n    this.drawViz()\n  },\n  watch: {\n    values() {\n      this.drawViz()\n    }\n  },\n  methods: {\n    drawViz() { },\n    createTextFilterWidget(parent, placeholder = 'Search') {\n      const widget = new TextFilterWidget(parent)\n      widget.placeHolder(this.$tev(placeholder, placeholder))\n      return widget\n    }\n  }\n}\n\nexport default merge(mixin, kViewBlockMixin)\n","import { groupBy } from 'lodash-es'\n\nfunction findK(arr) {\n  let kMin = 0\n  for (let j = 1; j <= Math.max.apply(Math, arr); j++) {\n    const l = arr.filter(x => x <= j)\n    if (l.length >= j) {\n      kMin = j\n      break\n    }\n  }\n  return kMin\n}\n\nfunction avg(arr) {\n  const sum = arr.reduce((a, b) => a + b, 0)\n  return sum / arr.length || 0\n}\n\nfunction filterOut(arr, k) {\n  return arr.filter(x => x.k <= k)\n}\n\nexport function kAnonymityFilter(values, groupKeys, otherKeys) {\n  const table = []\n  const grouped = groupBy(values, n => groupKeys.map(x => n[x]))\n  const keys = Object.keys(grouped)\n  for (let i = 0; i < keys.length; i++) {\n    const x = keys[i]\n    const elem = {}\n    const splitted = x.split(',')\n    for (let j = 0; j < groupKeys.length; j++) {\n      elem[groupKeys[j]] = splitted[j]\n    }\n    const kMin = findK(grouped[x].map(v => v.k))\n    const rest = filterOut(grouped[x], kMin)\n    for (let j = 0; j < otherKeys.length; j++) {\n      elem[otherKeys[j]] = avg(rest.map(x => x[otherKeys[j]]))\n    }\n    elem.k = kMin\n    table.push(elem)\n  }\n  const res = table.filter(x => x.k > 0)\n  return res\n}\n"],"names":["render","_vm","this","_c","_self","values","length","attrs","total","staticClass","_v","_s","$t","_b","headers","header_name_transport","get_name_transport","keplerArgs","on","onTableFilter","header_trips","items","get_trips","_e","staticRenderFns","components","ChartViewTopRow","mixins","mixin","props","keplerConfig","type","Object","default","data","filteredRows","computed","names","map","v","name_of_transport","transitPath","substr","indexOf","k","res","kAnonymity","keys","trips","start_end","keplerData","fields","h","name","rows","r","config","methods","newItems","component","scopedSlots","_u","key","fn","domProps","proxy","countLabel","minDate","maxDate","staticStyle","_g","yLabel","Math","min","draw","model","value","callback","$$v","topKSlider","expression","othersCheck","graphId","yAccessor","String","required","xAccessor","dateAccessor","yAxisMaxTickLength","Number","margin","adjVertical","Array","adjHorizontal","xLabel","dateFormat","records","validProps","valid","includes","console","error","newData","slice","push","d","sort","a","b","xScale","domain","yScale","bars","svg","selectAll","that","enter","append","attr","bandwidth","evt","style","parentNode","text","remove","merge","transition","duration","delay","exit","call","yAxis","log","xAxis","drawViz","dateParser","Date","formatDate","date","$d","$i18n","locale","Error","rollup","l","entries","width","height","cutLongNames","maxLength","padding","classed","range","paddingInner","tickFormat","x","tickSizeOuter","ticks","prefix","Map","object","f","each","set","isArray","o","i","n","prototype","constructor","has","get","property","clear","size","empty","sortValues","nest","sortKeys","apply","array","depth","createResult","setResult","keyValue","valuesByKey","result","sortKey","createObject","setObject","createMap","setMap","order","Set","proto","add","messages","_uid","totalCount","filterCount","mounted","watch","createTextFilterWidget","parent","placeholder","widget","TextFilterWidget","placeHolder","$tev","findK","arr","kMin","j","max","filter","avg","sum","reduce","filterOut","kAnonymityFilter","groupKeys","otherKeys","table","grouped","elem","splitted","split","rest"],"sourceRoot":""}