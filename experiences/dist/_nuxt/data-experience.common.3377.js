"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[3377,8736,1297],{63377:function(t,e,n){n.r(e),n.d(e,{default:function(){return H}});var r=n(46228),o=n(60171);function c(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&(n+=o)}return n}function l(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o)}return n}function f(t,e){return t.sourceLinks.length?t.depth:e-1}function h(t){return function(){return t}}function d(a,b){return v(a.source,b.source)||a.index-b.index}function y(a,b){return v(a.target,b.target)||a.index-b.index}function v(a,b){return a.y0-b.y0}function x(t){return t.value}function k(t){return t.index}function _(t){return t.nodes}function m(t){return t.links}function w(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function L({nodes:t}){for(const e of t){let t=e.y0,n=t;for(const link of e.sourceLinks)link.y0=t+link.width/2,t+=link.width;for(const link of e.targetLinks)link.y1=n+link.width/2,n+=link.width}}function M(){let t,e,n,r=0,o=0,M=1,B=1,V=24,C=8,S=k,T=f,A=_,I=m,N=6;function z(){const t={nodes:A.apply(null,arguments),links:I.apply(null,arguments)};return $(t),E(t),P(t),Z(t),W(t),L(t),t}function $({nodes:t,links:e}){for(const[i,e]of t.entries())e.index=i,e.sourceLinks=[],e.targetLinks=[];const r=new Map(t.map(((e,i)=>[S(e,i,t),e])));for(const[i,link]of e.entries()){link.index=i;let{source:source,target:t}=link;"object"!=typeof source&&(source=link.source=w(r,source)),"object"!=typeof t&&(t=link.target=w(r,t)),source.sourceLinks.push(link),t.targetLinks.push(link)}if(null!=n)for(const{sourceLinks:e,targetLinks:r}of t)e.sort(n),r.sort(n)}function E({nodes:t}){for(const e of t)e.value=void 0===e.fixedValue?Math.max(c(e.sourceLinks,x),c(e.targetLinks,x)):e.fixedValue}function P({nodes:t}){const e=t.length;let n=new Set(t),r=new Set,o=0;for(;n.size;){for(const t of n){t.depth=o;for(const{target:e}of t.sourceLinks)r.add(e)}if(++o>e)throw new Error("circular link");n=r,r=new Set}}function Z({nodes:t}){const e=t.length;let n=new Set(t),r=new Set,o=0;for(;n.size;){for(const t of n){t.height=o;for(const{source:source}of t.targetLinks)r.add(source)}if(++o>e)throw new Error("circular link");n=r,r=new Set}}function W(n){const f=function({nodes:t}){const n=l(t,(t=>t.depth))+1,o=(M-r-V)/(n-1),c=new Array(n);for(const e of t){const i=Math.max(0,Math.min(n-1,Math.floor(T.call(null,e,n))));e.layer=i,e.x0=r+i*o,e.x1=e.x0+V,c[i]?c[i].push(e):c[i]=[e]}if(e)for(const t of c)t.sort(e);return c}(n);t=Math.min(C,(B-o)/(l(f,(t=>t.length))-1)),function(e){const n=function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o)}return n}(e,(e=>(B-o-(e.length-1)*t)/c(e,x)));for(const r of e){let e=o;for(const o of r){o.y0=e,o.y1=e+o.value*n,e=o.y1+t;for(const link of o.sourceLinks)link.width=link.value*n}e=(B-e+t)/(r.length+1);for(let i=0;i<r.length;++i){const t=r[i];t.y0+=e*(i+1),t.y1+=e*(i+1)}X(r)}}(f);for(let i=0;i<N;++i){const t=Math.pow(.99,i),e=Math.max(1-t,(i+1)/N);D(f,t,e),Y(f,t,e)}}function Y(t,n,r){for(let i=1,o=t.length;i<o;++i){const o=t[i];for(const t of o){let e=0,r=0;for(const{source:source,value:n}of t.targetLinks){let o=n*(t.layer-source.layer);e+=F(source,t)*o,r+=o}if(!(r>0))continue;let o=(e/r-t.y0)*n;t.y0+=o,t.y1+=o,H(t)}void 0===e&&o.sort(v),R(o,r)}}function D(t,n,r){for(let i=t.length-2;i>=0;--i){const o=t[i];for(const source of o){let t=0,e=0;for(const{target:n,value:r}of source.sourceLinks){let o=r*(n.layer-source.layer);t+=G(source,n)*o,e+=o}if(!(e>0))continue;let r=(t/e-source.y0)*n;source.y0+=r,source.y1+=r,H(source)}void 0===e&&o.sort(v),R(o,r)}}function R(e,n){const i=e.length>>1,r=e[i];O(e,r.y0-t,i-1,n),j(e,r.y1+t,i+1,n),O(e,B,e.length-1,n),j(e,o,0,n)}function j(e,n,i,r){for(;i<e.length;++i){const o=e[i],c=(n-o.y0)*r;c>1e-6&&(o.y0+=c,o.y1+=c),n=o.y1+t}}function O(e,n,i,r){for(;i>=0;--i){const o=e[i],c=(o.y1-n)*r;c>1e-6&&(o.y0-=c,o.y1-=c),n=o.y0-t}}function H({sourceLinks:t,targetLinks:e}){if(void 0===n){for(const{source:{sourceLinks:t}}of e)t.sort(y);for(const{target:{targetLinks:e}}of t)e.sort(d)}}function X(t){if(void 0===n)for(const{sourceLinks:e,targetLinks:n}of t)e.sort(y),n.sort(d)}function F(source,e){let n=source.y0-(source.sourceLinks.length-1)*t/2;for(const{target:r,width:o}of source.sourceLinks){if(r===e)break;n+=o+t}for(const{source:t,width:r}of e.targetLinks){if(t===source)break;n-=r}return n}function G(source,e){let n=e.y0-(e.targetLinks.length-1)*t/2;for(const{source:r,width:o}of e.targetLinks){if(r===source)break;n+=o+t}for(const{target:t,width:r}of source.sourceLinks){if(t===e)break;n-=r}return n}return z.update=function(t){return L(t),t},z.nodeId=function(t){return arguments.length?(S="function"==typeof t?t:h(t),z):S},z.nodeAlign=function(t){return arguments.length?(T="function"==typeof t?t:h(t),z):T},z.nodeSort=function(t){return arguments.length?(e=t,z):e},z.nodeWidth=function(t){return arguments.length?(V=+t,z):V},z.nodePadding=function(e){return arguments.length?(C=t=+e,z):C},z.nodes=function(t){return arguments.length?(A="function"==typeof t?t:h(t),z):A},z.links=function(t){return arguments.length?(I="function"==typeof t?t:h(t),z):I},z.linkSort=function(t){return arguments.length?(n=t,z):n},z.size=function(t){return arguments.length?(r=o=0,M=+t[0],B=+t[1],z):[M-r,B-o]},z.extent=function(t){return arguments.length?(r=+t[0][0],M=+t[1][0],o=+t[0][1],B=+t[1][1],z):[[r,o],[M,B]]},z.iterations=function(t){return arguments.length?(N=+t,z):N},z}var B=Math.PI,V=2*B,C=1e-6,S=V-C;function T(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new T}T.prototype=path.prototype={constructor:T,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,o,c){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+o)+","+(this._y1=+c)},arcTo:function(t,e,n,r,o){t=+t,e=+e,n=+n,r=+r,o=+o;var c=this._x1,l=this._y1,f=n-t,h=r-e,d=c-t,y=l-e,v=d*d+y*y;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(v>C)if(Math.abs(y*f-h*d)>C&&o){var x=n-c,k=r-l,_=f*f+h*h,m=x*x+k*k,w=Math.sqrt(_),L=Math.sqrt(v),M=o*Math.tan((B-Math.acos((_+v-m)/(2*w*L)))/2),V=M/L,S=M/w;Math.abs(V-1)>C&&(this._+="L"+(t+V*d)+","+(e+V*y)),this._+="A"+o+","+o+",0,0,"+ +(y*x>d*k)+","+(this._x1=t+S*f)+","+(this._y1=e+S*h)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,o,c){t=+t,e=+e,c=!!c;var l=(n=+n)*Math.cos(r),f=n*Math.sin(r),h=t+l,d=e+f,y=1^c,v=c?r-o:o-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+d:(Math.abs(this._x1-h)>C||Math.abs(this._y1-d)>C)&&(this._+="L"+h+","+d),n&&(v<0&&(v=v%V+V),v>S?this._+="A"+n+","+n+",0,1,"+y+","+(t-l)+","+(e-f)+"A"+n+","+n+",0,1,"+y+","+(this._x1=h)+","+(this._y1=d):v>C&&(this._+="A"+n+","+n+",0,"+ +(v>=B)+","+y+","+(this._x1=t+n*Math.cos(o))+","+(this._y1=e+n*Math.sin(o))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var A=path,I=Array.prototype.slice;function N(t){return function(){return t}}function z(p){return p[0]}function $(p){return p[1]}function E(t){return t.source}function P(t){return t.target}function Z(t){var source=E,e=P,n=z,r=$,o=null;function link(){var c,l=I.call(arguments),s=source.apply(this,l),f=e.apply(this,l);if(o||(o=c=A()),t(o,+n.apply(this,(l[0]=s,l)),+r.apply(this,l),+n.apply(this,(l[0]=f,l)),+r.apply(this,l)),c)return o=null,c+""||null}return link.source=function(t){return arguments.length?(source=t,link):source},link.target=function(t){return arguments.length?(e=t,link):e},link.x=function(t){return arguments.length?(n="function"==typeof t?t:N(+t),link):n},link.y=function(t){return arguments.length?(r="function"==typeof t?t:N(+t),link):r},link.context=function(t){return arguments.length?(o=null==t?null:t,link):o},link}function W(t,e,n,r,o){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,o,r,o)}function Y(t){return[t.source.x1,t.y0]}function D(t){return[t.target.x0,t.y1]}function R(){return Z(W).source(Y).target(D)}var j=n(21297),O={name:"ChartViewSankey",components:{ChartViewVRowWebShare:n(18736).default},mixins:[j.default],props:{topN:{type:Number,default:10},displayLinksLabels:{type:Boolean,default:!0},nodeWidth:{type:Number,default:40},nodePadding:{type:Number,default:40}},data:()=>({total:0}),methods:{k:t=>`chart-view.sankey.${t}`,toJSONGraph(data){const t=r.uTd(data,(t=>t.length),(t=>t.source),(t=>t.target)).map((t=>({source:t[0],target:t[1],value:t[2]}))).filter((t=>""!==t.source&&""!==t.target&&t.value&&t.source!==t.target)).sort(((a,b)=>r.$1i(+a.value,+b.value))).slice(0,this.topN),e={nodes:[],links:[]};return t.forEach((function(t){t.sourceName=t.source,t.targetName=t.target,t.source=t.source+"s",t.target=t.target+"t",e.nodes.push({id:t.source}),e.nodes.push({id:t.target}),e.links.push({source:t.source,target:t.target,sourceName:t.sourceName,targetName:t.targetName,value:t.value})})),e.nodes=(0,o.XP)((0,o.b1)().key((t=>t.id)).object(e.nodes)),e.links.forEach((function(t,i){e.links[i].source=e.nodes.indexOf(e.links[i].source),e.links[i].target=e.nodes.indexOf(e.links[i].target)})),e.nodes.forEach((function(t,i){e.nodes[i]={name:t}})),e},drawViz(){this.total=this.values.length;const t=this.toJSONGraph(this.values),e=50,n=250,o=10,c=250,l=r.Ys("#"+this.graphId).node().getBoundingClientRect().width-c-n,f=50*this.topN-e-o,h=r.PKp().domain(t.nodes.map((t=>t.name.slice(0,-1)))).range(r.XgA),d=r.Ys("#"+this.graphId).append("div").style("opacity",1).html(`(${this.$t(this.k("hoverMessage"))})`).style("left",l/2+c+"px").style("top","0px"),svg=r.Ys("#"+this.graphId).append("svg").attr("width",l+c+n).attr("height",f+e+o).append("g").attr("transform","translate("+c+","+e+")"),y=r.Ys("#"+this.graphId).append("div").style("opacity",0).attr("class","tooltip");svg.append("text").attr("class","label").attr("x",0).attr("y",-e/2).text(this.$t(this.kViewBlock("sourceText"))),svg.append("text").attr("class","label").attr("x",l).attr("y",-e/2).attr("text-anchor","end").text(this.$t(this.kViewBlock("targetText")));const v=M().nodeWidth(this.nodeWidth).nodePadding(this.nodePadding).size([l,f]);v.links();const x=v(t);svg.append("g").selectAll("#"+this.graphId+".link").data(x.links).enter().append("path").attr("class","link").attr("d",R()).attr("stroke-width",(t=>t.width)).attr("opacity",.2).on("mouseover",((t,e)=>{const n=this.$t(this.kViewBlock("linkMouseoverHTML"),e);d.html(n).style("opacity",1),r.Ys(this).attr("opacity",.7)})).on("mouseleave",(function(t){r.Ys(this).attr("opacity",.2),d.style("opacity",0)}));const k=svg.append("g").selectAll("#"+this.graphId+".node").data(x.nodes).enter().append("g").attr("class","node");k.append("rect").attr("x",(t=>t.x0)).attr("y",(t=>t.y0)).attr("height",(t=>t.y1-t.y0)).attr("width",v.nodeWidth()).style("fill",(t=>t.color=h(t.name.slice(0,-1)))).style("stroke",(function(t){return r.B8C(t.color).darker(1)})),k.on("mouseover",((t,e)=>{const n=this.$t(this.kViewBlock("nodeMouseoverHTML"),{name:e.name.slice(0,-1),value:e.value,fromTo:this.$t(this.kViewBlock("s"===e.name.slice(-1)?"from":"to"))}),o=d.node().getBoundingClientRect().height;y.html(n).style("left",e.x1+c+8+"px").style("top",e.y0+o+35+"px"),y.style("opacity",1),r.Ys(this).attr("opacity",.7),r.td_("#"+this.graphId+".link").attr("opacity",.2),svg.selectAll("#"+this.graphId+".link").filter((link=>e.index===link.source.index||e.index===link.target.index)).attr("opacity",.7)})).on("mouseleave",(function(t){r.td_("#"+this.graphId+".link").attr("opacity",.2),r.Ys(this).attr("opacity",1),y.style("opacity",0)})),this.displayLinksLabels&&k.append("text").attr("x",(t=>t.x1+6)).attr("y",(t=>(t.y1+t.y0)/2)).attr("dy","0.35em").attr("text-anchor","start").text((t=>{let e=t.name.split(",")[0];return e.length>20&&(e=e.slice(0,20)+".."),e})).filter((t=>t.x0<l/2)).attr("x",(t=>t.x0-6)).attr("text-anchor","end")}}},H=(0,n(1001).Z)(O,(function(){var t=this,e=t._self._c;return e("VContainer",[e("ChartViewVRowWebShare",[e("VCol",{staticClass:"text-center",attrs:{cols:"12",md:"12"}},[e("i18n",{attrs:{path:t.kViewBlock("labelTotal"),tag:"p"},scopedSlots:t._u([{key:"total",fn:function(){return[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.total)}})]},proxy:!0}])}),e("div",{staticStyle:{position:"relative"},attrs:{id:t.graphId}})],1)],1)],1)}),[],!1,null,"654c5e13",null).exports},18736:function(t,e,n){n.r(e),n.d(e,{default:function(){return h}});var r=n(12555),o=n(37081),c=n(97888),l=n(9934),f={components:{BaseButton:o.Z,BaseButtonDownloadData:c.Z,BaseButtonShare:l.Z},mixins:[(0,r.Z)()]},h=(0,n(1001).Z)(f,(function(){var t=this,e=t._self._c;return e("VRow",t._b({ref:"domToImageNode"},"VRow",t.$attrs,!1),[t._t("default"),e("VCol",{staticClass:"dom-to-image-exclude",attrs:{cols:"12"}},[e("BaseButton",t._b({attrs:{icon:"mdiExport",text:"Export"},on:{click:t.exportImage}},"BaseButton",{progress:t.progress,status:t.status,error:t.error},!1)),e("BaseButtonDownloadData",t._b({},"BaseButtonDownloadData",{disabled:!t.blob,extension:t.extension,filename:t.filename,data:t.blob},!1)),e("BaseButtonShare",t._b({attrs:{"file-share":""}},"BaseButtonShare",{files:t.files,disabled:!t.files},!1))],1)],2)}),[],!1,null,null,null).exports},60171:function(t,e,n){n.d(e,{XP:function(){return _},b1:function(){return l}});var r="$";function o(){}function map(object,t){var map=new o;if(object instanceof o)object.each((function(t,e){map.set(e,t)}));else if(Array.isArray(object)){var e,i=-1,n=object.length;if(null==t)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(t(e=object[i],i,object),e)}else if(object)for(var r in object)map.set(r,object[r]);return map}o.prototype=map.prototype={constructor:o,has:function(t){return r+t in this},get:function(t){return this[r+t]},set:function(t,e){return this[r+t]=e,this},remove:function(t){var e=r+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===r&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===r&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===r&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===r&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===r&&++t;return t},empty:function(){for(var t in this)if(t[0]===r)return!1;return!0},each:function(t){for(var e in this)e[0]===r&&t(this[e],e.slice(1),this)}};var c=map;function l(){var t,e,n,r=[],o=[];function l(n,o,f,h){if(o>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var d,y,v,i=-1,x=n.length,k=r[o++],_=c(),m=f();++i<x;)(v=_.get(d=k(y=n[i])+""))?v.push(y):_.set(d,[y]);return _.each((function(t,e){h(m,e,l(t,o,f,h))})),m}function v(map,t){if(++t>r.length)return map;var n,c=o[t-1];return null!=e&&t>=r.length?n=map.entries():(n=[],map.each((function(e,r){n.push({key:r,values:v(e,t)})}))),null!=c?n.sort((function(a,b){return c(a.key,b.key)})):n}return n={object:function(t){return l(t,0,f,h)},map:function(t){return l(t,0,d,y)},entries:function(t){return v(l(t,0,d,y),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return o[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}}function f(){return{}}function h(object,t,e){object[t]=e}function d(){return c()}function y(map,t,e){map.set(t,e)}function v(){}var x=c.prototype;function k(object,t){var e=new v;if(object instanceof v)object.each((function(t){e.add(t)}));else if(object){var i=-1,n=object.length;if(null==t)for(;++i<n;)e.add(object[i]);else for(;++i<n;)e.add(t(object[i],i,object))}return e}v.prototype=k.prototype={constructor:v,has:x.has,add:function(t){return this[r+(t+="")]=t,this},remove:x.remove,clear:x.clear,values:x.keys,size:x.size,empty:x.empty,each:x.each};function _(map){var t=[];for(var e in map)t.push(e);return t}},21297:function(t,e,n){n.r(e);var r=n(40290),o=n(18651),c=n(659);const l={props:{values:{type:Array,default:()=>[]},headers:{type:Array,default:()=>[]},messages:{type:Object,default:()=>({})}},data(){return{graphId:"graph_"+this.$store.state.xp.currentTab,totalCount:0,filterCount:0}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{drawViz(){},createTextFilterWidget(t,e="Search"){const n=new r.TextFilterWidget(t);return n.placeHolder(this.$tev(e,e)),n}}};e.default=(0,o.Z)(l,c.Z)}}]);