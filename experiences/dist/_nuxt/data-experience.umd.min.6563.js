"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[6563,8736,6622,1297,9201],{76563:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var i=s(46228),r=s(40290),n=s(26641),l=s(21297),o=s(59201),u=s(89295),d=s(18736),c=s(96622),p=s(96963);r.config.defaultColors(i.xHP);var g={components:{ChartViewVRowWebShare:d.default,ChartViewFilters:c.default,UnitFilterableTable:p.Z},mixins:[l.default],props:{},data:()=>({header:[{text:"Date",value:"dateStr"},{text:"App",value:"app"},{text:"Likes",value:"likes"},{text:"Passes",value:"passes"},{text:"Messages sent",value:"messagesSent"},{text:"Messages received",value:"messagesReceived"},{text:"Matches",value:"matches"},{text:"Sexual Orientation",value:"sexualOrientations"},{text:"User ID",value:"userId"}],results:[],colorPalette:["#58539E","#847CEB","#605BAB","#4A4685","#9498F2"]}),methods:{resetAll(){r.filterAll(),r.renderAll()},decodeDefault(e){try{return e&&"undefined"!==e?decodeURIComponent(escape(e)):"Unknown"}catch(t){return console.error(t),e||"Unknown"}},drawViz(){const e=i.Z1g("%Y-%m-%d"),t=i.i$Z("%B, %Y");this.results=this.values.map((t=>{const s=e(t.dateValue)||new Date(t.dateValue);return{date:s,dateStr:t.dateValue,month:i.F0B(s),day:i.rr1(s),app:this.decodeDefault(t.app),likes:+this.decodeDefault(t.likes)||0,passes:+this.decodeDefault(t.passes)||0,messagesSent:+this.decodeDefault(t.messagesSent)||0,messagesReceived:+this.decodeDefault(t.messagesReceived)||0,matches:+this.decodeDefault(t.matches)||0,sexualOrientations:"tinder"===t.app?JSON.parse(t.sexualOrientations).join(" | "):this.decodeDefault(t.sexualOrientations),userId:this.decodeDefault(t.userId)}})).filter((e=>(0,u.qb)(e.date)));const s=(0,n.Z)(this.results),a=new r.LineChart(`#likes-chart-${this.graphId}`),l=new r.LineChart(`#messages-chart-${this.graphId}`),d=new r.PieChart(`#app-chart-${this.graphId}`),c=new r.PieChart(`#sexualOrientations-chart-${this.graphId}`);function h(e,t){return t.userId in e.userIds?e.userIds[t.userId]++:e.userIds[t.userId]=1,e}function p(e,t){return e.userIds[t.userId]--,0===e.userIds[t.userId]&&delete e.userIds[t.userId],e}function g(){return{userIds:{}}}i.Ys(`#likes-chart-${this.graphId} a.reset`).on("click",(function(){a.filterAll(),r.redrawAll()})),i.Ys(`#messages-chart-${this.graphId} a.reset`).on("click",(function(){l.filterAll(),r.redrawAll()})),i.Ys(`#app-chart-${this.graphId} a.reset`).on("click",(function(){d.filterAll(),r.redrawAll()})),i.Ys(`#sexualOrientations-chart-${this.graphId} a.reset`).on("click",(function(){c.filterAll(),r.redrawAll()}));const f=s.dimension((e=>e.app)),m=s.dimension((e=>e.sexualOrientations)),x=s.dimension((e=>e.month)),v=f.group().reduce(h,p,g),y=m.group().reduce(h,p,g),k=x.group().reduceSum((e=>e.likes)),w=x.group().reduceSum((e=>e.passes)),b=x.group().reduceSum((e=>e.matches)),I=x.group().reduceSum((e=>e.messagesSent)),C=x.group().reduceSum((e=>e.messagesReceived)),A=250;let $=i.Ys(`#app-chart-${this.graphId}`).node().getBoundingClientRect().width;const B=Math.min($,A);d.width($).height(A).slicesCap(10).radius(B/4).innerRadius(B/8).externalLabels(50).dimension(f).group(v).valueAccessor((e=>Object.keys(e.value.userIds).length)).title((e=>e.key+": "+Object.keys(e.value.userIds).length+" user(s)")).drawPaths(!0).minAngleForLabel(.1).ordinalColors(this.colorPalette),d.on("pretransition",o.addPiePercentage),$=i.Ys(`#sexualOrientations-chart-${this.graphId}`).node().getBoundingClientRect().width,c.width($).height(A).slicesCap(10).radius(B/4).innerRadius(B/8).externalLabels(50).dimension(m).group(y).valueAccessor((e=>Object.keys(e.value.userIds).length)).title((e=>e.key+": "+Object.keys(e.value.userIds).length+" user(s)")).drawPaths(!0).minAngleForLabel(.1).ordinalColors(this.colorPalette),c.on("pretransition",o.addPiePercentage);const V=i.Wem(this.results,(e=>e.date));$=i.Ys(`#likes-chart-${this.graphId}`).node().getBoundingClientRect().width,a.margins({top:20,left:40,right:20,bottom:20}).width($).turnOnControls(!0).curve(i.FdL).xyTipsOn(!0).height(A).brushOn(!1).renderArea(!0).dimension(x).group(k,"Likes").x(i.Xf().domain(V)).title("Likes",(e=>`${t(e.key)}: ${e.value} likes`)).legend((new r.Legend).x($-100).y(5).itemHeight(13).gap(5)).elasticY(!0).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).clipPadding(10).yAxisLabel("Total ").ordinalColors(["#2ecc71","#e74c3c","#3498db"]),a.xAxis().ticks(10),a.yAxis().ticks(6),a.stack(w,"Passes"),a.title("Passes",(e=>`${t(e.key)}: ${e.value} passes`)),a.stack(b,"Matches"),a.title("Matches",(e=>`${t(e.key)}: ${e.value} matches`)),$=i.Ys(`#messages-chart-${this.graphId}`).node().getBoundingClientRect().width,l.margins({top:20,left:40,right:20,bottom:20}).width($).turnOnControls(!1).curve(i.FdL).xyTipsOn(!0).height(A).brushOn(!1).renderArea(!0).dimension(x).group(I,"Messages Sent").x(i.Xf().domain(V)).legend((new r.Legend).x($-110).y(5).itemHeight(13).gap(5)).elasticY(!0).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).clipPadding(10).yAxisLabel("Total ").ordinalColors(["#2c3e50","#58539E"]),l.xAxis().ticks(10),l.yAxis().ticks(6),l.stack(C,"Messages Received"),l.title("Messages Received",(e=>`${t(e.key)}: ${e.value} messages received`)),l.title("Messages Sent",(e=>`${t(e.key)}: ${e.value} messages sent`));const S=s.groupAll(),O=s.dimension((e=>e));new r.DataCount(`#dc-data-count-${this.graphId}`).crossfilter(s).groupAll(S).html({some:"<strong>%filter-count</strong> selected out of <strong>%total-count</strong> records | <a class='resetAll'>Reset All</a>",all:"All <strong>%total-count</strong> records selected. Please click on the graph to apply filters."}).on("pretransition",((e,t)=>{this.results=O.top(S.value()),i.Ys(`#dc-data-count-${this.graphId} a.resetAll`).on("click",(()=>{r.filterAll(),r.renderAll()}))})),r.renderAll()}}},h=g,f=(0,s(1001).Z)(h,(function(){var e=this,t=e._self._c;return t("VContainer",[t("ChartViewVRowWebShare",[t("VCol",{attrs:{cols:"12"}},[t("VRow",[t("VCol",{attrs:{cols:"12",md:"8"}},[t("div",{attrs:{id:`likes-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("Likes / Passes / Matches per month")])])])]),t("VCol",{attrs:{cols:"12",md:"4"}},[t("div",{attrs:{id:`app-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("App")])]),t("ChartViewFilters")],1)])],1),t("VRow",[t("VCol",{attrs:{cols:"12",md:"8"}},[t("div",{attrs:{id:`messages-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("Messages per month")])])])]),t("VCol",{attrs:{cols:"12",md:"4"}},[t("div",{attrs:{id:`sexualOrientations-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("Sexual Orientations")])]),t("ChartViewFilters")],1)])],1)],1)],1),t("VRow",[t("div",{staticClass:"dc-data-count",attrs:{id:`dc-data-count-${e.graphId}`}})]),t("VRow",[t("VCol",{attrs:{cols:"12"}},[t("UnitFilterableTable",e._b({},"UnitFilterableTable",{headers:e.header,items:e.results},!1))],1)],1)],1)}),[],!1,null,null,null),m=f.exports},18736:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var i=s(12555),r=s(4031),n=s(97888),l=s(9934),u={components:{BaseButton:r.Z,BaseButtonDownloadData:n.Z,BaseButtonShare:l.Z},mixins:[(0,i.Z)()]},o=(0,s(1001).Z)(u,(function(){var e=this,t=e._self._c;return t("VRow",e._b({ref:"domToImageNode"},"VRow",e.$attrs,!1),[e._t("default"),t("VCol",{staticClass:"dom-to-image-exclude",attrs:{cols:"12"}},[t("BaseButton",e._b({attrs:{icon:"mdiExport",text:"Export"},on:{click:e.exportImage}},"BaseButton",{progress:e.progress,status:e.status,error:e.error},!1)),t("BaseButtonDownloadData",e._b({},"BaseButtonDownloadData",{disabled:!e.blob,extension:e.extension,filename:e.filename,data:e.blob},!1)),t("BaseButtonShare",e._b({attrs:{"file-share":""}},"BaseButtonShare",{files:e.files,disabled:!e.files},!1))],1)],2)}),[],!1,null,null,null),p=o.exports},96622:function(e,t,s){s.r(t),s.d(t,{default:function(){return l}});var r={},n=(0,s(1001).Z)(r,(function(){var e=this,t=e._self._c;return t("p",{staticClass:"filters"},[t("span",[e._v(" "+e._s(e.$t("Current filter"))+" "),t("span",{staticClass:"filter"})]),t("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null),l=n.exports},21297:function(e,t,s){s.r(t);var a=s(40290),r=s(18651),i=s(659);const n={props:{values:{type:Array,default:()=>[]},headers:{type:Array,default:()=>[]},messages:{type:Object,default:()=>({})}},data(){return{graphId:"graph_"+this.$store.state.xp.currentTab,totalCount:0,filterCount:0}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{drawViz(){},createTextFilterWidget(e,t="Search"){const s=new a.TextFilterWidget(e);return s.placeHolder(this.$tev(t,t)),s}}};t.default=(0,r.Z)(n,i.Z)},59201:function(e,t,s){s.r(t),s.d(t,{addPiePercentage:function(){return d},addXLabel:function(){return i},addYLabel:function(){return n},createCumulativeGroup:function(){return l},removeEmptyBins:function(){return o}});var a=s(46228),r=s(40290);function i(e,t){const s=e.svg().append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",e.width()/2).attr("y",e.height()-10).text(t),a=s.node().getBBox(),r=e.margins();s.attr("x",r.left+(e.width()-r.left-r.right)/2).attr("y",e.height()-Math.ceil(a.height)/2)}function n(e,t){const s=e.svg().append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-e.height()/2).attr("y",10).text(t),a=s.node().getBBox(),r=e.margins();s.attr("x",-r.top-(e.height()-r.top-r.bottom)/2).attr("y",Math.max(Math.ceil(a.height),r.left-Math.ceil(a.height)-5))}function l(e){return{all(){const t={};return e.all().map((function(e){return t[e.key[0]]?t[e.key[0]]+=e.value:t[e.key[0]]=e.value,{key:e.key,value:t[e.key[0]]}}))}}}function o(e){return{top:t=>e.top(1/0).filter((function(e){return 0!==e.value.count&&0!==e.value})).slice(0,t)}}function d(e){e.selectAll("text.pie-slice.pie-label").call((function(e){e.each((function(e){const t=a.Ys(this);let s=t.text();s.length>14&&(s=s.substring(0,14)+".. "),s.length>0&&(s=s+" ("+r.utils.printSingleValue((e.endAngle-e.startAngle)/(2*Math.PI)*100)+"%)"),t.text(s)}))}))}}}]);