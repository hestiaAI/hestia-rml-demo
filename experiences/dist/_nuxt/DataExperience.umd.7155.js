"use strict";(("undefined"!=typeof self?self:this).webpackChunkDataExperience=("undefined"!=typeof self?self:this).webpackChunkDataExperience||[]).push([[7155,7473,6622],{17155:function(t,e,r){r.r(e),r.d(e,{default:function(){return c}});var n=r(60194),l=r(40290),o=r(27473),d=r(96622);l.config.defaultColors(n.schemePaired);var h={components:{ChartViewFilters:d.default},mixins:[o.default],props:{dateAccessor:{type:String,required:!0},dateFormat:{type:String,default:""},valueAccessor:{type:String,default:""},defaultValue:{type:Number,default:0},typeAccessor:{type:String,default:""}},data(){const t={Day:n.timeDay,Week:n.timeWeek,Month:n.timeMonth,Year:n.timeYear};return{results:[],interval:null,intervals:t,intervalsName:Object.keys(t),minDate:null,maxDate:null,barChart:null,dateDimension:null,dateGroup:null}},computed:{dateParser(){return this.dateFormat?n.timeParse(this.dateFormat):t=>new Date(t)}},methods:{drawViz(){this.barChart=new l.BarChart(`#bar-chart-${this.graphId}`);const t=n.select(`#bar-chart-${this.graphId}`).node().getBoundingClientRect().width;n.select(`#bar-chart-${this.graphId} a.reset`).on("click",(function(){this.barChart.filterAll(),l.redrawAll()})),this.dateDimension=this.ndx.dimension((t=>this.dateParser(t[this.dateAccessor]))),console.log(this.dateDimension),this.minDate=this.dateParser(this.dateDimension.bottom(1)[0][this.dateAccessor]),this.maxDate=this.dateParser(this.dateDimension.top(1)[0][this.dateAccessor]);const e=n.timeDay.count(this.minDate,this.maxDate);console.log(this.minDate,this.maxDate,e),this.interval=e<100?"Day":e<1e3?"Week":"Month";const r=t=>this.intervals[this.interval](t);this.dateGroup=this.valueAccessor?this.dateDimension.group(r).reduceSum((t=>t[this.valueAccessor])):this.dateDimension.group(r).reduceCount(),console.log(this.interval,this.dateGroup),this.barChart.width(t).height(this.height).ordinalColors([this.colorPalette[0]]).x(n.scaleTime().domain([n.timeHour.offset(this.minDate,0),n.timeHour.offset(this.maxDate,2)])).xUnits(this.intervals[this.interval].range).margins({left:50,top:20,right:50,bottom:20}).dimension(this.dateDimension).group(this.dateGroup).brushOn(!1).elasticX(!1).elasticY(!0).mouseZoomable(!1).clipPadding(10),l.renderAll()},redraw(){const t=t=>this.intervals[this.interval](t);console.log(this.intervals[this.interval]),this.dateGroup=this.valueAccessor?this.dateDimension.group(t).reduceSum((t=>t[this.valueAccessor])):this.dateDimension.group(t).reduceCount(),this.barChart.xUnits(this.intervals[this.interval].range),this.barChart.dimension(this.dateDimension).group(this.dateGroup).transitionDuration(1e3).render()}}},c=(0,r(1001).Z)(h,(function(){var t=this,e=t._self._c;return e("VContainer",[e("div",{attrs:{id:"bar-chart-"+t.graphId}},[e("div",{staticClass:"d-flex"},[e("div",[e("strong",[t._v(t._s(t.title))]),e("ChartViewFilters")],1),e("VSpacer"),e("div",{staticStyle:{"max-width":"160px"}},[e("VSelect",{staticClass:"ma-0 ml-2",attrs:{items:t.intervalsName,label:t.$t("Time interval"),"hide-details":""},on:{change:t.redraw},model:{value:t.interval,callback:function(e){t.interval=e},expression:"interval"}})],1)],1)])])}),[],!1,null,null,null).exports},96622:function(t,e,r){r.r(e),r.d(e,{default:function(){return l}});var n={},l=(0,r(1001).Z)(n,(function(){var t=this,e=t._self._c;return e("p",{staticClass:"filters"},[e("span",[t._v(" "+t._s(t.$t("Current filter"))+" "),e("span",{staticClass:"filter"})]),e("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null).exports},27473:function(t,e,r){r.r(e);var n=r(40290);e.default={props:{ndx:{type:Object,required:!0},title:{type:String,default:""},valueLabel:{type:String,default:"records"},height:{type:Number,default:250},position:{type:Number,required:!0},colorPalette:{type:Array,default:()=>["#bebada","#8dd3c7","#fb8072","#80b1d3","#fdb462","#b3de69","#bc80bd","#ccebc5"]}},data(){return{graphId:"graph_"+this._uid}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{createTextFilterWidget(t,e="Search"){const r=new n.TextFilterWidget(t);return r.placeHolder(this.$t(e)),r}}}}}]);