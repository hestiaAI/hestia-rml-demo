"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[5058,1690,6622,9201],{85058:function(t,e,r){r.r(e),r.d(e,{default:function(){return h}});var n=r(46228),s=r(40290),l=r(59201),o=r(31690),u=r(96622);s.config.defaultColors(n.xHP);var c={components:{ChartViewFilters:u.default},mixins:[o.default],props:{valueAccessor:{type:String,required:!0},sumAccessor:{type:String,default:""},topK:{type:Number,default:10},defaultValue:{type:String,default:""}},data:()=>({}),methods:{drawViz(){const t=new s.RowChart(`#top-chart-${this.graphId}`),e=this.createTextFilterWidget(`#top-search-${this.graphId}`);n.Ys(`#top-chart-${this.graphId} a.reset`).on("click",(function(){t.filterAll(),s.redrawAll()}));const r=this.ndx.dimension((t=>t[this.valueAccessor]||this.defaultValue));e.dimension(this.ndx.dimension((t=>(t[this.valueAccessor]||this.defaultValue).toLowerCase())));const a=this.sumAccessor?r.group().reduceSum((t=>t[this.sumAccessor])):r.group().reduceCount();t.width(n.Ys(`#top-chart-${this.graphId}`).node().getBoundingClientRect().width).height(this.height).margins({top:20,left:10,right:10,bottom:20}).group((0,l.removeEmptyBins)(a)).dimension(r).ordinalColors(this.colorPalette).label((t=>t.key)).data((t=>t.top(this.topK))).title((t=>`${t.value} ${this.valueLabel}`)).elasticX(!0).xAxis().ticks(4),s.renderAll()}}},d=c,p=(0,r(1001).Z)(d,(function(){var t=this,e=t._self._c;return e("VContainer",[e("div",{attrs:{id:`top-chart-${t.graphId}`}},[e("div",{staticStyle:{display:"flex"}},[e("strong",[t._v(t._s(t.title))]),e("VSpacer"),e("div",{attrs:{id:`top-search-${t.graphId}`}})],1),e("ChartViewFilters")],1)])}),[],!1,null,"354955f3",null),h=p.exports},96622:function(t,e,r){r.r(e),r.d(e,{default:function(){return u}});var s={},n=(0,r(1001).Z)(s,(function(){var t=this,e=t._self._c;return e("p",{staticClass:"filters"},[e("span",[t._v(" "+t._s(t.$t("Current filter"))+" "),e("span",{staticClass:"filter"})]),e("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null),u=n.exports},31690:function(t,e,r){r.r(e);var a=r(40290);e.default={props:{ndx:{type:Object,required:!0},title:{type:String,default:""},valueLabel:{type:String,default:"records"},height:{type:Number,default:250},colorPalette:{type:Array,default:()=>["#58539E","#847CEB","#605BAB","#4A4685","#35325E"]}},data(){return{graphId:"graph_"+this.$store.state.xp.currentTab}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{createTextFilterWidget(t,e="Search"){const r=new a.TextFilterWidget(t);return r.placeHolder(this.$t(e)),r}}}},59201:function(t,e,r){r.r(e),r.d(e,{addPiePercentage:function(){return u},addXLabel:function(){return n},addYLabel:function(){return s},createCumulativeGroup:function(){return l},removeEmptyBins:function(){return o}});var a=r(46228),i=r(40290);function n(t,e){const r=t.svg().append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",t.width()/2).attr("y",t.height()-10).text(e),a=r.node().getBBox(),i=t.margins();r.attr("x",i.left+(t.width()-i.left-i.right)/2).attr("y",t.height()-Math.ceil(a.height)/2)}function s(t,e){const r=t.svg().append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-t.height()/2).attr("y",10).text(e),a=r.node().getBBox(),i=t.margins();r.attr("x",-i.top-(t.height()-i.top-i.bottom)/2).attr("y",Math.max(Math.ceil(a.height),i.left-Math.ceil(a.height)-5))}function l(t){return{all(){const e={};return t.all().map((function(t){return e[t.key[0]]?e[t.key[0]]+=t.value:e[t.key[0]]=t.value,{key:t.key,value:e[t.key[0]]}}))}}}function o(t){return{top:e=>t.top(1/0).filter((function(t){return 0!==t.value.count&&0!==t.value})).slice(0,e)}}function u(t){t.selectAll("text.pie-slice.pie-label").call((function(t){t.each((function(t){const e=a.Ys(this);let r=e.text();r.length>14&&(r=r.substring(0,14)+".. "),r.length>0&&(r=r+" ("+i.utils.printSingleValue((t.endAngle-t.startAngle)/(2*Math.PI)*100)+"%)"),e.text(r)}))}))}}}]);