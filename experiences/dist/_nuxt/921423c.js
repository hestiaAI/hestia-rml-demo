(window.webpackJsonp=window.webpackJsonp||[]).push([[12,68],{1001:function(e,t,r){"use strict";r.r(t);var n=r(993);t.default={props:{values:{type:Array,default:function(){return[]}},headers:{type:Array,default:function(){return[]}}},data:function(){return{graphId:"graph_"+this._uid}},mounted:function(){this.drawViz()},watch:{values:function(){this.drawViz()}},methods:{createTextFilterWidget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Search",r=new n.TextFilterWidget(e);return r.placeHolder(this.$t(t)),r}}}},1314:function(e,t,r){"use strict";r.r(t);r(13),r(8),r(16),r(3),r(19),r(11),r(20);var n=r(2);r(36);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var c={props:{args:{type:Object,default:function(){return{}}},src:{type:String,required:!0},height:{type:Number,default:500}},data:function(){return{loaded:!1}},computed:{finalArgs:function(){var e=this.args;return"/kepler"===this.src&&(e.mapboxToken=this.$store.state.config.mapboxToken),e}},watch:{finalArgs:function(e){this.loaded&&this.callIframeFunction("update",e)}},methods:{onload:function(){var e=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({height:this.height,width:this.width=this.$refs.iframe.offsetWidth},this.finalArgs);this.callIframeFunction("init",e),this.callIframeFunction("update",this.finalArgs),this.loaded=!0},callIframeFunction:function(e){var t,r=null===(t=this.$refs.iframe.contentWindow)||void 0===t?void 0:t[e];if(r)try{for(var n=arguments.length,o=new Array(n>1?n-1:0),c=1;c<n;c++)o[c-1]=arguments[c];r.apply(void 0,o)}catch(e){console.error("problem in iframe",e)}else console.error("iframe does not have a function called "+e)}}},l=c,f=r(38),d=r(44),h=r.n(d),m=r(1002),component=Object(f.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("VCard",{style:"width: 100%; height: "+e.height+"px"},[e.loaded?e._e():r("div",{staticClass:"d-flex flex-column align-center justify-center",style:"width: 100%; height: "+e.height+"px"},[r("BaseProgressCircular",{attrs:{size:"64",width:"4",color:"primary"}})],1),e._v(" "),r("iframe",{ref:"iframe",staticClass:"frame",style:"width: 100%; height: "+e.height+"px",attrs:{src:e.src,frameborder:"0"},on:{load:e.onload}})])}),[],!1,null,null,null);t.default=component.exports;h()(component,{BaseProgressCircular:r(592).default}),h()(component,{VCard:m.a})},1560:function(e,t,r){"use strict";r.r(t);r(3),r(40),r(16),r(72),r(13),r(1900);var n=r(1925),o=r(959),c=r(1926),l={mixins:[r(1001).default],props:{keplerConfig:{type:Object,default:function(){return null}},placeName:{type:String,default:function(){return""}}},data:function(){return{listOfNames:this.getOrderedList(),placeSelected:this.getSelectedName()}},computed:{total:function(){return this.values.length},total_time:function(){var e=this.get_durations().reduce((function(a,b){return a+b}),0);return this.convertHMS(e)},mean_time:function(){var e=this.get_durations(),t=e.reduce((function(a,b){return a+b}),0)/e.length||0;return this.convertHMS(t)},associated_names:function(){var e=this,table=this.values.filter((function(t){return t.winnerName===e.placeSelected}));return Object(n.a)(table,(function(e){return e.loserName})).map((function(e){return{name:e.loserName,latitude:e.loserLatitude,longitude:e.loserLongitude,confidence:e.loserConfidence}}))},keplerData:function(){var e=Object.keys(this.associated_names[0]);return{fields:e.map((function(e){return{name:e}})),rows:this.associated_names.map((function(t){return e.map((function(e){return t[e]}))}))}},keplerArgs:function(){return{keplerData:this.keplerData,config:this.keplerConfig}}},methods:{getSelectedName:function(){var e=this.getOrderedList();return""!==this.placeName?this.placeName:e[0]},getOrderedList:function(){var e=Object(o.a)(this.values,"winnerName"),t=Object.keys(e).map((function(t){return{winnerName:t,count:e[t].length}}));return t=Object(c.a)(t,"count","desc").map((function(e){return e.winnerName}))},getFilteredList:function(){var e=this;return this.values.filter((function(t){return t.winnerName===e.placeSelected}))},compute_duration:function(e,t){var r=new Date(e).getTime(),n=new Date(t).getTime();return Math.floor(Math.abs(r-n)/1e3)},get_durations:function(){var e=this,table=this.values.filter((function(t){return t.winnerName===e.placeSelected})).map((function(e){return[e.startTimestamp,e.endTimestamp]}));return Object(n.a)(table,(function(e){return e[0]})).map((function(t){return e.compute_duration(t[0],t[1])}))},computeEntropy:function(){for(var e=this.getProbababilities(),t=0,i=0;i<e.length;i++){for(var r=0,n=0;n<e[i].length;n++)r+=e[i][n]*Math.log2(e[i][n]);t+=-r}return(t/e.length).toPrecision(4)},getProbababilities:function(){for(var e=this.getFilteredList(),t=Object(o.a)(e,(function(e){return e.startTimestamp})),r=Object.keys(t),n=[],i=0;i<r.length;i++){for(var c=t[r[i]],l=[c[0].winnerConfidence/100],f=0;f<c.length;f++)l.push(c[f].loserConfidence/100);n.push(l)}return n},convertHMS:function(e){var t=Math.round(e),r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60),o=t-3600*r-60*n;return r<10&&(r="0"+r),n<10&&(n="0"+n),o<10&&(o="0"+o),r+"h"+n+"m"+o+"s"},drawViz:function(){}}},f=r(38),d=r(44),h=r.n(d),m=r(1114),v=r(970),_=r(958),w=r(1015),component=Object(f.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("VContainer",[r("VRow",[""===e.placeName?r("VCol",{attrs:{cols:"12"}},[r("VSelect",{attrs:{items:e.listOfNames,label:"Place"},model:{value:e.placeSelected,callback:function(t){e.placeSelected=t},expression:"placeSelected"}})],1):e._e()],1),e._v(" "),r("VRow",[r("VCol",{attrs:{cols:"12"}},[r("p",{staticClass:"text-subtitle-2"},[e._v("\n        "+e._s(e.$t("google-one-place.total-time-spend"))+" "+e._s(e.placeSelected)+": "+e._s(e.total_time)+". "),r("br"),e._v(" "),r("br"),e._v("\n        "+e._s(e.$t("google-one-place.mean-time-spend"))+" "+e._s(e.placeSelected)+": "+e._s(e.mean_time)+". "),r("br"),e._v(" "),r("br"),e._v("\n        "+e._s(e.$t("google-one-place.entropy"))+" "+e._s(e.placeSelected)+": "+e._s(e.computeEntropy())+". "),r("br"),e._v("\n        "+e._s(e.$t("google-one-place.entropy-info"))+" "+e._s(e.placeSelected)+".\n      ")])])],1),e._v(" "),0!==e.getFilteredList().length?[r("VRow",[r("VCol",{attrs:{cols:"12"}},[r("p",{staticClass:"text-subtitle-2"},[e._v("\n          "+e._s(e.$t("google-one-place.other-candidates"))+" "+e._s(e.placeSelected)+":\n        ")]),e._v(" "),r("UnitIframe",{attrs:{src:"/kepler",args:e.keplerArgs}})],1)],1)]:e._e()],2)}),[],!1,null,null,null);t.default=component.exports;h()(component,{UnitIframe:r(1314).default}),h()(component,{VCol:m.a,VContainer:v.a,VRow:_.a,VSelect:w.a})}}]);