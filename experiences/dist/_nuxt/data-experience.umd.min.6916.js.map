{"version":3,"file":"data-experience.umd.min.6916.js","mappings":"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","sources":["webpack://data-experience/./src/components/chart/view/ChartViewGenericMap.vue?e159","webpack://data-experience/src/components/chart/view/ChartViewGenericMap.vue","webpack://data-experience/./src/components/chart/view/ChartViewGenericMap.vue?64c3","webpack://data-experience/./src/components/chart/view/ChartViewGenericMap.vue","webpack://data-experience/./src/components/chart/view/mixin.js","webpack://data-experience/./src/utils/kAnonymity.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.values.length > 0)?_c('VContainer',[_c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\"}},[(_vm.total === 0)?_c('p',{staticClass:\"text-subtitle-2\"},[_vm._v(\" \"+_vm._s(_vm.$t('no-records'))+\" \")]):(_vm.label_ !== '')?_c('p',{staticClass:\"text-subtitle-2\"},[_vm._v(\" \"+_vm._s(_vm.$t('found'))+\" \"),_c('strong',[_vm._v(_vm._s(_vm.total))]),_vm._v(\" \"+_vm._s(_vm.label_)+\" \"+_vm._s(_vm.$t('in-files'))+\". \")]):_vm._e()])],1),(_vm.total > 0)?[_c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\"}},[_c('UnitKepler',{attrs:{\"args\":_vm.keplerArgs}})],1)],1),(_vm.showButton == true)?[_c('VMenu',{attrs:{\"close-on-content-click\":false,\"nudge-width\":200,\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('VBtn',_vm._g(_vm._b({staticClass:\"ma-2\",attrs:{\"color\":\"primary\",\"outlined\":\"\"}},'VBtn',attrs,false),on),[_vm._v(\" \"+_vm._s(_vm.$t(_vm.k('add-noise')))+\" \")])]}}],null,false,13010733),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[_c('VCard',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"600\"}},[_c('VCardTitle',[_vm._v(_vm._s(_vm.$t(_vm.k('noise-level'))))]),_c('VCardText',[_c('VRow',{staticClass:\"mb-4\",attrs:{\"justify\":\"space-between\"}},[_c('VCol',{staticClass:\"text-left\"},[_c('span',{staticClass:\"text-h2 font-weight-light\",domProps:{\"textContent\":_vm._s(_vm.sliderValue)}}),_c('span',{staticClass:\"subheading font-weight-light mr-1\"},[_vm._v(_vm._s(_vm.$t(_vm.k('meters'))))])])],1),_c('VSlider',{attrs:{\"max\":100,\"min\":0,\"step\":'1',\"track-color\":\"grey\",\"always-dirty\":\"\"},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('VIcon',{on:{\"click\":_vm.decrement}},[_vm._v(\" $vuetify.icons.mdiMinus \")])]},proxy:true},{key:\"append\",fn:function(){return [_c('VIcon',{on:{\"click\":_vm.increment}},[_vm._v(\" $vuetify.icons.mdiPlus \")])]},proxy:true}],null,false,214408879),model:{value:(_vm.sliderValue),callback:function ($$v) {_vm.sliderValue=$$v},expression:\"sliderValue\"}})],1),_c('VCardActions',[_c('VSpacer'),_c('VBtn',{on:{\"click\":_vm.clear}},[_vm._v(\" \"+_vm._s(_vm.$t('Clear'))+\" \")]),_c('VBtn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.addNoise}},[_vm._v(\" \"+_vm._s(_vm.$t('Save'))+\" \")])],1)],1)],1)]:_vm._e(),_c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\"}},[_c('UnitFilterableTable',_vm._b({on:{\"current-items\":_vm.onTableFilter}},'UnitFilterableTable',{ headers: _vm.headers, items: _vm.results },false))],1)],1)]:_vm._e()],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <VContainer v-if=\"values.length > 0\">\r\n    <VRow>\r\n      <VCol cols=\"12\">\r\n        <p v-if=\"total === 0\" class=\"text-subtitle-2\">\r\n          {{ $t('no-records') }}\r\n        </p>\r\n        <p v-else-if=\"label_ !== ''\" class=\"text-subtitle-2\">\r\n          {{ $t('found') }} <strong>{{ total }}</strong> {{ label_ }} {{ $t('in-files') }}.\r\n        </p>\r\n      </VCol>\r\n    </VRow>\r\n    <template v-if=\"total > 0\">\r\n      <VRow>\r\n        <VCol cols=\"12\">\r\n          <UnitKepler :args=\"keplerArgs\" />\r\n        </VCol>\r\n      </VRow>\r\n      <template v-if=\"showButton == true\">\r\n        <VMenu\r\n          v-model=\"menu\"\r\n          :close-on-content-click=\"false\"\r\n          :nudge-width=\"200\"\r\n          offset-y\r\n        >\r\n          <template #activator=\"{ on, attrs }\">\r\n            <VBtn\r\n              color=\"primary\"\r\n              class=\"ma-2\"\r\n              outlined\r\n              v-bind=\"attrs\"\r\n              v-on=\"on\"\r\n            >\r\n              {{ $t(k('add-noise')) }}\r\n            </VBtn>\r\n          </template>\r\n          <VCard class=\"mx-auto\" max-width=\"600\">\r\n            <VCardTitle>{{ $t(k('noise-level')) }}</VCardTitle>\r\n            <VCardText>\r\n              <VRow class=\"mb-4\" justify=\"space-between\">\r\n                <VCol class=\"text-left\">\r\n                  <span\r\n                    class=\"text-h2 font-weight-light\"\r\n                    v-text=\"sliderValue\"\r\n                  />\r\n                  <span class=\"subheading font-weight-light mr-1\">{{ $t(k('meters')) }}</span>\r\n                </VCol>\r\n              </VRow>\r\n\r\n              <VSlider\r\n                v-model=\"sliderValue\"\r\n                :max=\"100\"\r\n                :min=\"0\"\r\n                :step=\"'1'\"\r\n                track-color=\"grey\"\r\n                always-dirty\r\n              >\r\n                <template #prepend>\r\n                  <VIcon @click=\"decrement\">\r\n                    $vuetify.icons.mdiMinus\r\n                  </VIcon>\r\n                </template>\r\n\r\n                <template #append>\r\n                  <VIcon @click=\"increment\">\r\n                    $vuetify.icons.mdiPlus\r\n                  </VIcon>\r\n                </template>\r\n              </VSlider>\r\n            </VCardText>\r\n            <VCardActions>\r\n              <VSpacer />\r\n\r\n              <VBtn @click=\"clear\">\r\n                {{ $t('Clear') }}\r\n              </VBtn>\r\n              <VBtn color=\"primary\" @click=\"addNoise\">\r\n                {{ $t('Save') }}\r\n              </VBtn>\r\n            </VCardActions>\r\n          </VCard>\r\n        </VMenu>\r\n      </template>\r\n      <VRow>\r\n        <VCol cols=\"12\">\r\n          <UnitFilterableTable\r\n            v-bind=\"{ headers, items: results }\"\r\n            @current-items=\"onTableFilter\"\r\n          />\r\n        </VCol>\r\n      </VRow>\r\n    </template>\r\n  </VContainer>\r\n</template>\r\n\r\n<script>\r\nimport mixin from './mixin'\r\nimport { kAnonymityFilter } from '@/utils/kAnonymity'\r\nimport UnitKepler from '@/components/unit/UnitKepler.vue'\r\nimport UnitFilterableTable from '@/components/unit/filterable-table/UnitFilterableTable.vue'\r\n\r\nexport default {\r\n  components: { UnitKepler, UnitFilterableTable },\r\n  mixins: [mixin],\r\n  props: {\r\n    keplerConfig: {\r\n      type: Object,\r\n      default: () => null\r\n    },\r\n    showButton: {\r\n      type: Boolean,\r\n      default: () => false\r\n    },\r\n    doKAnonymity: {\r\n      type: Boolean,\r\n      default: () => false\r\n    },\r\n    groupKey: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    otherKeys: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    label: {\r\n      type: String,\r\n      default: () => ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      menu: false,\r\n      sliderValue: 0,\r\n      filteredRows: [],\r\n      results: this.doKAnonymity\r\n        ? kAnonymityFilter(this.values, this.groupKey, this.otherKeys)\r\n        : this.values,\r\n      label_: this.label\r\n    }\r\n  },\r\n  computed: {\r\n    total() {\r\n      return this.results.length\r\n    },\r\n    filtered() {\r\n      return this.filteredRows.length\r\n    },\r\n    keplerData() {\r\n      return {\r\n        fields: this.headers.map((h) => {\r\n          return {\r\n            name: h\r\n          }\r\n        }),\r\n        rows: this.filteredRows.map(r => this.headers.map(h => r[h]))\r\n      }\r\n    },\r\n    keplerArgs() {\r\n      return {\r\n        keplerData: this.keplerData,\r\n        config: this.keplerConfig\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    k(key) {\r\n      return `chart-view.generic-map.${key}`\r\n    },\r\n    increment() {\r\n      this.sliderValue += 1\r\n    },\r\n    decrement() {\r\n      this.sliderValue -= 1\r\n    },\r\n    addNoise() {\r\n      this.menu = false\r\n      const level = this.sliderValue\r\n      this.results = this.results.map((x) => {\r\n        return {\r\n          ...x,\r\n          longitude: x.longitude +\r\n                        ((0.5 - Math.random()) /\r\n                            ((40075 * 10 ** 3 * Math.cos(Math.radians(x.latitude))) / 360)) *\r\n                            2 *\r\n                            level,\r\n          latitude: x.latitude +\r\n                        ((0.5 - Math.random()) / (111.32 * 10 ** 3)) * 2 * level\r\n        }\r\n      })\r\n    },\r\n    clear() {\r\n      this.menu = false\r\n      this.results = this.values\r\n      this.sliderValue = 0\r\n    },\r\n    onTableFilter(newItems) {\r\n      this.filteredRows = newItems\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewGenericMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewGenericMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartViewGenericMap.vue?vue&type=template&id=5ce45d5d&\"\nimport script from \"./ChartViewGenericMap.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewGenericMap.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { TextFilterWidget } from 'dc'\r\nimport { merge } from 'lodash-es'\r\n\r\nimport kViewBlockMixin from '@/mixins/k-view-block'\r\n\r\nconst mixin = {\r\n  props: {\r\n    values: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    headers: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    messages: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      graphId: 'graph_' + this.$store.state.xp.currentTab,\r\n      totalCount: 0,\r\n      filterCount: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    this.drawViz()\r\n  },\r\n  watch: {\r\n    values() {\r\n      this.drawViz()\r\n    }\r\n  },\r\n  methods: {\r\n    drawViz() { },\r\n    createTextFilterWidget(parent, placeholder = 'Search') {\r\n      const widget = new TextFilterWidget(parent)\r\n      widget.placeHolder(this.$tev(placeholder, placeholder))\r\n      return widget\r\n    }\r\n  }\r\n}\r\n\r\nexport default merge(mixin, kViewBlockMixin)\r\n","import { groupBy } from 'lodash-es'\r\n\r\nfunction findK(arr) {\r\n  let kMin = 0\r\n  for (let j = 1; j <= Math.max.apply(Math, arr); j++) {\r\n    const l = arr.filter(x => x <= j)\r\n    if (l.length >= j) {\r\n      kMin = j\r\n      break\r\n    }\r\n  }\r\n  return kMin\r\n}\r\n\r\nfunction avg(arr) {\r\n  const sum = arr.reduce((a, b) => a + b, 0)\r\n  return sum / arr.length || 0\r\n}\r\n\r\nfunction filterOut(arr, k) {\r\n  return arr.filter(x => x.k <= k)\r\n}\r\n\r\nexport function kAnonymityFilter(values, groupKeys, otherKeys) {\r\n  const table = []\r\n  const grouped = groupBy(values, n => groupKeys.map(x => n[x]))\r\n  const keys = Object.keys(grouped)\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const x = keys[i]\r\n    const elem = {}\r\n    const splitted = x.split(',')\r\n    for (let j = 0; j < groupKeys.length; j++) {\r\n      elem[groupKeys[j]] = splitted[j]\r\n    }\r\n    const kMin = findK(grouped[x].map(v => v.k))\r\n    const rest = filterOut(grouped[x], kMin)\r\n    for (let j = 0; j < otherKeys.length; j++) {\r\n      elem[otherKeys[j]] = avg(rest.map(x => x[otherKeys[j]]))\r\n    }\r\n    elem.k = kMin\r\n    table.push(elem)\r\n  }\r\n  const res = table.filter(x => x.k > 0)\r\n  return res\r\n}\r\n"],"names":["render","_vm","this","_c","_self","values","length","attrs","total","staticClass","_v","_s","$t","label_","_e","keplerArgs","showButton","scopedSlots","_u","key","fn","on","_g","_b","k","model","value","callback","$$v","menu","expression","domProps","sliderValue","decrement","proxy","increment","clear","addNoise","onTableFilter","headers","items","results","staticRenderFns","components","UnitKepler","mixins","mixin","props","keplerConfig","type","Object","default","Boolean","doKAnonymity","groupKey","Array","otherKeys","label","String","data","filteredRows","kAnonymity","computed","filtered","keplerData","fields","map","h","name","rows","r","config","methods","level","x","longitude","Math","random","cos","radians","latitude","newItems","component","messages","graphId","$store","state","xp","currentTab","totalCount","filterCount","mounted","drawViz","watch","createTextFilterWidget","parent","placeholder","widget","TextFilterWidget","placeHolder","$tev","findK","arr","kMin","j","max","apply","l","filter","avg","sum","reduce","a","b","filterOut","kAnonymityFilter","groupKeys","table","grouped","n","keys","i","elem","splitted","split","v","rest","push","res"],"sourceRoot":""}