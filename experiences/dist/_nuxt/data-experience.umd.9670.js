"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[9670,1633],{89670:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var l=n(46228),r=n(89295),d={name:"DateFilter",components:{TimeFilter:n(11633).default},props:{values:{type:Array,default:()=>[]},isDatetime:{type:Boolean,default:!1}},data(){return{dateFormatter:r.vh,days:this.$days(),daysAuthorized:this.$days(),sliderRange:[],timeFilterFunction:null}},computed:{parser(){return this.isDatetime?r.rk:r.RX},dates(){return this.values.map((e=>this.parser(e))).filter((e=>null!==e))},dateExtent(){return l.Wem(this.dates)},numberOfDays(){return l.rr1.count(...this.dateExtent)},timeScale(){return l.Xf().domain(this.dateExtent).range([0,this.numberOfDays])},dateRange(){return[this.getDate(this.sliderRange[0]),this.getDate(this.sliderRange[1])]},allDays(){return this.daysAuthorized.length===this.days.length},filterFunction(){return!this.timeFilterFunction&&this.allDays&&JSON.stringify(this.sliderRange)===JSON.stringify([0,this.numberOfDays])?null:e=>{const t=this.parser(e);return(!e||t>=this.dateRange[0]&&t<=this.dateRange[1]&&this.daysAuthorized.includes(this.days[t.getDay()]))&&(!this.timeFilterFunction||this.timeFilterFunction(e))}}},mounted(){this.sliderRange=[0,this.numberOfDays]},methods:{selectAll(){this.$nextTick((()=>{this.allDays?this.daysAuthorized=[]:this.daysAuthorized=this.days.slice(),this.filterChange()}))},getDate(i){return this.timeScale.invert(i)},timeFilterChange(filter){this.timeFilterFunction=filter,this.filterChange()},filterChange(){this.$emit("filter-change",this.filterFunction)},reset(){this.daysAuthorized=this.days.slice(),this.sliderRange=[0,this.numberOfDays],this.isDatetime&&this.$refs.timeFilter.reset(),this.filterChange()}}},o=(0,n(1001).Z)(d,(function(){var e=this,t=e._self._c;return t("div",[e.dates.length?t("div",[t("VRow",[t("VCol",[t("div",{staticClass:"d-flex justify-space-between"},e._l(["From","To"],(function(label,n){return t("div",{key:n},[t("div",{staticClass:"subtitle-2"},[e._v(" "+e._s(e.$t(label))+": ")]),t("VChip",{attrs:{label:"",outlined:""}},[e._v(" "+e._s(e.dateFormatter(e.dateRange[n]))+" ")])],1)})),0),t("VRangeSlider",{attrs:{min:0,max:e.numberOfDays,"track-color":"primary","thumb-color":"#2c3e50","tick-size":"0","hide-details":"",dense:"",step:"1"},on:{change:e.filterChange},model:{value:e.sliderRange,callback:function(t){e.sliderRange=t},expression:"sliderRange"}})],1)],1),e.isDatetime?t("TimeFilter",e._b({ref:"timeFilter",on:{"filter-change":e.timeFilterChange}},"TimeFilter",{isDatetime:e.isDatetime},!1)):e._e(),t("div",{staticClass:"d-flex justify-space-between align-center text-subtitle-1 mt-3 mb-3"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"Day of week",expression:"'Day of week'"}]}),t("VBtn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo","x-small":""},on:{mousedown:function(e){e.preventDefault()},click:e.selectAll}},[e._v(" "+e._s(e.$t(e.allDays?"Unselect All":"Select All"))+" ")])],1),t("VRow",e._l(e.days,(function(n){return t("VCol",{key:n,staticClass:"pt-0 pb-0",attrs:{cols:"12",md:"6"}},[t("VCheckbox",{attrs:{label:n,color:"primary",value:n,"hide-details":"",dense:""},on:{change:e.filterChange},model:{value:e.daysAuthorized,callback:function(t){e.daysAuthorized=t},expression:"daysAuthorized"}})],1)})),1)],1):t("div",{attrs:{align:"center"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"No valid dates found",expression:"'No valid dates found'"}],staticClass:"caption"})])])}),[],!1,null,null,null).exports},11633:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var l=n(89295);const r="00:00",d="23:59";var o={name:"TimeFilter",props:{isDatetime:{type:Boolean,default:!1}},data:()=>({allDay:!0,startTime:r,endTime:d}),computed:{parser(){return this.isDatetime?l.rk:l.bj},filterFunction(){return this.allDay?null:e=>{const t=this.parser(e);if(!e||!t)return!0;const n=this.toMilliseconds(`${t.getHours()}:${t.getMinutes()}`),l=this.toMilliseconds(this.startTime),r=this.toMilliseconds(this.endTime);return n>=l&&n<=r}}},methods:{toMilliseconds(time){const[e,t]=time.split(":").map((e=>parseInt(e)));return 3600*e*1e3+60*t*1e3},filterChange(){this.allDay=this.startTime===r&&this.endTime===d,this.$emit("filter-change",this.filterFunction)},reset(){this.startTime=r,this.endTime=d,this.filterChange()}}},h=(0,n(1001).Z)(o,(function(){var e=this,t=e._self._c;return t("VRow",[t("VCol",[t("div",{staticClass:"d-flex justify-space-between align-center text-subtitle-1 mt-3 mb-3"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"Time",expression:"'Time'"}]}),t("VCheckbox",{attrs:{label:e.$t("All Day"),color:"primary","hide-details":"",disabled:e.allDay,dense:""},on:{click:e.reset},model:{value:e.allDay,callback:function(t){e.allDay=t},expression:"allDay"}})],1),t("div",{staticClass:"d-flex justify-space-between"},[t("VTextField",{staticClass:"mr-3",attrs:{label:e.$t("Min value"),type:"time"},on:{change:function(t){return e.filterChange()}},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),t("VTextField",{staticClass:"ml-3",attrs:{label:e.$t("Max value"),min:e.startTime,type:"time"},on:{change:function(t){return e.filterChange()}},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)])],1)}),[],!1,null,null,null).exports}}]);