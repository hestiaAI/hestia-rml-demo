"use strict";(("undefined"!=typeof self?self:this).webpackChunkDataExperience=("undefined"!=typeof self?self:this).webpackChunkDataExperience||[]).push([[1938,8795],{41938:function(t,e,n){n.r(e),n.d(e,{default:function(){return Z}});var i=n(60194),s=n(60171);function a(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let o=-1;for(let r of t)(r=+e(r,++o,t))&&(n+=r)}return n}function u(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let r of t)null!=(r=e(r,++o,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function o(t,e){return t.sourceLinks.length?t.depth:e-1}function r(t){return function(){return t}}function c(t,e){return p(t.source,e.source)||t.index-e.index}function l(t,e){return p(t.target,e.target)||t.index-e.index}function p(t,e){return t.y0-e.y0}function f(t){return t.value}function g(t){return t.index}function h(t){return t.nodes}function d(t){return t.links}function y(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function v({nodes:t}){for(const e of t){let t=e.y0,n=t;for(const n of e.sourceLinks)n.y0=t+n.width/2,t+=n.width;for(const t of e.targetLinks)t.y1=n+t.width/2,n+=t.width}}function x(){let t,e,n,x=0,k=0,i=1,s=1,_=24,m=8,b=g,w=o,L=h,M=d,B=6;function C(){const t={nodes:L.apply(null,arguments),links:M.apply(null,arguments)};return V(t),S(t),N(t),T(t),A(t),v(t),t}function V({nodes:t,links:e}){for(const[e,n]of t.entries())n.index=e,n.sourceLinks=[],n.targetLinks=[];const o=new Map(t.map(((e,n)=>[b(e,n,t),e])));for(const[t,n]of e.entries()){n.index=t;let{source:e,target:r}=n;"object"!=typeof e&&(e=n.source=y(o,e)),"object"!=typeof r&&(r=n.target=y(o,r)),e.sourceLinks.push(n),r.targetLinks.push(n)}if(null!=n)for(const{sourceLinks:e,targetLinks:i}of t)e.sort(n),i.sort(n)}function S({nodes:t}){for(const e of t)e.value=void 0===e.fixedValue?Math.max(a(e.sourceLinks,f),a(e.targetLinks,f)):e.fixedValue}function N({nodes:t}){const e=t.length;let n=new Set(t),o=new Set,r=0;for(;n.size;){for(const t of n){t.depth=r;for(const{target:e}of t.sourceLinks)o.add(e)}if(++r>e)throw new Error("circular link");n=o,o=new Set}}function T({nodes:t}){const e=t.length;let n=new Set(t),o=new Set,r=0;for(;n.size;){for(const t of n){t.height=r;for(const{source:e}of t.targetLinks)o.add(e)}if(++r>e)throw new Error("circular link");n=o,o=new Set}}function E({nodes:t}){const n=u(t,(t=>t.depth))+1,o=(i-x-_)/(n-1),s=new Array(n);for(const e of t){const t=Math.max(0,Math.min(n-1,Math.floor(w.call(null,e,n))));e.layer=t,e.x0=x+t*o,e.x1=e.x0+_,s[t]?s[t].push(e):s[t]=[e]}if(e)for(const t of s)t.sort(e);return s}function A(e){const n=E(e);t=Math.min(m,(s-k)/(u(n,(t=>t.length))-1)),function(e){const n=function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let o=-1;for(let r of t)null!=(r=e(r,++o,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}(e,(e=>(s-k-(e.length-1)*t)/a(e,f)));for(const o of e){let e=k;for(const r of o){r.y0=e,r.y1=e+r.value*n,e=r.y1+t;for(const t of r.sourceLinks)t.width=t.value*n}e=(s-e+t)/(o.length+1);for(let t=0;t<o.length;++t){const n=o[t];n.y0+=e*(t+1),n.y1+=e*(t+1)}R(o)}}(n);for(let t=0;t<B;++t){const e=Math.pow(.99,t),o=Math.max(1-e,(t+1)/B);z(n,e,o),I(n,e,o)}}function I(t,n,o){for(let r=1,i=t.length;r<i;++r){const i=t[r];for(const t of i){let e=0,o=0;for(const{source:n,value:i}of t.targetLinks){let r=i*(t.layer-n.layer);e+=W(n,t)*r,o+=r}if(!(o>0))continue;let r=(e/o-t.y0)*n;t.y0+=r,t.y1+=r,Z(t)}void 0===e&&i.sort(p),P(i,o)}}function z(t,n,o){for(let i=t.length-2;i>=0;--i){const r=t[i];for(const t of r){let e=0,o=0;for(const{target:n,value:i}of t.sourceLinks){let r=i*(n.layer-t.layer);e+=q(t,n)*r,o+=r}if(!(o>0))continue;let r=(e/o-t.y0)*n;t.y0+=r,t.y1+=r,Z(t)}void 0===e&&r.sort(p),P(r,o)}}function P(e,n){const o=e.length>>1,i=e[o];D(e,i.y0-t,o-1,n),$(e,i.y1+t,o+1,n),D(e,s,e.length-1,n),$(e,k,0,n)}function $(e,n,o,r){for(;o<e.length;++o){const i=e[o],s=(n-i.y0)*r;s>1e-6&&(i.y0+=s,i.y1+=s),n=i.y1+t}}function D(e,n,o,r){for(;o>=0;--o){const i=e[o],s=(i.y1-n)*r;s>1e-6&&(i.y0-=s,i.y1-=s),n=i.y0-t}}function Z({sourceLinks:t,targetLinks:e}){if(void 0===n){for(const{source:{sourceLinks:t}}of e)t.sort(l);for(const{target:{targetLinks:e}}of t)e.sort(c)}}function R(t){if(void 0===n)for(const{sourceLinks:e,targetLinks:n}of t)e.sort(l),n.sort(c)}function W(e,n){let o=e.y0-(e.sourceLinks.length-1)*t/2;for(const{target:r,width:i}of e.sourceLinks){if(r===n)break;o+=i+t}for(const{source:t,width:r}of n.targetLinks){if(t===e)break;o-=r}return o}function q(e,n){let o=n.y0-(n.targetLinks.length-1)*t/2;for(const{source:r,width:i}of n.targetLinks){if(r===e)break;o+=i+t}for(const{target:t,width:r}of e.sourceLinks){if(t===n)break;o-=r}return o}return C.update=function(t){return v(t),t},C.nodeId=function(t){return arguments.length?(b="function"==typeof t?t:r(t),C):b},C.nodeAlign=function(t){return arguments.length?(w="function"==typeof t?t:r(t),C):w},C.nodeSort=function(t){return arguments.length?(e=t,C):e},C.nodeWidth=function(t){return arguments.length?(_=+t,C):_},C.nodePadding=function(e){return arguments.length?(m=t=+e,C):m},C.nodes=function(t){return arguments.length?(L="function"==typeof t?t:r(t),C):L},C.links=function(t){return arguments.length?(M="function"==typeof t?t:r(t),C):M},C.linkSort=function(t){return arguments.length?(n=t,C):n},C.size=function(t){return arguments.length?(x=k=0,i=+t[0],s=+t[1],C):[i-x,s-k]},C.extent=function(t){return arguments.length?(x=+t[0][0],i=+t[1][0],k=+t[0][1],s=+t[1][1],C):[[x,k],[i,s]]},C.iterations=function(t){return arguments.length?(B=+t,C):B},C}var k=Math.PI,b=2*k,_=1e-6,m=b-_;function w(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function L(){return new w}w.prototype=L.prototype={constructor:w,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,o){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+o)},bezierCurveTo:function(t,e,n,o,r,i){this._+="C"+ +t+","+ +e+","+ +n+","+ +o+","+(this._x1=+r)+","+(this._y1=+i)},arcTo:function(t,e,n,o,r){t=+t,e=+e,n=+n,o=+o,r=+r;var i=this._x1,s=this._y1,a=n-t,u=o-e,c=i-t,l=s-e,f=c*c+l*l;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>_)if(Math.abs(l*a-u*c)>_&&r){var h=n-i,d=o-s,p=a*a+u*u,y=h*h+d*d,g=Math.sqrt(p),v=Math.sqrt(f),x=r*Math.tan((k-Math.acos((p+f-y)/(2*g*v)))/2),m=x/v,w=x/g;Math.abs(m-1)>_&&(this._+="L"+(t+m*c)+","+(e+m*l)),this._+="A"+r+","+r+",0,0,"+ +(l*h>c*d)+","+(this._x1=t+w*a)+","+(this._y1=e+w*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,o,r,i){t=+t,e=+e,i=!!i;var s=(n=+n)*Math.cos(o),a=n*Math.sin(o),u=t+s,c=e+a,l=1^i,f=i?o-r:r-o;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>_||Math.abs(this._y1-c)>_)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%b+b),f>m?this._+="A"+n+","+n+",0,1,"+l+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):f>_&&(this._+="A"+n+","+n+",0,"+ +(f>=k)+","+l+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,o){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +o+"h"+-n+"Z"},toString:function(){return this._}};var M=L,B=Array.prototype.slice;function C(t){return function(){return t}}function V(t){return t[0]}function S(t){return t[1]}function N(t){return t.source}function T(t){return t.target}function E(t,e,n,o,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+o)/2,n,e,r,o,r)}function A(){return function(t){var e=N,n=T,o=V,r=S,i=null;function s(){var s,a=B.call(arguments),u=e.apply(this,a),c=n.apply(this,a);if(i||(i=s=M()),t(i,+o.apply(this,(a[0]=u,a)),+r.apply(this,a),+o.apply(this,(a[0]=c,a)),+r.apply(this,a)),s)return i=null,s+""||null}return s.source=function(t){return arguments.length?(e=t,s):e},s.target=function(t){return arguments.length?(n=t,s):n},s.x=function(t){return arguments.length?(o="function"==typeof t?t:C(+t),s):o},s.y=function(t){return arguments.length?(r="function"==typeof t?t:C(+t),s):r},s.context=function(t){return arguments.length?(i=null==t?null:t,s):i},s}(E)}function I(t){return[t.source.x1,t.y0]}function z(t){return[t.target.x0,t.y1]}var P=n(74097),$={name:"ChartViewSankey",components:{ChartViewVRowWebShare:n(38795).default},mixins:[P.default],props:{topN:{type:Number,default:10},displayLinksLabels:{type:Boolean,default:!0},nodeWidth:{type:Number,default:40},nodePadding:{type:Number,default:40}},data:()=>({total:0}),methods:{k:t=>`chart-view.sankey.${t}`,toJSONGraph(t){const e=i.flatRollup(t,(t=>t.length),(t=>t.source),(t=>t.target)).map((t=>({source:t[0],target:t[1],value:t[2]}))).filter((t=>""!==t.source&&""!==t.target&&t.value&&t.source!==t.target)).sort(((t,e)=>i.descending(+t.value,+e.value))).slice(0,this.topN),n={nodes:[],links:[]};return e.forEach((function(t){t.sourceName=t.source,t.targetName=t.target,t.source=t.source+"s",t.target=t.target+"t",n.nodes.push({id:t.source}),n.nodes.push({id:t.target}),n.links.push({source:t.source,target:t.target,sourceName:t.sourceName,targetName:t.targetName,value:t.value})})),n.nodes=(0,s.XP)((0,s.b1)().key((t=>t.id)).object(n.nodes)),n.links.forEach((function(t,e){n.links[e].source=n.nodes.indexOf(n.links[e].source),n.links[e].target=n.nodes.indexOf(n.links[e].target)})),n.nodes.forEach((function(t,e){n.nodes[e]={name:t}})),n},drawViz(){this.total=this.values.length;const t=this.toJSONGraph(this.values),e=50,n=250,o=10,r=250,c=i.select("#"+this.graphId).node().getBoundingClientRect().width-r-n,l=50*this.topN-e-o,f=i.scaleOrdinal().domain(t.nodes.map((t=>t.name.slice(0,-1)))).range(this.colorPalette),s=i.select("#"+this.graphId).append("div").style("opacity",1).html(`(${this.$t(this.k("hoverMessage"))})`).style("left",c/2+r+"px").style("top","0px"),a=i.select("#"+this.graphId).append("svg").attr("width",c+r+n).attr("height",l+e+o).append("g").attr("transform","translate("+r+","+e+")"),u=i.select("#"+this.graphId).append("div").style("opacity",0).attr("class","tooltip");a.append("text").attr("class","label").attr("x",0).attr("y",-e/2).text(this.$t(this.kViewBlock("sourceText"))),a.append("text").attr("class","label").attr("x",c).attr("y",-e/2).attr("text-anchor","end").text(this.$t(this.kViewBlock("targetText")));const h=x().nodeWidth(this.nodeWidth).nodePadding(this.nodePadding).size([c,l]);h.links();const d=h(t),y=a.append("g").selectAll("#"+this.graphId+".link").data(d.links).enter().append("path").attr("class","link");y.attr("d",A().source(I).target(z)).attr("stroke-width",(t=>t.width)).attr("opacity",.2).on("mouseover",((t,e)=>{const n=this.$t(this.kViewBlock("linkMouseoverHTML"),e);s.html(n).style("opacity",1),y.filter((t=>t===e)).attr("opacity",.5)})).on("mouseleave",(t=>{y.attr("opacity",.2),s.style("opacity",0)}));const v=a.append("g").selectAll("#"+this.graphId+".node").data(d.nodes).enter().append("g").attr("class","node");v.append("rect").attr("x",(t=>t.x0)).attr("y",(t=>t.y0)).attr("height",(t=>t.y1-t.y0)).attr("width",h.nodeWidth()).style("fill",(t=>t.color=f(t.name.slice(0,-1)))).style("stroke",(function(t){return i.rgb(t.color).darker(1)})),v.on("mouseover",((t,e)=>{const n=this.$t(this.kViewBlock("nodeMouseoverHTML"),{name:e.name.slice(0,-1),value:e.value,fromTo:this.$t(this.kViewBlock("s"===e.name.slice(-1)?"from":"to"))}),o=s.node().getBoundingClientRect().height;u.html(n).style("left",e.x1+r+8+"px").style("top",e.y0+o+35+"px"),u.style("opacity",1),v.filter((t=>t===e)).attr("opacity",.7),y.attr("opacity",.2),y.filter((t=>e.index===t.source.index||e.index===t.target.index)).attr("opacity",.5)})).on("mouseleave",((t,e)=>{y.attr("opacity",.2),v.attr("opacity",1),u.style("opacity",0)})),this.displayLinksLabels&&v.append("text").attr("x",(t=>t.x1+6)).attr("y",(t=>(t.y1+t.y0)/2)).attr("dy","0.35em").attr("text-anchor","start").text((t=>{let e=t.name.split(",")[0];return e.length>20&&(e=e.slice(0,20)+".."),e})).filter((t=>t.x0<c/2)).attr("x",(t=>t.x0-6)).attr("text-anchor","end")}}},q=$,D=(0,n(1001).Z)(q,(function(){var t=this,e=t._self._c;return e("VContainer",[e("ChartViewVRowWebShare",[e("VCol",{staticClass:"text-center",attrs:{cols:"12",md:"12"}},[e("i18n",{attrs:{path:t.kViewBlock("labelTotal"),tag:"p"},scopedSlots:t._u([{key:"total",fn:function(){return[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.total)}})]},proxy:!0}])}),e("div",{staticStyle:{position:"relative"},attrs:{id:t.graphId}})],1)],1)],1)}),[],!1,null,"418b736e",null),Z=D.exports},38795:function(t,e,n){n.r(e),n.d(e,{default:function(){return c}});var i=n(14226),s=n(87261),a=n(97888),u=n(9934),o={components:{BaseButton:s.Z,BaseButtonDownloadData:a.Z,BaseButtonShare:u.Z},mixins:[(0,i.Z)()]},r=(0,n(1001).Z)(o,(function(){var t=this,e=t._self._c;return e("VRow",t._b({ref:"domToImageNode"},"VRow",t.$attrs,!1),[t._t("default"),e("VCol",{staticClass:"dom-to-image-exclude webshare d-flex",attrs:{cols:"12"}},[e("div",{staticClass:"webshare__export-button"},[e("BaseButton",t._b({attrs:{icon:"mdiExport",text:"Export"},on:{click:t.exportImage}},"BaseButton",{progress:t.progress,status:t.status,error:t.error},!1))],1),e("div",{staticClass:"webshare__download-button"},[e("BaseButtonDownloadData",t._b({},"BaseButtonDownloadData",{disabled:!t.blob,extension:t.extension,filename:t.filename,data:t.blob},!1))],1),e("div",{staticClass:"webshare__share-button"},[e("BaseButtonShare",t._b({attrs:{"file-share":""}},"BaseButtonShare",{files:t.files,disabled:!t.files},!1))],1)])],2)}),[],!1,null,null,null),c=r.exports},60171:function(t,e,n){n.d(e,{XP:function(){return y},b1:function(){return a}});var o="$";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var o,i=-1,s=t.length;if(null==e)for(;++i<s;)n.set(i,t[i]);else for(;++i<s;)n.set(e(o=t[i],i,t),o)}else if(t)for(var a in t)n.set(a,t[a]);return n}r.prototype=i.prototype={constructor:r,has:function(t){return o+t in this},get:function(t){return this[o+t]},set:function(t,e){return this[o+t]=e,this},remove:function(t){var e=o+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===o&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===o&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===o&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===o&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===o&&++t;return t},empty:function(){for(var t in this)if(t[0]===o)return!1;return!0},each:function(t){for(var e in this)e[0]===o&&t(this[e],e.slice(1),this)}};var s=i;function a(){var t,e,n,o=[],r=[];function i(n,r,a,u){if(r>=o.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var c,l,f,h=-1,d=n.length,p=o[r++],y=s(),g=a();++h<d;)(f=y.get(c=p(l=n[h])+""))?f.push(l):y.set(c,[l]);return y.each((function(t,e){u(g,e,i(t,r,a,u))})),g}function a(t,n){if(++n>o.length)return t;var i,s=r[n-1];return null!=e&&n>=o.length?i=t.entries():(i=[],t.each((function(t,e){i.push({key:e,values:a(t,n)})}))),null!=s?i.sort((function(t,e){return s(t.key,e.key)})):i}return n={object:function(t){return i(t,0,u,c)},map:function(t){return i(t,0,l,f)},entries:function(t){return a(i(t,0,l,f),0)},key:function(t){return o.push(t),n},sortKeys:function(t){return r[o.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}}function u(){return{}}function c(t,e,n){t[e]=n}function l(){return s()}function f(t,e,n){t.set(e,n)}function h(){}var d=s.prototype;function y(t){var e=[];for(var n in t)e.push(n);return e}h.prototype=function(t,e){var n=new h;if(t instanceof h)t.each((function(t){n.add(t)}));else if(t){var o=-1,r=t.length;if(null==e)for(;++o<r;)n.add(t[o]);else for(;++o<r;)n.add(e(t[o],o,t))}return n}.prototype={constructor:h,has:d.has,add:function(t){return this[o+(t+="")]=t,this},remove:d.remove,clear:d.clear,values:d.keys,size:d.size,empty:d.empty,each:d.each}}}]);