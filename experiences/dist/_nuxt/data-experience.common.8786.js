"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[8786,8736,6622,1297,9814],{68786:function(t,e,r){r.r(e),r.d(e,{default:function(){return w}});var o=r(46228),n=r(40290),main=r(26641),l=r(21297),d=r(18736),c=r(49814),h=r(96622),f=r(98931);n.config.defaultColors(o.xHP);var m={components:{ChartViewVRowWebShare:d.default,ChartViewTextSelectTimeRange:c.default,ChartViewFilters:h.default,UnitFilterableTable:f.Z},mixins:[l.default],data:()=>({header:[{text:"Date",value:"startTime"},{text:"Duration",value:"duration"},{text:"Content",value:"title"},{text:"User",value:"profileName"},{text:"Country",value:"country"}],results:[]}),methods:{k:t=>`chart-view.overview-netflix.${t}`,removeEmptyBins:t=>({top:e=>t.top(1/0).filter((function(t){return 0!==t.value.count&&0!==t.value})).slice(0,e),all:()=>t.all()}),drawViz(){const t=["#7570b3","#6652A1","#859ED5","#CC94F2","#9A5BD9","#6F36BF","#3F1973","#58539E"],e=o.Z1g("%Y-%m-%d %H:%M:%S"),r=o.i$Z("%B %d, %Y"),l=o.WUZ(".1f");this.results=this.values.filter((t=>""===t.supplementalVideoType)),this.results.forEach((t=>{const time=t.duration.split(":");t.date=e(t.startTime),t.month=o.F0B(t.date),t.dateStr=r(t.day),t.hour=o.WQD(t.date).getHours();const title=t.title.split(":");t.content=title[0].includes("HIDDEN TITLE")?title[1]:title[0],t.device=""===t.deviceType?"Unknown":t.deviceType,t.durationHour=+time[0]+ +time[1]/60+ +time[2]/60/60,t.user=t.profileName}));const d=(0,main.Z)(this.results),c=d.groupAll(),h=new n.LineChart("#watch-time-chart"+this.graphId),f=new n.BarChart("#range-chart"+this.graphId),m=new n.PieChart("#user-chart"+this.graphId),w=new n.RowChart("#country-chart"+this.graphId),v=new n.RowChart("#content-chart"+this.graphId),C=new n.RowChart("#week-chart"+this.graphId),x=new n.RowChart("#device-chart"+this.graphId),A=new n.BarChart("#hour-chart"+this.graphId),y=new n.DataCount("#dc-data-count"+this.graphId);o.Ys("#watch-time-chart"+this.graphId+" a.reset").on("click",(function(){f.filterAll(),h.filterAll(),n.redrawAll()})),o.Ys("#user-chart"+this.graphId+" a.reset").on("click",(function(){m.filterAll(),n.redrawAll()})),o.Ys("#country-chart"+this.graphId+" a.reset").on("click",(function(){w.filterAll(),n.redrawAll()})),o.Ys("#content-chart"+this.graphId+" a.reset").on("click",(function(){v.filterAll(),n.redrawAll()})),o.Ys("#week-chart"+this.graphId+" a.reset").on("click",(function(){C.filterAll(),n.redrawAll()})),o.Ys("#device-chart"+this.graphId+" a.reset").on("click",(function(){x.filterAll(),n.redrawAll()})),o.Ys("#hour-chart"+this.graphId+" a.reset").on("click",(function(){A.filterAll(),n.redrawAll()}));const k=d.dimension((t=>t.month)),I=d.dimension((t=>t.user)),B=d.dimension((t=>t.device)),V=d.dimension((t=>t.content)),_=d.dimension((t=>t.country)),R=d.dimension((t=>t.hour)),D=d.dimension((t=>{const e=t.date.getDay();return`${this.$days()[e]}`})),Y=k.group().reduceSum((t=>t.durationHour)),F=I.group().reduceSum((t=>t.durationHour)),T=B.group().reduceSum((t=>t.durationHour)),S=V.group().reduceSum((t=>t.durationHour)),$=_.group().reduceSum((t=>t.durationHour)),H=R.group().reduceSum((t=>t.durationHour)),Z=D.group().reduceSum((t=>t.durationHour)),P=k.bottom(1)[0].date,W=k.top(1)[0].date,U=Y.top(1)[0].value+2;let E=o.Ys("#watch-time-chart"+this.graphId).node().getBoundingClientRect().width,L=150;h.renderArea(!0).width(E).height(L).transitionDuration(1e3).margins({top:20,right:50,bottom:25,left:40}).group(Y).dimension(k).curve(o.FdL).x(o.Xf().domain([o.WQD.offset(P,0),o.WQD.offset(W,2)])).y(o.BYU().domain([0,U])).ordinalColors([t[1]]).valueAccessor((t=>t.value)).title((t=>r(t.key)+": "+l(t.value)+" hours watched")).xUnits(o.WQD).brushOn(!1).elasticX(!1).elasticY(!0).xyTipsOn(!0).mouseZoomable(!1).rangeChart(f).renderHorizontalGridLines(!1).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).yAxisLabel("Hours watched").clipPadding(10).yAxis().ticks(5),h.xAxis().ticks(5),f.width(E).height(30).margins({top:0,right:50,bottom:20,left:40}).dimension(k).group(Y).centerBar(!0).elasticY(!0).gap(1).x(o.Xf().domain([o.WQD.offset(P,0),o.WQD.offset(W,2)])).round(o.rr1.round).valueAccessor((t=>t.value)).alwaysUseRounding(!0).xUnits(o.Nus).ordinalColors(t).yAxis().ticks(0),E=o.Ys("#user-chart"+this.graphId).node().getBoundingClientRect().width,L=250;const N=Math.min(E,L);m.width(E).height(L).slicesCap(10).radius(N/4).innerRadius(N/8).externalLabels(50).dimension(I).group(F).valueAccessor((t=>t.value)).title((t=>t.key+": "+l(t.value)+" hours watched")).drawPaths(!0).minAngleForLabel(.1).ordinalColors(t),m.on("pretransition",(function(t){t.selectAll("text.pie-slice.pie-label").call((function(t){t.each((function(t){const e=o.Ys(this);let text=e.text();text.length>14&&(text=text.substring(0,14)+".. "),text.length>0&&(text=text+" ("+n.utils.printSingleValue((t.endAngle-t.startAngle)/(2*Math.PI)*100)+"%)"),e.text(text)}))}))})),E=o.Ys("#country-chart"+this.graphId).node().getBoundingClientRect().width,L=200,w.width(E).height(L).margins({top:20,left:10,right:10,bottom:20}).group($).dimension(_).ordinalColors(t).valueAccessor((t=>t.value)).label((t=>t.key)).data((t=>t.top(10))).title((t=>t.key+": "+l(t.value)+" hours watched")).elasticX(!0).xAxis().ticks(4),E=o.Ys("#week-chart"+this.graphId).node().getBoundingClientRect().width,L=150,C.width(E).height(L).margins({top:20,left:10,right:10,bottom:20}).group(Z).dimension(D).valueAccessor((t=>t.value)).ordinalColors(t).label((t=>t.key)).title((t=>l(t.value)+" hours watched")).elasticX(!0).xAxis().ticks(4),C.ordering((t=>this.$days().indexOf(t.key))),A.width(o.Ys("#hour-chart"+this.graphId).node().getBoundingClientRect().width).height(150).margins({top:20,right:10,bottom:20,left:40}).dimension(R).group(H).valueAccessor((t=>t.value)).centerBar(!1).gap(1).x(o.BYU().domain([0,24])).ordinalColors(t).yAxisLabel("Hours watched").yAxis().ticks(5),A.xAxis().tickFormat((t=>t+":00")).ticks(7),E=o.Ys("#content-chart"+this.graphId).node().getBoundingClientRect().width,L=420,v.width(E).height(L).margins({top:20,left:10,right:10,bottom:20}).group(S).dimension(V).ordinalColors([t[0]]).valueAccessor((t=>t.value)).title((t=>t.key+": "+l(t.value)+" hours watched")).label((t=>t.key)).data((t=>t.top(20))).elasticX(!0).xAxis().ticks(4),E=o.Ys("#device-chart"+this.graphId).node().getBoundingClientRect().width,L=200,x.width(E).height(L).margins({top:20,left:10,right:10,bottom:20}).group(this.removeEmptyBins(T)).dimension(B).ordinalColors([t[2]]).valueAccessor((t=>t.value)).title((t=>r(t.key)+": "+l(t.value)+" hours watched")).label((t=>t.key)).data((t=>t.top(10))).title((t=>t.key+": "+l(t.value)+" hours watched")).elasticX(!0).xAxis().ticks(4),y.crossfilter(d).groupAll(c).html({some:`<strong>%filter-count</strong> ${this.$t("selected-out-of")} <strong>%total-count</strong> ${this.$t(this.k("views"))} | <a class='resetAll'>${this.$t("Reset All")}</a>`,all:`Total: <strong>%total-count</strong> ${this.$t(this.k("views"))}. ${this.$t("click-graph")}`}).on("pretransition",((t,filter)=>{this.results=k.top(c.value()),o.Ys("#dc-data-count"+this.graphId+" a.resetAll").on("click",(()=>{n.filterAll(),n.renderAll()}))})),n.renderAll()}}},w=(0,r(1001).Z)(m,(function(){var t=this,e=t._self._c;return e("VContainer",[e("ChartViewVRowWebShare",{attrs:{dense:""}},[e("VCol",{attrs:{cols:"8"}},[e("VRow",{attrs:{dense:""}},[e("VCol",{attrs:{cols:"12"}},[e("div",{attrs:{id:"watch-time-chart"+t.graphId}},[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.messages["watch-time"])}}),e("ChartViewFilters")],1),e("div",{staticClass:"range-chart",attrs:{id:"range-chart"+t.graphId}},[e("ChartViewTextSelectTimeRange")],1)])],1),e("VRow",{attrs:{dense:""}},[e("VCol",{attrs:{cols:"8"}},[e("div",{attrs:{id:"hour-chart"+t.graphId}},[e("span",{directives:[{name:"t",rawName:"v-t",value:"time-of-day",expression:"'time-of-day'"}],staticClass:"font-weight-bold"}),e("ChartViewFilters")],1)]),e("VCol",{attrs:{cols:"4"}},[e("div",{attrs:{id:"week-chart"+t.graphId}},[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.messages.day)}}),e("ChartViewFilters")],1)])],1)],1),e("VCol",{attrs:{cols:"4"}},[e("div",{attrs:{id:"content-chart"+t.graphId}},[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.messages["most-watched"])}}),e("ChartViewFilters")],1)])],1),e("ChartViewVRowWebShare",{attrs:{dense:""}},[e("VCol",{attrs:{cols:"4"}},[e("div",{attrs:{id:"user-chart"+t.graphId}},[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.messages.Profiles)}}),e("ChartViewFilters")],1)]),e("VCol",{attrs:{cols:"4"}},[e("div",{attrs:{id:"country-chart"+t.graphId}},[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.messages.country)}}),e("ChartViewFilters")],1)]),e("VCol",{attrs:{cols:"4"}},[e("div",{attrs:{id:"device-chart"+t.graphId}},[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.messages.device)}}),e("ChartViewFilters")],1)])],1),e("VRow",[e("div",{staticClass:"dc-data-count",attrs:{id:"dc-data-count"+t.graphId}})]),e("UnitFilterableTable",t._b({},"UnitFilterableTable",{headers:t.header,items:t.results},!1))],1)}),[],!1,null,null,null).exports},18736:function(t,e,r){r.r(e),r.d(e,{default:function(){return h}});var o=r(12555),n=r(37081),l=r(97888),d=r(9934),c={components:{BaseButton:n.Z,BaseButtonDownloadData:l.Z,BaseButtonShare:d.Z},mixins:[(0,o.Z)()]},h=(0,r(1001).Z)(c,(function(){var t=this,e=t._self._c;return e("VRow",t._b({ref:"domToImageNode"},"VRow",t.$attrs,!1),[t._t("default"),e("VCol",{staticClass:"dom-to-image-exclude",attrs:{cols:"12"}},[e("BaseButton",t._b({attrs:{icon:"mdiExport",text:"Export"},on:{click:t.exportImage}},"BaseButton",{progress:t.progress,status:t.status,error:t.error},!1)),e("BaseButtonDownloadData",t._b({},"BaseButtonDownloadData",{disabled:!t.blob,extension:t.extension,filename:t.filename,data:t.blob},!1)),e("BaseButtonShare",t._b({attrs:{"file-share":""}},"BaseButtonShare",{files:t.files,disabled:!t.files},!1))],1)],2)}),[],!1,null,null,null).exports},96622:function(t,e,r){r.r(e),r.d(e,{default:function(){return n}});var o={},n=(0,r(1001).Z)(o,(function(){var t=this,e=t._self._c;return e("p",{staticClass:"filters"},[e("span",[t._v(" "+t._s(t.$t("Current filter"))+" "),e("span",{staticClass:"filter"})]),e("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null).exports},49814:function(t,e,r){r.r(e),r.d(e,{default:function(){return o}});var o=(0,r(1001).Z)({},(function(){var t=this,e=t._self._c;return e("p",{staticClass:"muted pull-right text-subtitle-2 mr-4 mb-1"},[e("span",{domProps:{innerHTML:t._s(t.$t("select-time-range"))}}),t._t("default")],2)}),[],!1,null,null,null).exports},21297:function(t,e,r){r.r(e);var o=r(40290),n=r(18651),l=r(659);const d={props:{values:{type:Array,default:()=>[]},headers:{type:Array,default:()=>[]},messages:{type:Object,default:()=>({})}},data(){return{graphId:"graph_"+this.$store.state.xp.currentTab,totalCount:0,filterCount:0}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{drawViz(){},createTextFilterWidget(t,e="Search"){const r=new o.TextFilterWidget(t);return r.placeHolder(this.$tev(e,e)),r}}};e.default=(0,n.Z)(d,l.Z)}}]);