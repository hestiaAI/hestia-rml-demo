"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[5008,1690,6622,9814],{45008:function(t,e,r){r.r(e),r.d(e,{default:function(){return m}});var n=r(46228),l=r(40290),o=r(31690),d=r(49814),c=r(96622);l.config.defaultColors(n.xHP);var h={components:{ChartViewTextSelectTimeRange:d.default,ChartViewFilters:c.default},mixins:[o.default],props:{dateAccessor:{type:String,required:!0},dateFormat:{type:String,default:""},valueAccessor:{type:String,default:""},defaultValue:{type:Number,default:0}},data(){const t={day:{name:"day",accessor:t=>n.rr1(this.dateParser(t)),xUnits:n.Nus,round:n.rr1.round},month:{name:"month",accessor:t=>n.F0B(this.dateParser(t)),xUnits:n.K_h,round:n.F0B.round},year:{name:"year",accessor:t=>n.jBk(this.dateParser(t)),xUnits:n.HK7,round:n.jBk.round}};return{timeUnits:t,timeUnit:t.day,dateFormatter:n.i$Z("%B %d, %Y")}},computed:{dateParser(){return this.dateFormat?n.Z1g(this.dateFormat):t=>new Date(t)}},methods:{drawViz(){const t=new l.LineChart(`#area-chart-${this.graphId}`),e=new l.BarChart(`#range-chart-${this.graphId}`);n.Ys(`#area-chart-${this.graphId} a.reset`).on("click",(function(){t.filterAll(),e.filterAll(),l.redrawAll()}));const r=n.Wem(this.ndx.all(),(t=>this.dateParser(t[this.dateAccessor])));r[0]=n.rr1.offset(r[0],-1),r[1]=n.rr1.offset(r[1],1);const o=n.F0B.count(...r);this.timeUnit=o>10?o>120?this.timeUnits.year:this.timeUnits.month:this.timeUnits.day;const d=this.ndx.dimension((t=>this.timeUnit.accessor(t[this.dateAccessor]))),c=this.valueAccessor?d.group().reduceSum((t=>t[this.valueAccessor])):d.group().reduceCount(),h=n.Ys(`#area-chart-${this.graphId}`).node().getBoundingClientRect().width;t.margins({top:20,left:40,right:20,bottom:20}).width(h).transitionDuration(1e3).turnOnControls(!1).curve(n.FdL).xyTipsOn(!0).height(.8*(this.height-30)).brushOn(!1).renderArea(!0).dimension(d).group(c).x(n.Xf().domain(r)).elasticY(!0).rangeChart(e).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).round(this.timeUnit.round).xUnits(this.timeUnit.xUnits).title((t=>`${this.dateFormatter(t.key)} : ${t.value} ${this.valueLabel}`)).clipPadding(10).yAxisLabel(`Total ${this.valueLabel}`).ordinalColors(this.colorPalette),t.xAxis().ticks(10),t.yAxis().ticks(6),t.filterAll(),e.width(h).height(.2*(this.height-30)).margins({top:0,right:10,bottom:20,left:40}).dimension(d).group(c).centerBar(!0).gap(1).x(n.Xf().domain(r)).valueAccessor((t=>t.value)).label((t=>t.key)).round(this.timeUnit.round).alwaysUseRounding(!0).xUnits(this.timeUnit.xUnits).ordinalColors(this.colorPalette).yAxis().ticks(0),l.renderAll()}}},m=(0,r(1001).Z)(h,(function(){var t=this,e=t._self._c;return e("VContainer",[e("div",{attrs:{id:`area-chart-${t.graphId}`}},[e("strong",[t._v(t._s(t.title))]),e("strong",{directives:[{name:"t",rawName:"v-t",value:"per",expression:"'per'"}]}),e("strong",{directives:[{name:"t",rawName:"v-t",value:t.timeUnit.name,expression:"timeUnit.name"}]}),e("ChartViewFilters")],1),e("div",{staticClass:"range-chart",attrs:{id:`range-chart-${t.graphId}`}},[e("ChartViewTextSelectTimeRange")],1)])}),[],!1,null,null,null).exports},96622:function(t,e,r){r.r(e),r.d(e,{default:function(){return l}});var n={},l=(0,r(1001).Z)(n,(function(){var t=this,e=t._self._c;return e("p",{staticClass:"filters"},[e("span",[t._v(" "+t._s(t.$t("Current filter"))+" "),e("span",{staticClass:"filter"})]),e("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null).exports},49814:function(t,e,r){r.r(e),r.d(e,{default:function(){return n}});var n=(0,r(1001).Z)({},(function(){var t=this,e=t._self._c;return e("p",{staticClass:"muted pull-right text-subtitle-2 mr-4 mb-1"},[e("span",{domProps:{innerHTML:t._s(t.$t("select-time-range"))}}),t._t("default")],2)}),[],!1,null,null,null).exports},31690:function(t,e,r){r.r(e);var n=r(40290);e.default={props:{ndx:{type:Object,required:!0},title:{type:String,default:""},valueLabel:{type:String,default:"records"},height:{type:Number,default:250},colorPalette:{type:Array,default:()=>["#58539E","#847CEB","#605BAB","#4A4685","#35325E"]}},data(){return{graphId:"graph_"+this.$store.state.xp.currentTab}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{createTextFilterWidget(t,e="Search"){const r=new n.TextFilterWidget(t);return r.placeHolder(this.$t(e)),r}}}}}]);