{"version":3,"file":"data-experience.umd.min.9340.js","mappings":"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","sources":["webpack://data-experience/./src/components/chart/view/ChartViewTimeSeries.vue?c6e5","webpack://data-experience/src/components/chart/view/ChartViewTimeSeries.vue","webpack://data-experience/./src/components/chart/view/ChartViewTimeSeries.vue?c550","webpack://data-experience/./src/components/chart/view/ChartViewTimeSeries.vue","webpack://data-experience/./src/components/chart/view/ChartViewVRowWebShare.vue?ea0d","webpack://data-experience/src/components/chart/view/ChartViewVRowWebShare.vue","webpack://data-experience/./src/components/chart/view/ChartViewVRowWebShare.vue?2101","webpack://data-experience/./src/components/chart/view/ChartViewVRowWebShare.vue","webpack://data-experience/./node_modules/d3-collection/src/map.js","webpack://data-experience/./node_modules/d3-collection/src/nest.js","webpack://data-experience/./node_modules/d3-collection/src/set.js","webpack://data-experience/./node_modules/d3-collection/src/keys.js","webpack://data-experience/./src/components/chart/view/mixin.js","webpack://data-experience/./src/components/chart/view/utils/d3-helpers.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\",\"md\":\"8\",\"offset-md\":\"2\"}},[_c('VRow',{attrs:{\"dense\":\"\"}},[_c('VCol',{attrs:{\"cols\":\"9\"}},[_c('p',{staticClass:\"text-h6\"},[_vm._v(\" \"+_vm._s(_vm.title)+\" \")])]),_c('VSpacer'),_c('VCol',{staticClass:\"text-right\",attrs:{\"cols\":\"3\"}},[(_vm.filters.length === 0)?_c('VSelect',{attrs:{\"items\":_vm.namesInterval,\"label\":_vm.$t('Time interval'),\"dense\":\"\"},on:{\"change\":function($event){_vm.applyFilters()\n            _vm.draw()}},model:{value:(_vm.selectedInterval),callback:function ($$v) {_vm.selectedInterval=$$v},expression:\"selectedInterval\"}}):_vm._e(),(_vm.filters.length > 0)?_c('VDialog',{attrs:{\"persistent\":\"\",\"max-width\":\"300px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('VBtn',_vm._g(_vm._b({attrs:{\"color\":\"primary\",\"dark\":\"\",\"small\":\"\",\"fab\":\"\"}},'VBtn',attrs,false),on),[_c('VIcon',{attrs:{\"small\":\"\"}},[_vm._v(\" $vuetify.icons.mdiTuneVariant \")])],1)]}}],null,false,530295481),model:{value:(_vm.settingDialog),callback:function ($$v) {_vm.settingDialog=$$v},expression:\"settingDialog\"}},[_c('VCard',[_c('VCardTitle',[_c('span',{staticClass:\"text-h5\"},[_vm._v(_vm._s(_vm.$t('Settings'))+\"/\"+_vm._s(_vm.$t('Filters')))])]),_c('VCardText',[_c('VContainer',[_c('VRow',[_c('VCol',{attrs:{\"cols\":\"6\",\"sm\":\"12\"}},[_c('VSelect',{attrs:{\"items\":_vm.namesInterval,\"label\":_vm.$t('Time interval'),\"dense\":\"\"},model:{value:(_vm.selectedInterval),callback:function ($$v) {_vm.selectedInterval=$$v},expression:\"selectedInterval\"}})],1),_vm._l((_vm.filters),function(filter){return _c('VCol',{key:filter.value,attrs:{\"cols\":\"6\",\"sm\":\"12\"}},[_c('VSelect',{attrs:{\"items\":_vm.filterItems[filter.value]\n                          ? _vm.filterItems[filter.value]\n                          : [],\"label\":filter.text,\"dense\":\"\"},model:{value:(_vm.filterModel[filter.value]),callback:function ($$v) {_vm.$set(_vm.filterModel, filter.value, $$v)},expression:\"filterModel[filter.value]\"}})],1)})],2)],1)],1),_c('VCardActions',[_c('VSpacer'),_c('VBtn',{directives:[{name:\"t\",rawName:\"v-t\",value:('Reset'),expression:\"'Reset'\"}],attrs:{\"color\":\"red darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.resetFilters()}}}),_c('VBtn',{directives:[{name:\"t\",rawName:\"v-t\",value:('Close'),expression:\"'Close'\"}],attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){_vm.settingDialog = false}}}),_c('VBtn',{directives:[{name:\"t\",rawName:\"v-t\",value:('Save'),expression:\"'Save'\"}],attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){_vm.settingDialog = false\n                  _vm.applyFilters()\n                  _vm.draw()}}})],1)],1)],1):_vm._e()],1)],1),_c('ChartViewVRowWebShare',{attrs:{\"dense\":\"\"}},[_c('VCol',{attrs:{\"cols\":\"12\"}},[_c('div',{attrs:{\"id\":_vm.graphId}})])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <VRow>\n    <VCol cols=\"12\" md=\"8\" offset-md=\"2\">\n      <VRow dense>\n        <VCol cols=\"9\">\n          <p class=\"text-h6\">\n            {{ title }}\n          </p>\n        </VCol>\n        <VSpacer />\n        <VCol cols=\"3\" class=\"text-right\">\n          <VSelect\n            v-if=\"filters.length === 0\"\n            v-model=\"selectedInterval\"\n            :items=\"namesInterval\"\n            :label=\"$t('Time interval')\"\n            dense\n            @change=\"\n              applyFilters()\n              draw()\n            \"\n          />\n          <VDialog\n            v-if=\"filters.length > 0\"\n            v-model=\"settingDialog\"\n            persistent\n            max-width=\"300px\"\n          >\n            <template #activator=\"{ on, attrs }\">\n              <VBtn\n                color=\"primary\"\n                dark\n                small\n                fab\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                <VIcon small>\n                  $vuetify.icons.mdiTuneVariant\n                </VIcon>\n              </VBtn>\n            </template>\n            <VCard>\n              <VCardTitle>\n                <span class=\"text-h5\">{{ $t('Settings') }}/{{ $t('Filters') }}</span>\n              </VCardTitle>\n              <VCardText>\n                <VContainer>\n                  <VRow>\n                    <VCol cols=\"6\" sm=\"12\">\n                      <VSelect\n                        v-model=\"selectedInterval\"\n                        :items=\"namesInterval\"\n                        :label=\"$t('Time interval')\"\n                        dense\n                      />\n                    </VCol>\n                    <VCol\n                      v-for=\"filter in filters\"\n                      :key=\"filter.value\"\n                      cols=\"6\"\n                      sm=\"12\"\n                    >\n                      <VSelect\n                        v-model=\"filterModel[filter.value]\"\n                        :items=\"\n                          filterItems[filter.value]\n                            ? filterItems[filter.value]\n                            : []\n                        \"\n                        :label=\"filter.text\"\n                        dense\n                      />\n                    </VCol>\n                  </VRow>\n                </VContainer>\n              </VCardText>\n              <VCardActions>\n                <VSpacer />\n                <VBtn v-t=\"'Reset'\" color=\"red darken-1\" text @click=\"resetFilters()\" />\n                <VBtn v-t=\"'Close'\" color=\"blue darken-1\" text @click=\"settingDialog = false\" />\n                <VBtn\n                  v-t=\"'Save'\"\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"\n                    settingDialog = false\n                    applyFilters()\n                    draw()\n                  \"\n                />\n              </VCardActions>\n            </VCard>\n          </VDialog>\n        </VCol>\n      </VRow>\n      <ChartViewVRowWebShare dense>\n        <VCol cols=\"12\">\n          <div :id=\"graphId\" />\n        </VCol>\n      </ChartViewVRowWebShare>\n    </VCol>\n  </VRow>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport { nest } from 'd3-collection'\nimport { addMissingDate } from './utils/d3-helpers'\nimport mixin from './mixin'\nimport ChartViewVRowWebShare from './ChartViewVRowWebShare.vue'\n\n// Inspired by\n// https://datawanderings.com/2019/10/28/tutorial-making-a-line-chart-in-d3-js-v-5/\nexport default {\n  components: { ChartViewVRowWebShare },\n  mixins: [mixin],\n  props: {\n    dateAccessor: {\n      type: Object,\n      required: true\n    },\n    seriesAccessor: {\n      type: Object,\n      required: true\n    },\n    // if not set will just count the rows\n    valueAccessor: {\n      type: String,\n      default: null\n    },\n    valueFormat: {\n      type: String,\n      default: '~s'\n    },\n    yLabel: {\n      type: String,\n      default: 'Count'\n    },\n    filters: {\n      type: Array,\n      default: () => []\n    },\n    lineWidth: {\n      type: Number,\n      default: 2\n    },\n    dotWidth: {\n      type: Number,\n      default: 2\n    },\n    dotRadius: {\n      type: Number,\n      default: 4\n    },\n    padding: {\n      type: Number,\n      default: 5\n    },\n    margin: {\n      type: Number,\n      default: 5\n    },\n    adj: {\n      type: Number,\n      default: 70\n    },\n    title: {\n      type: String,\n      default: 'Title of the Graph'\n    },\n    legendOffset: {\n      type: Number,\n      default: 0\n    },\n    legendPadding: {\n      type: Number,\n      default: 10\n    },\n    dateFormat: {\n      type: String,\n      default: ''\n    },\n    cumSum: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      slices: [],\n      selectedInterval: null,\n      intervals: {},\n      namesInterval: [],\n      settingDialog: false,\n      filterItems: {},\n      filterModel: {},\n      extentDate: null,\n      dateParser: d => new Date(d)\n    }\n  },\n  methods: {\n    initFilters() {\n      this.filters.forEach((filter, i) => {\n        this.filterItems[filter.value] = []\n        // get unique ids and set items for each filter select\n        this.filterItems[filter.value] = this.values\n          .map(i => i[filter.value])\n          .filter((value, index, self) => self.indexOf(value) === index)\n      })\n    },\n    resetFilters() {\n      this.filters.forEach((filter) => {\n        this.filterModel[filter.value] = null\n      })\n    },\n    applyFilters() {\n      this.slices.forEach((serie) => {\n        // aggregate per selected time interval and other filters\n        const interval = this.intervals[this.selectedInterval]\n        const filters = Object.keys(this.filterModel).filter(k => this.filterModel[k] != null)\n        // filter according to selection\n        serie.current = serie.values.filter((d) => {\n          return filters.every(f => this.filterModel[f] === d[f])\n        })\n        // Aggregate per time period\n        serie.current = nest()\n          .key(d => interval.parser(this.dateParser(d.date)))\n          .rollup(leaves => d3.sum(leaves, l => l.value))\n          .entries(serie.current)\n        // Add missing datapoints\n        serie.current = addMissingDate(serie.current, 'key', 'value', interval.parser, 0, this.extentDate[0], this.extentDate[1])\n        // Sort the result\n        serie.current = serie.current.sort((e1, e2) => this.dateParser(e1.key) - this.dateParser(e2.key))\n        // Compute cumulative sum if needed\n        if (this.cumSum) {\n          const cumSum = d3.cumsum(serie.current, d => d.value)\n          serie.current = serie.current.map((d, idx) => {\n            return {\n              ...d,\n              value: cumSum[idx]\n            }\n          })\n        }\n      })\n    },\n    drawViz() {\n      /* Init the possible aggregations dpending on dates extent */\n      if (this.dateFormat) {\n        this.dateParser = d3.timeParse(this.dateFormat)\n      }\n      this.extentDate = d3.extent(this.values, d => this.dateParser(d[this.dateAccessor.value]))\n      const diffDays = d3.timeDay.count(this.extentDate[0], this.extentDate[1])\n      if (!diffDays) {\n        console.error('Unrecognized Dates')\n        return\n      }\n      if (diffDays < 93) {\n        this.intervals.Day = {\n          parser: d3.timeDay,\n          format: d3.timeFormat('%B %d, %Y')\n        }\n      }\n      if (diffDays > 14 && diffDays < 651) {\n        this.intervals.Week = {\n          parser: d3.timeWeek,\n          format: d3.timeFormat('%B %d, %Y')\n        }\n      }\n      if (diffDays > 62 && diffDays < 1800) {\n        this.intervals.Month = {\n          parser: d3.timeMonth,\n          format: d3.timeFormat('%B %Y')\n        }\n      }\n      if (diffDays > 730) {\n        this.intervals.Year = {\n          parser: d3.timeYear,\n          format: d3.timeFormat('%Y')\n        }\n      }\n      this.namesInterval = Object.keys(this.intervals).map(value => ({\n        value,\n        text: this.$tc(value, 2)\n      }))\n      // get unique series ids\n      const ids = this.values\n        .map(i => i[this.seriesAccessor.value])\n        .filter((value, index, self) => self.indexOf(value) === index)\n      // group by series ids and sort values\n      this.slices = ids.map((a) => {\n        return {\n          id: 'legend' in this.messages ? this.messages.legend[a] : a,\n          values: this.values\n            .filter(v => a === v[this.seriesAccessor.value])\n            .map((d) => {\n              const ret = {\n                date: this.dateParser(d[this.dateAccessor.value]),\n                value: this.valueAccessor ? +d[this.valueAccessor] : 1\n              }\n              this.filters.forEach((f) => {\n                ret[f.value] = d[f.value]\n              })\n              return ret\n            })\n            .sort((e1, e2) => e1.date - e2.date)\n        }\n      })\n      this.selectedInterval = this.namesInterval.slice(-1)[0].value\n      this.initFilters()\n      this.applyFilters()\n      this.draw()\n    },\n    draw() {\n      const { graphId, adj } = this\n      const width = 800\n      const height = 300\n      /* create svg element */\n      d3.select(`#${graphId} svg`).remove()\n      const svg = d3\n        .select(`#${graphId}`)\n        .append('svg')\n        .attr('preserveAspectRatio', 'xMinYMin meet')\n        .attr('viewBox', `-${adj} -${adj} ${width + adj * 2} ${height + adj * 2}`)\n        .style('padding', this.padding)\n        .style('margin', this.margin)\n        .classed('svg-content', true)\n      function nestedExtent(data, dataAccessor, valueAccessor) {\n        return d3.extent(data.reduce(function(prevArr, currArr) {\n          const extentArr = d3.extent(currArr[dataAccessor], valueAccessor)\n          prevArr.push(extentArr[0])\n          prevArr.push(extentArr[1])\n          return prevArr\n        }, []))\n      }\n      /* Scales */\n      const xScale = d3.scaleTime().range([0, width])\n      const yScale = d3.scaleLinear().rangeRound([height, 0])\n      xScale.domain(nestedExtent(this.slices, 'current', d => this.dateParser(d.key)))\n      yScale.domain([0, nestedExtent(this.slices, 'current', d => d.value)[1]])\n      /* Axis */\n      const yAxis = d3.axisLeft().ticks(5).scale(yScale) // .ticks(slices[0].values.length)\n      const xAxis = d3\n        .axisBottom()\n        .ticks(8)\n      // .ticks(d3.timeDay.every(1))\n      // .tickFormat(d3.timeFormat('%b %d'))\n        .scale(xScale)\n      svg\n        .append('g')\n        .attr('class', 'xAxis')\n        .attr('transform', `translate(0,${height})`)\n        .call(xAxis)\n        .selectAll('text')\n        .attr('y', 0)\n        .attr('x', 9)\n        .attr('dy', '2em')\n        .attr('transform', 'rotate(-30)')\n        .style('text-anchor', 'end')\n      svg\n        .append('g')\n        .attr('class', 'yAxis')\n        .call(yAxis)\n        .append('text')\n        .attr('transform', 'rotate(-90)')\n        .attr('dy', '.75em')\n        .attr('y', -60)\n        .style('text-anchor', 'end')\n        .text(this.yLabel)\n      /* GridLayout */\n      d3.selectAll('#' + graphId + ' g.yAxis g.tick')\n        .append('line')\n        .attr('class', 'gridline')\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', width)\n        .attr('y2', 0)\n      /*\n            d3.selectAll('#' + this.graphId + ' g.xAxis g.tick')\n              .append('line')\n              .attr('class', 'gridline')\n              .attr('x1', 0)\n              .attr('y1', -height)\n              .attr('x2', 0)\n              .attr('y2', 0)\n            */\n      /* Color Scale */\n      const keys = this.slices.map(d => d.id)\n      const color = d3.scaleOrdinal().domain(keys).range(d3.schemeDark2)\n      /* Legend */\n      const legend = svg.selectAll('.legend')\n        .data(keys)\n        .enter()\n        .append('g')\n      // add circles\n      legend\n        .append('circle')\n        .attr('r', 7)\n        .attr('cx', -20)\n        .attr('cy', -40)\n        .attr('fill', d => color(d))\n      // add text\n      legend\n        .append('text')\n        .attr('x', -5)\n        .attr('y', -37)\n        .text(function(d) {\n          return d\n        })\n      // space the groups depending on their size\n      legend.attr('transform', (d, i) => {\n        const x = d3.sum(keys, (e, j) => j < i ? legend.nodes()[j].getBBox().width : 0)\n        return ('translate(' +\n                    (x + this.legendOffset + this.legendPadding * i) +\n                    ',0)')\n      })\n      /* Tooltip */\n      d3.select('#' + graphId + '.tooltip').remove()\n      const tooltip = d3\n        .select('body')\n        .append('div')\n        .attr('class', 'tooltip')\n        .attr('id', graphId)\n        .style('opacity', 0)\n      const that = this\n      const f = d3.format(this.valueFormat)\n      function showTooltip(evt, d) {\n        tooltip.transition().duration(60).style('opacity', 0.98)\n        tooltip\n          .html('<b>' +\n                    that.intervals[that.selectedInterval].format(that.dateParser(d.key)) +\n                    '</b><br/>' +\n                    f(d.value)) // d.name\n          .style('left', evt.pageX - 55 + 'px')\n          .style('top', evt.pageY - 45 + 'px')\n      }\n      function hideTooltip() {\n        tooltip.transition().duration(60).style('opacity', 0)\n      }\n      /* Line */\n      const line = d3\n        .line()\n        .curve(d3.curveMonotoneX)\n        .x(d => xScale(this.dateParser(d.key)))\n        .y(d => yScale(d.value))\n      /* Draw lines */\n      const lines = svg.selectAll('lines').data(this.slices).enter().append('g')\n      const path = lines\n        .append('path')\n        .attr('fill', 'none')\n        .attr('stroke', d => color(d.id))\n        .attr('stroke-width', this.lineWidth)\n        .attr('d', d => line(d.current))\n      path\n        .attr('stroke-dashoffset', function() {\n          return d3.select(this).node().getTotalLength()\n        })\n        .attr('stroke-dasharray', function() {\n          return d3.select(this).node().getTotalLength()\n        })\n        .transition()\n        .duration(5000)\n        .ease(d3.easeSin)\n        .attr('stroke-dashoffset', 0)\n      /* Draw points */\n      const points = lines\n        .selectAll('circle')\n        .data(d => d.current.map((v) => {\n          v.color = color(d.id)\n          v.name = d.id\n          return v\n        }))\n        .enter()\n        .append('circle')\n      points\n        .attr('stroke', d => d.color)\n        .attr('fill', 'white')\n        .attr('stroke-width', this.dotWidth)\n        .attr('cy', d => yScale(d.value))\n        .attr('cx', d => xScale(this.dateParser(d.key)))\n        .transition()\n        .duration(1500)\n        .delay((d, i) => i * 100 + 500)\n        .ease(d3.easeSin)\n        .attr('cy', d => yScale(d.value))\n        .attr('cx', d => xScale(this.dateParser(d.key)))\n        .attr('r', this.dotRadius)\n        .attr('class', 'datapoint')\n        .attr('id', (d, i) => i)\n        .style('opacity', 1)\n      const radius = this.dotRadius\n      points.on('mouseover', function(evt, d) {\n        d3.select(this)\n          .attr('fill', d => d.color)\n          .transition()\n          .duration(60)\n          .attr('r', radius + 5)\n        showTooltip(evt, d)\n      })\n      points.on('mouseleave', function() {\n        d3.select(this)\n          .attr('fill', 'white')\n          .transition()\n          .duration(60)\n          .attr('r', radius)\n        hideTooltip()\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n/* AXES */\n/* ticks */\ndiv ::v-deep .xAxis line,\ndiv ::v-deep .yAxis line {\n  stroke: #706f6f;\n  stroke-width: 0.5;\n  shape-rendering: geometricPrecision;\n}\n/* axis contour */\ndiv ::v-deep .xAxis path,\ndiv ::v-deep .yAxis path {\n  stroke: #706f6f;\n  stroke-width: 0.7;\n  shape-rendering: geometricPrecision;\n}\ndiv ::v-deep .yAxis path {\n  display: none;\n}\n/* axis text */\ndiv ::v-deep .xAxis text,\ndiv ::v-deep .yAxis text {\n  fill: #2b2929;\n  font-size: 1rem;\n  font-weight: 300;\n}\ndiv ::v-deep .gridline {\n  stroke: lightgray;\n  shape-rendering: geometricPrecision;\n  stroke-opacity: 0.5;\n  stroke-width: 10;\n}\n</style>\n<style>\ndiv.tooltip {\n  position: absolute;\n  text-align: center;\n  width: 110px;\n  height: 30px;\n  padding: 2px;\n  font: 12px sans-serif;\n  background: white;\n  color: #565656;\n  border: 0px;\n  border-radius: 2px;\n  pointer-events: none;\n  box-shadow: 0 0px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n}\n</style>\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewTimeSeries.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewTimeSeries.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartViewTimeSeries.vue?vue&type=template&id=eb551ed6&scoped=true&\"\nimport script from \"./ChartViewTimeSeries.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewTimeSeries.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChartViewTimeSeries.vue?vue&type=style&index=0&id=eb551ed6&prod&scoped=true&lang=css&\"\nimport style1 from \"./ChartViewTimeSeries.vue?vue&type=style&index=1&id=eb551ed6&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eb551ed6\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('VRow',_vm._b({ref:\"domToImageNode\"},'VRow',_vm.$attrs,false),[_vm._t(\"default\"),_c('VCol',{staticClass:\"dom-to-image-exclude\",attrs:{\"cols\":\"12\"}},[_c('BaseButton',_vm._b({attrs:{\"icon\":\"mdiExport\",\"text\":\"Export\"},on:{\"click\":_vm.exportImage}},'BaseButton',{ progress: _vm.progress, status: _vm.status, error: _vm.error },false)),_c('BaseButtonDownloadData',_vm._b({},'BaseButtonDownloadData',{ disabled: !_vm.blob, extension: _vm.extension, filename: _vm.filename, data: _vm.blob },false)),_c('BaseButtonShare',_vm._b({attrs:{\"file-share\":\"\"}},'BaseButtonShare',{ files: _vm.files, disabled: !_vm.files },false))],1)],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <VRow ref=\"domToImageNode\" v-bind=\"$attrs\">\n    <slot />\n    <VCol cols=\"12\" class=\"dom-to-image-exclude\">\n      <BaseButton\n        icon=\"mdiExport\"\n        text=\"Export\"\n        v-bind=\"{ progress, status, error }\"\n        @click=\"exportImage\"\n      />\n      <BaseButtonDownloadData\n        v-bind=\"{ disabled: !blob, extension, filename, data: blob }\"\n      />\n      <BaseButtonShare file-share v-bind=\"{ files, disabled: !files }\" />\n    </VCol>\n  </VRow>\n</template>\n\n<script>\nimport exportImageMixinFactory from '@/mixins/export-image-mixin-factory'\nimport BaseButton from '@/components/base/button/BaseButton.vue'\nimport BaseButtonDownloadData from '@/components/base/button/download/BaseButtonDownloadData.vue'\nimport BaseButtonShare from '@/components/base/button/BaseButtonShare.vue'\n\nexport default {\n  components: { BaseButton, BaseButtonDownloadData, BaseButtonShare },\n  mixins: [exportImageMixinFactory()]\n}\n</script>\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewVRowWebShare.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewVRowWebShare.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartViewVRowWebShare.vue?vue&type=template&id=53512c70&\"\nimport script from \"./ChartViewVRowWebShare.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewVRowWebShare.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","export default function(map) {\n  var keys = [];\n  for (var key in map) keys.push(key);\n  return keys;\n}\n","import { TextFilterWidget } from 'dc'\nimport { merge } from 'lodash-es'\n\nimport kViewBlockMixin from '@/mixins/k-view-block'\n\nconst mixin = {\n  props: {\n    values: {\n      type: Array,\n      default: () => []\n    },\n    headers: {\n      type: Array,\n      default: () => []\n    },\n    messages: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  data() {\n    return {\n      graphId: 'graph_' + this._uid,\n      totalCount: 0,\n      filterCount: 0\n    }\n  },\n  mounted() {\n    this.drawViz()\n  },\n  watch: {\n    values() {\n      this.drawViz()\n    }\n  },\n  methods: {\n    drawViz() { },\n    createTextFilterWidget(parent, placeholder = 'Search') {\n      const widget = new TextFilterWidget(parent)\n      widget.placeHolder(this.$tev(placeholder, placeholder))\n      return widget\n    }\n  }\n}\n\nexport default merge(mixin, kViewBlockMixin)\n","import * as d3 from 'd3'\n/**\n * Fill in the missing dates of an array of dated objects with a specific value.\n * @param  {Array} data  array of objects that include dates\n * @param  {String} dateAccessor  the key of date object\n * @param  {String} valueAccessor the key of the value to add for each missing date\n * @param  {String} interval  the d3 interval between each date, e.g: d3.timeDay, d3.timeMonth\n * @param  {Any} fillValue  the value to fill for each missing date, default to 0.\n * @param  {Date} minDate  the starting date range, computed from the data by default.\n * @param  {Date} maxDate  the ending date range, computed from the data by default.\n * @return {Array} the modified data array with the missing dates and their value added\n */\nexport function addMissingDate(\n  data,\n  dateAccessor,\n  valueAccessor,\n  interval,\n  fillValue = 0,\n  minDate = null,\n  maxDate = null\n) {\n  if (data.length <= 0) { return [] }\n  // Compute the min and max date\n  const extent = d3.extent(data, d => new Date(d[dateAccessor]))\n\n  // Get the list of dates between this extent\n  const dates = interval.range(\n    minDate !== null ? interval.floor(minDate) : interval.floor(extent[0]),\n    maxDate !== null ? interval.ceil(maxDate) : interval.ceil(extent[1]),\n    1\n  )\n\n  // Get dates that are not in the above list\n  const missingDates = dates.filter(\n    value => !data.map(d => d[dateAccessor]).includes(value.toString())\n  )\n\n  // Add and fill missing dates\n  missingDates.forEach((date) => {\n    const obj = { ...data[0] }\n    obj[dateAccessor] = date\n    obj[valueAccessor] = fillValue\n    data.push(obj)\n  })\n\n  return data\n}\n"],"names":["render","_vm","this","_c","_self","attrs","staticClass","_v","_s","title","filters","length","namesInterval","$t","on","$event","applyFilters","draw","model","value","callback","$$v","selectedInterval","expression","_e","scopedSlots","_u","key","fn","_g","_b","settingDialog","_l","filter","filterItems","text","filterModel","$set","directives","name","rawName","resetFilters","graphId","staticRenderFns","components","ChartViewVRowWebShare","mixins","mixin","props","dateAccessor","type","Object","required","seriesAccessor","valueAccessor","String","default","valueFormat","yLabel","Array","lineWidth","Number","dotWidth","dotRadius","padding","margin","adj","legendOffset","legendPadding","dateFormat","cumSum","Boolean","data","slices","intervals","extentDate","dateParser","d","Date","methods","initFilters","forEach","i","values","map","index","self","indexOf","serie","interval","keys","k","current","every","f","parser","date","rollup","leaves","l","entries","addMissingDate","sort","e1","e2","idx","drawViz","diffDays","console","error","Day","format","Week","Month","Year","$tc","ids","a","id","messages","legend","v","ret","slice","width","height","remove","svg","append","attr","style","classed","nestedExtent","dataAccessor","reduce","prevArr","currArr","extentArr","push","xScale","range","yScale","rangeRound","domain","yAxis","ticks","scale","xAxis","call","selectAll","color","enter","x","e","j","nodes","getBBox","tooltip","that","showTooltip","evt","transition","duration","html","pageX","pageY","hideTooltip","line","curve","y","lines","path","node","getTotalLength","ease","points","delay","radius","component","ref","$attrs","_t","exportImage","progress","status","disabled","blob","extension","filename","files","BaseButton","prefix","Map","object","each","set","isArray","o","n","prototype","constructor","has","get","property","clear","size","empty","sortValues","nest","sortKeys","apply","array","depth","createResult","setResult","keyValue","valuesByKey","result","sortKey","b","createObject","setObject","createMap","setMap","order","Set","proto","add","headers","_uid","totalCount","filterCount","mounted","watch","createTextFilterWidget","parent","placeholder","widget","TextFilterWidget","placeHolder","$tev","fillValue","minDate","maxDate","extent","dates","floor","ceil","missingDates","includes","toString","obj"],"sourceRoot":""}