"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[6563,8736,6622,1297,9201],{76563:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var n=r(46228),l=r(40290),main=r(26641),o=r(21297),d=r(59201),c=r(89295),h=r(18736),f=r(96622),m=r(18343);l.config.defaultColors(n.xHP);var x={components:{ChartViewVRowWebShare:h.default,ChartViewFilters:f.default,UnitFilterableTable:m.Z},mixins:[o.default],props:{},data:()=>({header:[{text:"Date",value:"dateStr"},{text:"App",value:"app"},{text:"Likes",value:"likes"},{text:"Passes",value:"passes"},{text:"Messages sent",value:"messagesSent"},{text:"Messages received",value:"messagesReceived"},{text:"Matches",value:"matches"},{text:"Sexual Orientation",value:"sexualOrientations"},{text:"User ID",value:"userId"}],results:[],colorPalette:["#58539E","#847CEB","#605BAB","#4A4685","#9498F2"]}),methods:{resetAll(){l.filterAll(),l.renderAll()},decodeDefault(e){try{return e&&"undefined"!==e?decodeURIComponent(escape(e)):"Unknown"}catch(t){return console.error(t),e||"Unknown"}},drawViz(){const e=n.Z1g("%Y-%m-%d"),t=n.i$Z("%B, %Y");this.results=this.values.map((t=>{const r=e(t.dateValue)||new Date(t.dateValue);return{date:r,dateStr:t.dateValue,month:n.F0B(r),day:n.rr1(r),app:this.decodeDefault(t.app),likes:+this.decodeDefault(t.likes)||0,passes:+this.decodeDefault(t.passes)||0,messagesSent:+this.decodeDefault(t.messagesSent)||0,messagesReceived:+this.decodeDefault(t.messagesReceived)||0,matches:+this.decodeDefault(t.matches)||0,sexualOrientations:"tinder"===t.app?JSON.parse(t.sexualOrientations).join(" | "):this.decodeDefault(t.sexualOrientations),userId:this.decodeDefault(t.userId)}})).filter((e=>(0,c.qb)(e.date)));const r=(0,main.Z)(this.results),o=new l.LineChart(`#likes-chart-${this.graphId}`),h=new l.LineChart(`#messages-chart-${this.graphId}`),f=new l.PieChart(`#app-chart-${this.graphId}`),m=new l.PieChart(`#sexualOrientations-chart-${this.graphId}`);function x(p,e){return e.userId in p.userIds?p.userIds[e.userId]++:p.userIds[e.userId]=1,p}function v(p,e){return p.userIds[e.userId]--,0===p.userIds[e.userId]&&delete p.userIds[e.userId],p}function y(){return{userIds:{}}}n.Ys(`#likes-chart-${this.graphId} a.reset`).on("click",(function(){o.filterAll(),l.redrawAll()})),n.Ys(`#messages-chart-${this.graphId} a.reset`).on("click",(function(){h.filterAll(),l.redrawAll()})),n.Ys(`#app-chart-${this.graphId} a.reset`).on("click",(function(){f.filterAll(),l.redrawAll()})),n.Ys(`#sexualOrientations-chart-${this.graphId} a.reset`).on("click",(function(){m.filterAll(),l.redrawAll()}));const k=r.dimension((e=>e.app)),w=r.dimension((e=>e.sexualOrientations)),I=r.dimension((e=>e.month)),C=k.group().reduce(x,v,y),A=w.group().reduce(x,v,y),$=I.group().reduceSum((e=>e.likes)),B=I.group().reduceSum((e=>e.passes)),V=I.group().reduceSum((e=>e.matches)),S=I.group().reduceSum((e=>e.messagesSent)),O=I.group().reduceSum((e=>e.messagesReceived)),P=250;let R=n.Ys(`#app-chart-${this.graphId}`).node().getBoundingClientRect().width;const D=Math.min(R,P);f.width(R).height(P).slicesCap(10).radius(D/4).innerRadius(D/8).externalLabels(50).dimension(k).group(C).valueAccessor((e=>Object.keys(e.value.userIds).length)).title((e=>e.key+": "+Object.keys(e.value.userIds).length+" user(s)")).drawPaths(!0).minAngleForLabel(.1).ordinalColors(this.colorPalette),f.on("pretransition",d.addPiePercentage),R=n.Ys(`#sexualOrientations-chart-${this.graphId}`).node().getBoundingClientRect().width,m.width(R).height(P).slicesCap(10).radius(D/4).innerRadius(D/8).externalLabels(50).dimension(w).group(A).valueAccessor((e=>Object.keys(e.value.userIds).length)).title((e=>e.key+": "+Object.keys(e.value.userIds).length+" user(s)")).drawPaths(!0).minAngleForLabel(.1).ordinalColors(this.colorPalette),m.on("pretransition",d.addPiePercentage);const _=n.Wem(this.results,(e=>e.date));R=n.Ys(`#likes-chart-${this.graphId}`).node().getBoundingClientRect().width,o.margins({top:20,left:40,right:20,bottom:20}).width(R).turnOnControls(!0).curve(n.FdL).xyTipsOn(!0).height(P).brushOn(!1).renderArea(!0).dimension(I).group($,"Likes").x(n.Xf().domain(_)).title("Likes",(e=>`${t(e.key)}: ${e.value} likes`)).legend((new l.Legend).x(R-100).y(5).itemHeight(13).gap(5)).elasticY(!0).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).clipPadding(10).yAxisLabel("Total ").ordinalColors(["#2ecc71","#e74c3c","#3498db"]),o.xAxis().ticks(10),o.yAxis().ticks(6),o.stack(B,"Passes"),o.title("Passes",(e=>`${t(e.key)}: ${e.value} passes`)),o.stack(V,"Matches"),o.title("Matches",(e=>`${t(e.key)}: ${e.value} matches`)),R=n.Ys(`#messages-chart-${this.graphId}`).node().getBoundingClientRect().width,h.margins({top:20,left:40,right:20,bottom:20}).width(R).turnOnControls(!1).curve(n.FdL).xyTipsOn(!0).height(P).brushOn(!1).renderArea(!0).dimension(I).group(S,"Messages Sent").x(n.Xf().domain(_)).legend((new l.Legend).x(R-110).y(5).itemHeight(13).gap(5)).elasticY(!0).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).clipPadding(10).yAxisLabel("Total ").ordinalColors(["#2c3e50","#58539E"]),h.xAxis().ticks(10),h.yAxis().ticks(6),h.stack(O,"Messages Received"),h.title("Messages Received",(e=>`${t(e.key)}: ${e.value} messages received`)),h.title("Messages Sent",(e=>`${t(e.key)}: ${e.value} messages sent`));const L=r.groupAll(),M=r.dimension((e=>e));new l.DataCount(`#dc-data-count-${this.graphId}`).crossfilter(r).groupAll(L).html({some:"<strong>%filter-count</strong> selected out of <strong>%total-count</strong> records | <a class='resetAll'>Reset All</a>",all:"All <strong>%total-count</strong> records selected. Please click on the graph to apply filters."}).on("pretransition",((e,filter)=>{this.results=M.top(L.value()),n.Ys(`#dc-data-count-${this.graphId} a.resetAll`).on("click",(()=>{l.filterAll(),l.renderAll()}))})),l.renderAll()}}},v=(0,r(1001).Z)(x,(function(){var e=this,t=e._self._c;return t("VContainer",[t("ChartViewVRowWebShare",[t("VCol",{attrs:{cols:"12"}},[t("VRow",[t("VCol",{attrs:{cols:"12",md:"8"}},[t("div",{attrs:{id:`likes-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("Likes / Passes / Matches per month")])])])]),t("VCol",{attrs:{cols:"12",md:"4"}},[t("div",{attrs:{id:`app-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("App")])]),t("ChartViewFilters")],1)])],1),t("VRow",[t("VCol",{attrs:{cols:"12",md:"8"}},[t("div",{attrs:{id:`messages-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("Messages per month")])])])]),t("VCol",{attrs:{cols:"12",md:"4"}},[t("div",{attrs:{id:`sexualOrientations-chart-${e.graphId}`}},[t("div",{staticStyle:{display:"flex"}},[t("strong",[e._v("Sexual Orientations")])]),t("ChartViewFilters")],1)])],1)],1)],1),t("VRow",[t("div",{staticClass:"dc-data-count",attrs:{id:`dc-data-count-${e.graphId}`}})]),t("VRow",[t("VCol",{attrs:{cols:"12"}},[t("UnitFilterableTable",e._b({},"UnitFilterableTable",{headers:e.header,items:e.results},!1))],1)],1)],1)}),[],!1,null,null,null).exports},18736:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var n=r(12555),l=r(40163),o=r(97888),d=r(9934),c={components:{BaseButton:l.Z,BaseButtonDownloadData:o.Z,BaseButtonShare:d.Z},mixins:[(0,n.Z)()]},h=(0,r(1001).Z)(c,(function(){var e=this,t=e._self._c;return t("VRow",e._b({ref:"domToImageNode"},"VRow",e.$attrs,!1),[e._t("default"),t("VCol",{staticClass:"dom-to-image-exclude",attrs:{cols:"12"}},[t("BaseButton",e._b({attrs:{icon:"mdiExport",text:"Export"},on:{click:e.exportImage}},"BaseButton",{progress:e.progress,status:e.status,error:e.error},!1)),t("BaseButtonDownloadData",e._b({},"BaseButtonDownloadData",{disabled:!e.blob,extension:e.extension,filename:e.filename,data:e.blob},!1)),t("BaseButtonShare",e._b({attrs:{"file-share":""}},"BaseButtonShare",{files:e.files,disabled:!e.files},!1))],1)],2)}),[],!1,null,null,null).exports},96622:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var n={},l=(0,r(1001).Z)(n,(function(){var e=this,t=e._self._c;return t("p",{staticClass:"filters"},[t("span",[e._v(" "+e._s(e.$t("Current filter"))+" "),t("span",{staticClass:"filter"})]),t("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null).exports},21297:function(e,t,r){r.r(t);var n=r(40290),l=r(18651),o=r(659);const d={props:{values:{type:Array,default:()=>[]},headers:{type:Array,default:()=>[]},messages:{type:Object,default:()=>({})}},data(){return{graphId:"graph_"+this.$store.state.xp.currentTab,totalCount:0,filterCount:0}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{drawViz(){},createTextFilterWidget(e,t="Search"){const r=new n.TextFilterWidget(e);return r.placeHolder(this.$tev(t,t)),r}}};t.default=(0,l.Z)(d,o.Z)},59201:function(e,t,r){r.r(t),r.d(t,{addPiePercentage:function(){return f},addXLabel:function(){return o},addYLabel:function(){return d},createCumulativeGroup:function(){return c},removeEmptyBins:function(){return h}});var n=r(46228),l=r(40290);function o(e,t){const r=e.svg().append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",e.width()/2).attr("y",e.height()-10).text(t),n=r.node().getBBox(),l=e.margins();r.attr("x",l.left+(e.width()-l.left-l.right)/2).attr("y",e.height()-Math.ceil(n.height)/2)}function d(e,t){const r=e.svg().append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-e.height()/2).attr("y",10).text(t),n=r.node().getBBox(),l=e.margins();r.attr("x",-l.top-(e.height()-l.top-l.bottom)/2).attr("y",Math.max(Math.ceil(n.height),l.left-Math.ceil(n.height)-5))}function c(e){return{all(){const t={};return e.all().map((function(e){return t[e.key[0]]?t[e.key[0]]+=e.value:t[e.key[0]]=e.value,{key:e.key,value:t[e.key[0]]}}))}}}function h(e){return{top:t=>e.top(1/0).filter((function(e){return 0!==e.value.count&&0!==e.value})).slice(0,t)}}function f(e){e.selectAll("text.pie-slice.pie-label").call((function(e){e.each((function(e){const t=n.Ys(this);let text=t.text();text.length>14&&(text=text.substring(0,14)+".. "),text.length>0&&(text=text+" ("+l.utils.printSingleValue((e.endAngle-e.startAngle)/(2*Math.PI)*100)+"%)"),t.text(text)}))}))}}}]);