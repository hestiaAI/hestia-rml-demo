"use strict";(("undefined"!=typeof self?self:this).webpackChunkDataExperience=("undefined"!=typeof self?self:this).webpackChunkDataExperience||[]).push([[8468],{68468:function(t,e,s){s.r(e),s.d(e,{default:function(){return l}});var i=s(60194),a=s(60171),r={mixins:[s(74097).default],props:{yAccessor:{type:String,required:!0},xAccessor:{type:String,default:""},dateAccessor:{type:String,default:""},yAxisMaxTickLength:{type:Number,default:20},margin:{type:Number,default:5},adjVertical:{type:Array,default:()=>[5,50]},adjHorizontal:{type:Array,default:()=>[150,150]},countLabel:{type:String,default:"records"},xLabel:{type:String,default:"records"},yLabel:{type:String,default:"companies"},dateFormat:{type:String,default:""}},data:()=>({total:0,minDate:null,maxDate:null,records:[],topKSlider:null,othersCheck:!1}),computed:{validProps(){let t=!0;return this.values.length?(this.dateAccessor&&!Object.keys(this.values[0]).includes(this.dateAccessor)&&(console.error("Date Accessor not found"),t=!1),Object.keys(this.values[0]).includes(this.yAccessor)||(console.error("Y Accessor not found"),t=!1),this.xAccessor&&!Object.keys(this.values[0]).includes(this.xAccessor)&&(console.error("X Accessor not found"),t=!1),t):(console.error("Values is empty"),t=!1,t)}},methods:{k:t=>`chart-view.top-row.${t}`,draw(){const t=this.records.slice(0,this.othersCheck?this.topKSlider-1:this.topKSlider);this.othersCheck&&(t.push({key:"Others",value:i.sum(this.records.slice(this.topKSlider),(t=>t.value))}),t.sort((function(t,e){return i.descending(t.value,e.value)}))),this.xScale.domain(i.extent(t,(t=>t.value))),this.yScale.domain(t.map((function(t){return t.key})));const e=this.svg.selectAll(".bars").data(t,(t=>t.key)),s=this;e.enter().append("rect").attr("class","bars").attr("x",5).attr("y",(t=>this.yScale(t.key))).attr("width",0).attr("height",this.yScale.bandwidth()).attr("fill",this.colorPalette[0]).on("mouseover",(function(t,e){i.select(this).style("opacity",.7),i.select(this.parentNode).append("text").attr("class","barsLabel").text(e.value).attr("text-anchor","start").attr("alignment-baseline","middle").attr("x",s.xScale(e.value)+15).attr("y",s.yScale(e.key)+s.yScale.bandwidth()/2).style("font-size","0.8rem").style("font-weight","bold").style("fill","#0A0A0A")})).on("mouseleave",(function(t,e){i.select(this).style("opacity",1),i.select(".barsLabel").remove()})).merge(e).transition().duration(1e3).delay(200).attr("y",(t=>this.yScale(t.key))).attr("width",(t=>this.xScale(t.value)+5)).attr("height",this.yScale.bandwidth()),e.exit().transition().duration(1e3).attr("width",0).remove(),i.select(".yAxis").transition().duration(1e3).delay(200).call(this.yAxis),i.selectAll(".yAxis g text").transition().duration(1e3).delay(200).style("font-size",1.8/Math.log(this.topKSlider)+"rem"),i.select(".xAxis").transition().duration(1e3).delay(200).call(this.xAxis)},drawViz(){if(!this.validProps)return;const t=this.dateFormat?i.timeParse(this.dateFormat):t=>new Date(t),e=t=>this.$d(t,"dateOnly",this.$i18n.locale);if(this.dateAccessor){const[s,r]=i.extent(this.values,(e=>t(e[this.dateAccessor])));if(!s||!r)throw new Error("Unable to parse date fields");this.minDate=e(s),this.maxDate=e(r)}this.total=this.xAccessor?i.sum(this.values,(t=>t[this.xAccessor])):this.values.length,this.topKSlider=Math.min(20,this.total),this.records=(0,a.b1)().key((t=>t[this.yAccessor])).rollup((t=>i.sum(t,(t=>this.xAccessor?t[this.xAccessor]:1)))).entries(this.values).sort((function(t,e){return i.descending(t.value,e.value)}));i.select("#"+this.graphId+" svg").remove(),this.svg=i.select("#"+this.graphId).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","-"+this.adjHorizontal[0]+" -"+this.adjVertical[0]+" "+(300+i.sum(this.adjHorizontal))+" "+(380+i.sum(this.adjVertical))).style("padding",this.padding).style("margin",this.margin).classed("svg-content",!0),this.xScale=i.scaleLinear().range([0,300]),this.yScale=i.scaleBand().range([0,380]).paddingInner(.1);const r=i.axisLeft(this.yScale).tickFormat((t=>function(t,e){return t.length>e?t.slice(0,e)+"..":t}(t,this.yAxisMaxTickLength))).tickSizeOuter(0),n=i.axisBottom(this.xScale).ticks(4);this.xAxis=n,this.yAxis=r,this.svg.append("g").attr("class","xAxis").attr("transform","translate(0,380)").call(n).append("text").attr("dy",".75em").attr("y",30).attr("x",150).style("text-anchor","middle").text(this.xLabel),this.svg.append("g").attr("class","yAxis").call(r),this.draw()}}},n=r,o=(0,s(1001).Z)(n,(function(){var t=this,e=t._self._c;return t.validProps?e("VContainer",[e("VRow",{attrs:{dense:""}},[e("VCol",{staticClass:"text-center",attrs:{cols:"12",md:"12"}},[e("i18n",{attrs:{tag:"p",path:t.k("heading")},scopedSlots:t._u([{key:"total",fn:function(){return[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.total)}})]},proxy:!0},{key:"countLabel",fn:function(){return[t._v(" "+t._s(t.countLabel)+" ")]},proxy:!0},{key:"minDate",fn:function(){return[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.minDate)}})]},proxy:!0},{key:"maxDate",fn:function(){return[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.maxDate)}})]},proxy:!0}],null,!1,923081494)})],1)],1),e("VRow",{attrs:{justify:"center",dense:""}},[e("VCol",{staticStyle:{position:"relative"},attrs:{cols:"12",md:"7"}},[e("VMenu",{attrs:{"offset-x":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:r}){return[e("VBtn",t._g(t._b({staticStyle:{position:"absolute",right:"0","z-index":"10"},attrs:{icon:""}},"VBtn",r,!1),s),[e("VIcon",{attrs:{small:""}},[t._v(" $vuetify.icons.mdiCog ")])],1)]}}],null,!1,2520745846)},[e("VCard",{staticStyle:{width:"300px"}},[e("VCardTitle",[t._v(t._s(t.$t("Settings")))]),e("VDivider"),e("VCardText",[e("VRow",{staticClass:"mt-3"},[e("VCol",[e("VSlider",{attrs:{label:`NÂ° ${t.$t("of")} ${t.yLabel}`,"thumb-color":"primary","thumb-label":"always",min:"1",max:Math.min(t.total,50),"hide-details":"",dense:""},on:{change:t.draw},model:{value:t.topKSlider,callback:function(e){t.topKSlider=e},expression:"topKSlider"}})],1)],1),e("VRow",[e("VCol",[e("VCheckbox",{attrs:{dense:"",label:t.$t("Display Others"),"hide-details":""},on:{change:t.draw},model:{value:t.othersCheck,callback:function(e){t.othersCheck=e},expression:"othersCheck"}})],1)],1)],1)],1)],1),e("div",{staticStyle:{position:"relative"},attrs:{id:t.graphId}})],1)],1)],1):t._e()}),[],!1,null,"be13dd44",null),l=o.exports},60171:function(t,e,s){s.d(e,{XP:function(){return y},b1:function(){return o}});var r="$";function n(){}function i(t,e){var s=new n;if(t instanceof n)t.each((function(t,e){s.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)s.set(i,t[i]);else for(;++i<a;)s.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)s.set(o,t[o]);return s}n.prototype=i.prototype={constructor:n,has:function(t){return r+t in this},get:function(t){return this[r+t]},set:function(t,e){return this[r+t]=e,this},remove:function(t){var e=r+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===r&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===r&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===r&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===r&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===r&&++t;return t},empty:function(){for(var t in this)if(t[0]===r)return!1;return!0},each:function(t){for(var e in this)e[0]===r&&t(this[e],e.slice(1),this)}};var a=i;function o(){var t,e,s,r=[],n=[];function i(s,n,o,l){if(n>=r.length)return null!=t&&s.sort(t),null!=e?e(s):s;for(var c,u,h,d=-1,f=s.length,p=r[n++],y=a(),v=o();++d<f;)(h=y.get(c=p(u=s[d])+""))?h.push(u):y.set(c,[u]);return y.each((function(t,e){l(v,e,i(t,n,o,l))})),v}function o(t,s){if(++s>r.length)return t;var i,a=n[s-1];return null!=e&&s>=r.length?i=t.entries():(i=[],t.each((function(t,e){i.push({key:e,values:o(t,s)})}))),null!=a?i.sort((function(t,e){return a(t.key,e.key)})):i}return s={object:function(t){return i(t,0,l,c)},map:function(t){return i(t,0,u,h)},entries:function(t){return o(i(t,0,u,h),0)},key:function(t){return r.push(t),s},sortKeys:function(t){return n[r.length-1]=t,s},sortValues:function(e){return t=e,s},rollup:function(t){return e=t,s}}}function l(){return{}}function c(t,e,s){t[e]=s}function u(){return a()}function h(t,e,s){t.set(e,s)}function d(){}var f=a.prototype;function y(t){var e=[];for(var s in t)e.push(s);return e}d.prototype=function(t,e){var s=new d;if(t instanceof d)t.each((function(t){s.add(t)}));else if(t){var r=-1,n=t.length;if(null==e)for(;++r<n;)s.add(t[r]);else for(;++r<n;)s.add(e(t[r],r,t))}return s}.prototype={constructor:d,has:f.has,add:function(t){return this[r+(t+="")]=t,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each}}}]);