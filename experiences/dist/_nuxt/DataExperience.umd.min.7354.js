"use strict";(("undefined"!=typeof self?self:this).webpackChunkDataExperience=("undefined"!=typeof self?self:this).webpackChunkDataExperience||[]).push([[7354,5701,2027,6622,9814,5225],{27354:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var s=a(60194),i=a(40290),r=a(26641),n=a(74097),u=a(85225),o=a(1949),l=a(65701),d=a(96622),g=a(92027),p=a(36983),c=a(49814);i.config.defaultColors(s.schemePaired);var h={components:{ChartViewVRowWebShare:l.default,ChartViewFilters:d.default,ChartViewDcFilterCount:g.default,UnitFilterableTable:p.Z,ChartViewTextSelectTimeRange:c.default},mixins:[n.default],data:()=>({header:[{text:"Sender",value:"senderName"},{text:"Message",value:"messageContent"},{text:"Sent on",value:"dateStr"}],results:[]}),methods:{drawViz(){const t=s.timeFormat("%B %d, %Y");this.results=this.values.map((t=>{const e=new Date(t.sendDatetime);return{senderName:decodeURIComponent(escape(t.senderName)),messageContent:decodeURIComponent(escape(t.messageContent)),date:e,dateStr:(0,o.K1)(e),month:s.timeMonth(e),day:s.timeDay(e),weekDay:e.getDay(),hour:s.timeHour(e).getHours()}}));const e=new i.LineChart(`#messages-chart-${this.graphId}`),a=new i.BarChart(`#range-chart-${this.graphId}`),n=new i.RowChart(`#user-chart-${this.graphId}`),l=new i.BarChart(`#hour-chart-${this.graphId}`),d=new i.RowChart(`#week-chart-${this.graphId}`),c=this.createTextFilterWidget(`#user-search-${this.graphId}`);s.select(`#hour-chart-${this.graphId} a.reset`).on("click",(function(){l.filterAll(),i.redrawAll()})),s.select(`#user-chart-${this.graphId} a.reset`).on("click",(function(){n.filterAll(),i.redrawAll()})),s.select(`#week-chart-${this.graphId} a.reset`).on("click",(function(){d.filterAll(),i.redrawAll()})),s.select(`#messages-chart-${this.graphId} a.reset`).on("click",(function(){e.filterAll(),a.filterAll(),i.redrawAll()}));const h=(0,r.Z)(this.results),g=h.groupAll();this.totalCount=h.size(),this.filterCount=this.totalCount,h.onChange((()=>{this.results=f.top(g.value()),this.filterCount=h.allFiltered().length}));const p=h.dimension((t=>`${this.$days()[t.weekDay]}`)),m=h.dimension((t=>t.senderName)),f=h.dimension((t=>t.month)),C=h.dimension((t=>t.day)),w=h.dimension((t=>t.hour));c.dimension(h.dimension((t=>t.senderName.toLowerCase())));const x=p.group().reduceCount(),b=m.group().reduceCount(),v=w.group().reduceCount(),y=f.group().reduceCount(),k=C.group().reduceCount();l.width(s.select(`#hour-chart-${this.graphId}`).node().getBoundingClientRect().width).height(180).margins({top:10,right:10,bottom:20,left:40}).dimension(w).group(v).centerBar(!0).gap(1).x(s.scaleLinear().domain([0,23])).ordinalColors(this.colorPalette).yAxis(),l.xAxis().tickFormat((t=>t+":00")).ticks(7),d.width(s.select(`#week-chart-${this.graphId}`).node().getBoundingClientRect().width).height(180).margins({top:10,left:10,right:10,bottom:20}).group(x).dimension(p).ordinalColors(this.colorPalette).label((t=>t.key)).title((t=>t.value)).elasticX(!0).xAxis().ticks(4),d.ordering((t=>this.$days().indexOf(t.key))),n.width(s.select(`#user-chart-${this.graphId}`).node().getBoundingClientRect().width).height(525).margins({top:20,left:10,right:10,bottom:20}).group((0,u.removeEmptyBins)(b)).dimension(m).ordinalColors(this.colorPalette).label((t=>t.key)).data((t=>t.top(20))).title((t=>t.value)).elasticX(!0).xAxis().ticks(4);const _=f.bottom(1).length>0?f.bottom(1)[0].month:null,B=f.top(1).length>0?f.top(1)[0].day:null;e.margins({top:20,left:40,right:20,bottom:20}).width(s.select(`#messages-chart-${this.graphId}`).node().getBoundingClientRect().width).turnOnControls(!1).curve(s.curveMonotoneX).xyTipsOn(!0).height(180).brushOn(!1).renderArea(!0).dimension(f).group(y).x(s.scaleTime().domain([_,B])).title((e=>t(e.key)+": "+e.value+" likes")).elasticX(!0).elasticY(!0).rangeChart(a).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).clipPadding(10).yAxisLabel(this.messages["Total Messages"]).ordinalColors(this.colorPalette),e.xAxis().ticks(10),e.yAxis().ticks(6),e.filterAll(),a.width(s.select(`#range-chart-${this.graphId}`).node().getBoundingClientRect().width).height(40).margins({top:0,right:10,bottom:20,left:40}).dimension(C).group(k).centerBar(!0).gap(1).x(s.scaleTime().domain([_,B])).valueAccessor((t=>t.value.count)).label((t=>t.key)).round(s.timeDay.round).alwaysUseRounding(!0).xUnits(s.timeDays).ordinalColors(this.colorPalette).yAxis().ticks(0),i.renderAll()}}},m=h,f=(0,a(1001).Z)(m,(function(){var t=this,e=t._self._c;return e("VContainer",[e("ChartViewVRowWebShare",[e("VCol",{attrs:{cols:"12"}},[e("VRow",[e("VCol",{attrs:{cols:"12",md:"8"}},[e("VRow",[e("VCol",{attrs:{cols:"12"}},[e("div",{attrs:{id:`messages-chart-${t.graphId}`}},[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.messages["Messages Exchanged Over Time"])}}),e("ChartViewFilters")],1),e("div",{staticClass:"range-chart",attrs:{id:`range-chart-${t.graphId}`}},[e("ChartViewTextSelectTimeRange")],1)])],1),e("VRow",[e("VCol",{attrs:{cols:"12",md:"6"}},[e("div",{attrs:{id:`hour-chart-${t.graphId}`}},[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.messages["Time of Day"])}}),e("ChartViewFilters")],1)]),e("VCol",{attrs:{cols:"12",md:"6"}},[e("div",{attrs:{id:`week-chart-${t.graphId}`}},[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.messages.Day)}}),e("ChartViewFilters")],1)])],1)],1),e("VCol",{attrs:{cols:"12",md:"4"}},[e("div",{attrs:{id:`user-chart-${t.graphId}`}},[e("div",{staticStyle:{display:"flex"}},[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.messages["Top Users"])}}),e("VSpacer"),e("div",{attrs:{id:`user-search-${t.graphId}`}})],1),e("ChartViewFilters")],1)])],1)],1)],1),e("ChartViewDcFilterCount",t._b({},"ChartViewDcFilterCount",{filterCount:t.filterCount,totalCount:t.totalCount},!1)),e("VRow",[e("VCol",{attrs:{cols:"12"}},[e("UnitFilterableTable",t._b({},"UnitFilterableTable",{headers:t.header,items:t.results,viewBlockTranslationPrefix:t.viewBlockTranslationPrefix},!1))],1)],1)],1)}),[],!1,null,null,null),b=f.exports},65701:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var s=a(14226),i=a(23628),r=a(97888),n=a(39474),o={components:{BaseButton:i.Z,BaseButtonDownloadData:r.Z,BaseButtonShare:n.Z},mixins:[(0,s.Z)()]},l=(0,a(1001).Z)(o,(function(){var t=this,e=t._self._c;return e("VRow",t._b({ref:"domToImageNode"},"VRow",t.$attrs,!1),[t._t("default"),e("VCol",{staticClass:"dom-to-image-exclude webshare d-flex",attrs:{cols:"12"}},[e("div",{staticClass:"webshare__export-button"},[e("BaseButton",t._b({attrs:{"mdi-icon":"mdiExport",text:"Export"},on:{click:t.exportImage}},"BaseButton",{progress:t.progress,status:t.status,error:t.error},!1))],1),e("div",{staticClass:"webshare__download-button"},[e("BaseButtonDownloadData",t._b({},"BaseButtonDownloadData",{disabled:!t.blob,extension:t.extension,filename:t.filename,data:t.blob},!1))],1),e("div",{staticClass:"webshare__share-button"},[e("BaseButtonShare",t._b({attrs:{"file-share":""}},"BaseButtonShare",{files:t.files,disabled:!t.files},!1))],1)])],2)}),[],!1,null,null,null),g=l.exports},92027:function(t,e,a){a.r(e),a.d(e,{default:function(){return o}});var s=a(40290),r={mixins:[a(85027).Z],props:{filterCount:{type:Number,required:!0},totalCount:{type:Number,required:!0},rowLabel:{type:String,default:null}},methods:{resetAll(){s.filterAll(),s.renderAll()}}},n=(0,a(1001).Z)(r,(function(){var t=this,e=t._self._c;return e("VRow",[t.filterCount===t.totalCount?[e("i18n",{attrs:{tag:"div",path:t.kViewBlock("selected-all")},scopedSlots:t._u([{key:"totalCount",fn:function(){return[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.totalCount)}})]},proxy:!0},t.rowLabel?{key:"rowLabel",fn:function(){return[t._v(" "+t._s(t.rowLabel)+" ")]},proxy:!0}:null],null,!0)}),e("span",{directives:[{name:"t",rawName:"v-t",value:"click-graph",expression:"'click-graph'"}]})]:[e("i18n",{attrs:{tag:"div",path:t.kViewBlock("selected-some")},scopedSlots:t._u([t._l({filterCount:t.filterCount,totalCount:t.totalCount},(function(a,r){return{key:r,fn:function(){return[e("span",{key:r,staticClass:"font-weight-bold",domProps:{textContent:t._s(a)}})]},proxy:!0}})),t.rowLabel?{key:"rowLabel",fn:function(){return[t._v(" "+t._s(t.rowLabel)+" ")]},proxy:!0}:null],null,!0)}),e("span",[t._v("Â | "),e("a",{directives:[{name:"t",rawName:"v-t",value:"Reset All",expression:"'Reset All'"}],on:{click:t.resetAll}})])]],2)}),[],!1,null,null,null),o=n.exports},96622:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i={},r=(0,a(1001).Z)(i,(function(){var t=this,e=t._self._c;return e("p",{staticClass:"filters"},[e("span",[t._v(" "+t._s(t.$t("Current filter"))+" "),e("span",{staticClass:"filter"})]),e("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null),u=r.exports},49814:function(t,e,a){a.r(e),a.d(e,{default:function(){return n}});var r=(0,a(1001).Z)({},(function(){var t=this,e=t._self._c;return e("p",{staticClass:"muted pull-right text-subtitle-2 mr-4 mb-1"},[e("span",{domProps:{innerHTML:t._s(t.$t("select-time-range"))}}),t._t("default")],2)}),[],!1,null,null,null),n=r.exports},85225:function(t,e,a){a.r(e),a.d(e,{addPiePercentage:function(){return u},addXLabel:function(){return s},addYLabel:function(){return i},createCumulativeGroup:function(){return o},removeEmptyBins:function(){return l}});var r=a(60194),n=a(40290);function s(t,e){const a=t.svg().append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",t.width()/2).attr("y",t.height()-10).text(e),r=a.node().getBBox(),n=t.margins();a.attr("x",n.left+(t.width()-n.left-n.right)/2).attr("y",t.height()-Math.ceil(r.height)/2)}function i(t,e){const a=t.svg().append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-t.height()/2).attr("y",10).text(e),r=a.node().getBBox(),n=t.margins();a.attr("x",-n.top-(t.height()-n.top-n.bottom)/2).attr("y",Math.max(Math.ceil(r.height),n.left-Math.ceil(r.height)-5))}function o(t){return{all(){const e={};return t.all().map((function(t){return e[t.key[0]]?e[t.key[0]]+=t.value:e[t.key[0]]=t.value,{key:t.key,value:e[t.key[0]]}}))}}}function l(t){return{top:e=>t.top(1/0).filter((function(t){return 0!==t.value.count&&0!==t.value})).slice(0,e)}}function u(t){t.selectAll("text.pie-slice.pie-label").call((function(t){t.each((function(t){const e=r.select(this);let a=e.text();a.length>14&&(a=a.substring(0,14)+".. "),a.length>0&&(a=a+" ("+n.utils.printSingleValue((t.endAngle-t.startAngle)/(2*Math.PI)*100)+"%)"),e.text(a)}))}))}}}]);