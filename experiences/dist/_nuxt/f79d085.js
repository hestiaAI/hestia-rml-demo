(window.webpackJsonp=window.webpackJsonp||[]).push([[19,73],{1312:function(e,t,n){"use strict";n.r(t);var r=n(2);n(63),n(28),n(134),n(36),n(10),n(8),n(14),n(3),n(19),n(9),n(20);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var c,l,d,f=(c="<\/script>",l=["d1a3f4spazzrp4.cloudfront.net/kepler.gl/uber-fonts/4.0.0/superfine.css","api.tiles.mapbox.com/mapbox-gl-js/v1.1.1/mapbox-gl.css"].map((function(s){return'<link href="https://'.concat(s,'" rel="stylesheet" />')})),d=["react@16.8.4/umd/react.production.min.js","react-dom@16.8.4/umd/react-dom.production.min.js","redux@3.7.2/dist/redux.js","react-redux@7.1.3/dist/react-redux.min.js","styled-components@4.1.3/dist/styled-components.min.js","kepler.gl@2.5.5/umd/keplergl.min.js"].map((function(s){return'<script src="https://unpkg.com/'.concat(s,'" crossorigin>').concat(c)})),'\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="UTF-8" />\n          '.concat(l.join("\n"),"\n          ").concat(d.join("\n"),'\n          <style type="text/css">\n            body { margin: 0; padding: 0; overflow: hidden; }\n          </style>\n        </head>\n        <body>\n          <div id="app"></div>\n          \x3c!--\n          // eslint-next-disable-line no-useless-escape --\x3e\n          <script src="').concat("https://unpkg.com/@andreaskundig/kepler-iframe@1.0.0/index.js",'" type="module">').concat(c,"\n        </body>\n      </html>")),m={props:{args:{type:Object,default:function(){return{}}},height:{type:Number,default:500}},data:function(){return{loaded:!1,iframeHtml:f}},computed:{finalArgs:function(){var e=this.args;return e.mapboxToken=this.$store.state.config.mapboxToken,e}},watch:{finalArgs:function(e){this.loaded&&this.callIframeFunction("update",e)}},methods:{onload:function(){var e=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({height:this.height,width:this.width=this.$refs.iframe.offsetWidth},this.finalArgs);this.callIframeFunction("init",e),this.callIframeFunction("update",this.finalArgs),this.loaded=!0},callIframeFunction:function(e){var t,n=null===(t=this.$refs.iframe.contentWindow)||void 0===t?void 0:t[e];if(n)try{for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];n.apply(void 0,o)}catch(e){console.error("problem in iframe",e)}else console.error("iframe does not have a function called "+e)}}},h=m,v=n(40),y=n(44),_=n.n(y),w=n(998),component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VCard",{style:"width: 100%; height: "+e.height+"px"},[e.loaded?e._e():n("div",{staticClass:"d-flex flex-column align-center justify-center",style:"width: 100%; height: "+e.height+"px"},[n("BaseProgressCircular",{attrs:{size:"64",width:"4",color:"primary"}})],1),e._v(" "),n("iframe",{ref:"iframe",staticClass:"frame",style:"width: 100%; height: "+e.height+"px",attrs:{srcDoc:e.iframeHtml,frameborder:"0"},on:{load:e.onload}})])}),[],!1,null,null,null);t.default=component.exports;_()(component,{BaseProgressCircular:n(599).default}),_()(component,{VCard:w.a})},1559:function(e,t,n){"use strict";n.r(t);n(3),n(41),n(14),n(63),n(10),n(1890);var r=n(1919),o=n(946),c=n(1920),l={mixins:[n(991).default],props:{keplerConfig:{type:Object,default:function(){return null}},placeName:{type:String,default:function(){return""}}},data:function(){return{listOfNames:this.getOrderedList(),placeSelected:this.getSelectedName()}},computed:{total:function(){return this.values.length},total_time:function(){var e=this.get_durations().reduce((function(a,b){return a+b}),0);return this.convertHMS(e)},mean_time:function(){var e=this.get_durations(),t=e.reduce((function(a,b){return a+b}),0)/e.length||0;return this.convertHMS(t)},associated_names:function(){var e=this,table=this.values.filter((function(t){return t.winnerName===e.placeSelected}));return Object(r.a)(table,(function(e){return e.loserName})).map((function(e){return{name:e.loserName,latitude:e.loserLatitude,longitude:e.loserLongitude,confidence:e.loserConfidence}}))},keplerData:function(){var e=this,t=Object.keys(this.associated_names[0]);return{fields:t.map((function(t){var n;return{name:(null===(n=e.messages)||void 0===n?void 0:n.keplerFields[t])||t}})),rows:this.associated_names.map((function(e){return t.map((function(t){return e[t]}))}))}},keplerArgs:function(){return{keplerData:this.keplerData,config:this.keplerConfig}}},methods:{getSelectedName:function(){var e=this.getOrderedList();return""!==this.placeName?this.placeName:e[0]},getOrderedList:function(){var e=Object(o.a)(this.values,"winnerName"),t=Object.keys(e).map((function(t){return{winnerName:t,count:e[t].length}}));return t=Object(c.a)(t,"count","desc").map((function(e){return e.winnerName}))},getFilteredList:function(){var e=this;return this.values.filter((function(t){return t.winnerName===e.placeSelected}))},compute_duration:function(e,t){var n=new Date(e).getTime(),r=new Date(t).getTime();return Math.floor(Math.abs(n-r)/1e3)},get_durations:function(){var e=this,table=this.values.filter((function(t){return t.winnerName===e.placeSelected})).map((function(e){return[e.startTimestamp,e.endTimestamp]}));return Object(r.a)(table,(function(e){return e[0]})).map((function(t){return e.compute_duration(t[0],t[1])}))},computeEntropy:function(){for(var e=this.getProbababilities(),t=0,i=0;i<e.length;i++){for(var n=0,r=0;r<e[i].length;r++)n+=e[i][r]*Math.log2(e[i][r]);t+=-n}return(t/e.length).toPrecision(4)},getProbababilities:function(){for(var e=this.getFilteredList(),t=Object(o.a)(e,(function(e){return e.startTimestamp})),n=Object.keys(t),r=[],i=0;i<n.length;i++){for(var c=t[n[i]],l=[c[0].winnerConfidence/100],d=0;d<c.length;d++)l.push(c[d].loserConfidence/100);r.push(l)}return r},convertHMS:function(e){var t=Math.round(e),n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),o=t-3600*n-60*r;return n<10&&(n="0"+n),r<10&&(r="0"+r),o<10&&(o="0"+o),n+"h"+r+"m"+o+"s"}}},d=n(40),f=n(44),m=n.n(f),h=n(1109),v=n(958),y=n(945),_=n(982),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VContainer",[n("VRow",[""===e.placeName?n("VCol",{attrs:{cols:"12"}},[n("VSelect",{attrs:{items:e.listOfNames,label:e.messages.Place},model:{value:e.placeSelected,callback:function(t){e.placeSelected=t},expression:"placeSelected"}})],1):e._e()],1),e._v(" "),n("VRow",[n("VCol",{attrs:{cols:"12"}},[n("p",{staticClass:"text-subtitle-2"},[e._v("\n        "+e._s(e.messages["total-time-spent"])+" "+e._s(e.placeSelected)+": "+e._s(e.total_time)+". "),n("br"),e._v(" "),n("br"),e._v("\n        "+e._s(e.messages["mean-time-spent"])+" "+e._s(e.placeSelected)+": "+e._s(e.mean_time)+". "),n("br"),e._v(" "),n("br"),e._v("\n        "+e._s(e.messages.entropy)+" "+e._s(e.placeSelected)+": "+e._s(e.computeEntropy())+". "),n("br"),e._v("\n        "+e._s(e.messages["entropy-info"])+" "+e._s(e.placeSelected)+".\n      ")])])],1),e._v(" "),0!==e.getFilteredList().length?[n("VRow",[n("VCol",{attrs:{cols:"12"}},[n("p",{staticClass:"text-subtitle-2"},[e._v("\n          "+e._s(e.messages["other-candidates"])+" "+e._s(e.placeSelected)+":\n        ")]),e._v(" "),n("UnitKepler",{attrs:{args:e.keplerArgs}})],1)],1)]:e._e()],2)}),[],!1,null,null,null);t.default=component.exports;m()(component,{UnitKepler:n(1312).default}),m()(component,{VCol:h.a,VContainer:v.a,VRow:y.a,VSelect:_.a})},973:function(e,t,n){"use strict";n(46),n(28);t.a={methods:{kViewBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",pre=t?"".concat(t,"."):"",r=n?".".concat(n):"",o=this.$route,c=o.params.experience,l=o.hash,d=l.slice(1);return"experiences.".concat(c,".viewBlocks.").concat(d,".").concat(pre).concat(e).concat(r)}}}},991:function(e,t,n){"use strict";n.r(t);var r=n(1001),o=n(901),c=n(973),l={props:{id:{type:String,required:!0},values:{type:Array,default:function(){return[]}},headers:{type:Array,default:function(){return[]}},messages:{type:Object,default:function(){return{}}}},data:function(){return{graphId:"graph_"+this.id,totalCount:null,filterCount:null}},mounted:function(){this.drawViz()},watch:{values:function(){this.drawViz()}},methods:{drawViz:function(){},createTextFilterWidget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Search",n=new r.TextFilterWidget(e);return n.placeHolder(this.$tev(t,t)),n}}};t.default=Object(o.a)(l,c.a)}}]);