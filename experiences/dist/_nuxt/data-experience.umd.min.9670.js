"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[9670,1633],{89670:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var n=i(46228),l=i(89295),r={name:"DateFilter",components:{TimeFilter:i(11633).default},props:{values:{type:Array,default:()=>[]},isDatetime:{type:Boolean,default:!1}},data(){return{dateFormatter:l.vh,days:this.$days(),daysAuthorized:this.$days(),sliderRange:[],timeFilterFunction:null}},computed:{parser(){return this.isDatetime?l.rk:l.RX},dates(){return this.values.map((e=>this.parser(e))).filter((e=>null!==e))},dateExtent(){return n.Wem(this.dates)},numberOfDays(){return n.rr1.count(...this.dateExtent)},timeScale(){return n.Xf().domain(this.dateExtent).range([0,this.numberOfDays])},dateRange(){return[this.getDate(this.sliderRange[0]),this.getDate(this.sliderRange[1])]},allDays(){return this.daysAuthorized.length===this.days.length},filterFunction(){return!this.timeFilterFunction&&this.allDays&&JSON.stringify(this.sliderRange)===JSON.stringify([0,this.numberOfDays])?null:e=>{const t=this.parser(e);return(!e||t>=this.dateRange[0]&&t<=this.dateRange[1]&&this.daysAuthorized.includes(this.days[t.getDay()]))&&(!this.timeFilterFunction||this.timeFilterFunction(e))}}},mounted(){this.sliderRange=[0,this.numberOfDays]},methods:{selectAll(){this.$nextTick((()=>{this.allDays?this.daysAuthorized=[]:this.daysAuthorized=this.days.slice(),this.filterChange()}))},getDate(e){return this.timeScale.invert(e)},timeFilterChange(e){this.timeFilterFunction=e,this.filterChange()},filterChange(){this.$emit("filter-change",this.filterFunction)},reset(){this.daysAuthorized=this.days.slice(),this.sliderRange=[0,this.numberOfDays],this.isDatetime&&this.$refs.timeFilter.reset(),this.filterChange()}}},d=r,o=(0,i(1001).Z)(d,(function(){var e=this,t=e._self._c;return t("div",[e.dates.length?t("div",[t("VRow",[t("VCol",[t("div",{staticClass:"d-flex justify-space-between"},e._l(["From","To"],(function(i,s){return t("div",{key:s},[t("div",{staticClass:"subtitle-2"},[e._v(" "+e._s(e.$t(i))+": ")]),t("VChip",{attrs:{label:"",outlined:""}},[e._v(" "+e._s(e.dateFormatter(e.dateRange[s]))+" ")])],1)})),0),t("VRangeSlider",{attrs:{min:0,max:e.numberOfDays,"track-color":"primary","thumb-color":"#2c3e50","tick-size":"0","hide-details":"",dense:"",step:"1"},on:{change:e.filterChange},model:{value:e.sliderRange,callback:function(t){e.sliderRange=t},expression:"sliderRange"}})],1)],1),e.isDatetime?t("TimeFilter",e._b({ref:"timeFilter",on:{"filter-change":e.timeFilterChange}},"TimeFilter",{isDatetime:e.isDatetime},!1)):e._e(),t("div",{staticClass:"d-flex justify-space-between align-center text-subtitle-1 mt-3 mb-3"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"Day of week",expression:"'Day of week'"}]}),t("VBtn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo","x-small":""},on:{mousedown:function(e){e.preventDefault()},click:e.selectAll}},[e._v(" "+e._s(e.$t(e.allDays?"Unselect All":"Select All"))+" ")])],1),t("VRow",e._l(e.days,(function(i){return t("VCol",{key:i,staticClass:"pt-0 pb-0",attrs:{cols:"12",md:"6"}},[t("VCheckbox",{attrs:{label:i,color:"primary",value:i,"hide-details":"",dense:""},on:{change:e.filterChange},model:{value:e.daysAuthorized,callback:function(t){e.daysAuthorized=t},expression:"daysAuthorized"}})],1)})),1)],1):t("div",{attrs:{align:"center"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"No valid dates found",expression:"'No valid dates found'"}],staticClass:"caption"})])])}),[],!1,null,null,null),h=o.exports},11633:function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i(89295);const l="00:00",r="23:59";var d={name:"TimeFilter",props:{isDatetime:{type:Boolean,default:!1}},data:()=>({allDay:!0,startTime:l,endTime:r}),computed:{parser(){return this.isDatetime?n.rk:n.bj},filterFunction(){return this.allDay?null:e=>{const t=this.parser(e);if(!e||!t)return!0;const i=this.toMilliseconds(`${t.getHours()}:${t.getMinutes()}`),s=this.toMilliseconds(this.startTime),a=this.toMilliseconds(this.endTime);return i>=s&&i<=a}}},methods:{toMilliseconds(e){const[t,i]=e.split(":").map((e=>parseInt(e)));return 3600*t*1e3+60*i*1e3},filterChange(){this.allDay=this.startTime===l&&this.endTime===r,this.$emit("filter-change",this.filterFunction)},reset(){this.startTime=l,this.endTime=r,this.filterChange()}}},o=d,h=(0,i(1001).Z)(o,(function(){var e=this,t=e._self._c;return t("VRow",[t("VCol",[t("div",{staticClass:"d-flex justify-space-between align-center text-subtitle-1 mt-3 mb-3"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"Time",expression:"'Time'"}]}),t("VCheckbox",{attrs:{label:e.$t("All Day"),color:"primary","hide-details":"",disabled:e.allDay,dense:""},on:{click:e.reset},model:{value:e.allDay,callback:function(t){e.allDay=t},expression:"allDay"}})],1),t("div",{staticClass:"d-flex justify-space-between"},[t("VTextField",{staticClass:"mr-3",attrs:{label:e.$t("Min value"),type:"time"},on:{change:function(t){return e.filterChange()}},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),t("VTextField",{staticClass:"ml-3",attrs:{label:e.$t("Max value"),min:e.startTime,type:"time"},on:{change:function(t){return e.filterChange()}},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)])],1)}),[],!1,null,null,null),c=h.exports}}]);