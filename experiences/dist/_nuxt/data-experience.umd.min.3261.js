"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[3261,1297],{33261:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var r=s(16069),n=s(67900);var l=function(e,t){return e&&e.length?(0,n.Z)(e,(0,r.Z)(t,2)):[]},o=s(15643),u=s(5505),c=s(27771);var d=function(e,t,s,a){return null==e?[]:((0,c.Z)(t)||(t=null==t?[]:[t]),s=a?void 0:s,(0,c.Z)(s)||(s=null==s?[]:[s]),(0,u.Z)(e,t,s))},m=s(21297),h={components:{UnitKepler:s(82768).Z},mixins:[m.default],props:{keplerConfig:{type:Object,default:()=>null},placeName:{type:String,default:()=>""}},data(){return{listOfNames:this.getOrderedList(),placeSelected:this.getSelectedName()}},computed:{total(){return this.values.length},total_time(){const e=this.get_durations().reduce(((e,t)=>e+t),0);return this.convertHMS(e)},mean_time(){const e=this.get_durations(),s=e.reduce(((e,t)=>e+t),0)/e.length||0;return this.convertHMS(s)},associated_names(){const e=this.values.filter((e=>e.winnerName===this.placeSelected)),t=l(e,(e=>e.loserName)),s=t.map((e=>({name:e.loserName,latitude:e.loserLatitude,longitude:e.loserLongitude,confidence:e.loserConfidence})));return s},keplerData(){const e=Object.keys(this.associated_names[0]);return{fields:e.map((e=>({name:this.messages?.keplerFields?.[e]||e}))),rows:this.associated_names.map((t=>e.map((e=>t[e]))))}},keplerArgs(){return{keplerData:this.keplerData,config:this.keplerConfig}}},methods:{getSelectedName(){const e=this.getOrderedList();return""!==this.placeName?this.placeName:e[0]},getOrderedList(){const e=(0,o.Z)(this.values,"winnerName");let t=Object.keys(e).map((t=>({winnerName:t,count:e[t].length})));return t=d(t,"count","desc").map((e=>e.winnerName)),t},getFilteredList(){return this.values.filter((e=>e.winnerName===this.placeSelected))},compute_duration(e,t){const s=new Date(e).getTime(),a=new Date(t).getTime();return Math.floor(Math.abs(s-a)/1e3)},get_durations(){const e=this.values.filter((e=>e.winnerName===this.placeSelected)).map((e=>[e.startTimestamp,e.endTimestamp])),s=l(e,(e=>e[0])),a=s.map((e=>this.compute_duration(e[0],e[1])));return a},computeEntropy(){const e=this.getProbababilities();let t=0;for(let s=0;s<e.length;s++){let a=0;for(let t=0;t<e[s].length;t++)a+=e[s][t]*Math.log2(e[s][t]);t+=-a}return(t/e.length).toPrecision(4)},getProbababilities(){const e=this.getFilteredList(),t=(0,o.Z)(e,(e=>e.startTimestamp)),s=Object.keys(t),a=[];for(let e=0;e<s.length;e++){const r=t[s[e]],n=[r[0].winnerConfidence/100];for(let e=0;e<r.length;e++)n.push(r[e].loserConfidence/100);a.push(n)}return a},convertHMS(e){const t=Math.round(e);let s=Math.floor(t/3600),a=Math.floor((t-3600*s)/60),r=t-3600*s-60*a;return s<10&&(s="0"+s),a<10&&(a="0"+a),r<10&&(r="0"+r),s+"h"+a+"m"+r+"s"}}},f=h,_=(0,s(1001).Z)(f,(function(){var e=this,t=e._self._c;return t("VContainer",[t("VRow",[""===e.placeName?t("VCol",{attrs:{cols:"12"}},[t("VSelect",{attrs:{items:e.listOfNames,label:e.messages.Place},model:{value:e.placeSelected,callback:function(t){e.placeSelected=t},expression:"placeSelected"}})],1):e._e()],1),t("VRow",[t("VCol",{attrs:{cols:"12"}},[t("p",{staticClass:"text-subtitle-2"},[e._v(" "+e._s(e.messages["total-time-spent"])+" "+e._s(e.placeSelected)+": "+e._s(e.total_time)+". "),t("br"),t("br"),e._v(" "+e._s(e.messages["mean-time-spent"])+" "+e._s(e.placeSelected)+": "+e._s(e.mean_time)+". "),t("br"),t("br"),e._v(" "+e._s(e.messages.entropy)+" "+e._s(e.placeSelected)+": "+e._s(e.computeEntropy())+". "),t("br"),e._v(" "+e._s(e.messages["entropy-info"])+" "+e._s(e.placeSelected)+". ")])])],1),0!==e.getFilteredList().length?[t("VRow",[t("VCol",{attrs:{cols:"12"}},[t("p",{staticClass:"text-subtitle-2"},[e._v(" "+e._s(e.messages["other-candidates"])+" "+e._s(e.placeSelected)+": ")]),t("UnitKepler",{attrs:{args:e.keplerArgs}})],1)],1)]:e._e()],2)}),[],!1,null,null,null),v=_.exports},21297:function(e,t,s){s.r(t);var a=s(40290),r=s(18651),n=s(659);const l={props:{values:{type:Array,default:()=>[]},headers:{type:Array,default:()=>[]},messages:{type:Object,default:()=>({})}},data(){return{graphId:"graph_"+this.$store.state.xp.currentTab,totalCount:0,filterCount:0}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{drawViz(){},createTextFilterWidget(e,t="Search"){const s=new a.TextFilterWidget(e);return s.placeHolder(this.$tev(t,t)),s}}};t.default=(0,r.Z)(l,n.Z)}}]);