"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[3622,8736,2027,6622,1297,9814,9201],{3622:function(t,e,r){r.r(e),r.d(e,{default:function(){return C}});var i=r(60194),s=r(40290),n=r(26641),l=r(21297),u=r(59201),o=r(89295),c=r(18736),d=r(96622),p=r(92027),h=r(49814),g=r(82132);s.config.defaultColors(i.schemePaired);var f={components:{ChartViewVRowWebShare:c.default,ChartViewFilters:d.default,ChartViewDcFilterCount:p.default,ChartViewTextSelectTimeRange:h.default,UnitFilterableTable:g.Z},mixins:[l.default],props:{titleArea:{type:String,default:"Area Chart"},titleTop:{type:String,default:"Top Chart"},rowLabel:{type:String,default:"records"},yAxisLabel:{type:String,default:"Total records"},dateAccessor:{type:Object,required:!0},seriesAccessor:{type:Object,required:!0},topAccessor:{type:Object,required:!0}},data:()=>({header:[{text:"Date",value:"dateStr"},{text:"Name",value:"name"},{text:"Action",value:"type"}],results:[],datesAgg:{day:{accessor:"day",xUnits:i.timeDays,round:i.timeDay.round},month:{accessor:"month",xUnits:i.timeMonths,round:i.timeMonth.round}},timeUnit:{accessor:"day",xUnits:i.timeDays,round:i.timeDay.round}}),methods:{drawViz(){const t=["#58539E","#847CEB","#605BAB","#4A4685","#35325E"],e=i.timeFormat("%B %d, %Y");this.results=this.values.map((t=>{const e=new Date(t[this.dateAccessor.value]),r=decodeURIComponent(escape(t[this.seriesAccessor.value]));return{name:decodeURIComponent(escape(t[this.topAccessor.value])),type:this.messages?.type[r]||r,date:e,dateStr:(0,o.K1)(e),month:i.timeMonth(e),day:i.timeDay(e)}}));const r=i.extent(this.results,(t=>t.date)),a=new s.LineChart(`#area-chart-${this.graphId}`),l=new s.BarChart(`#range-chart-${this.graphId}`),c=new s.RowChart(`#top-chart-${this.graphId}`),d=this.createTextFilterWidget(`#top-search-${this.graphId}`);i.select(`#top-chart-${this.graphId} a.reset`).on("click",(function(){c.filterAll(),s.redrawAll()})),i.select(`#area-chart-${this.graphId} a.reset`).on("click",(function(){a.filterAll(),l.filterAll(),s.redrawAll()}));const h=(0,n.Z)(this.results),p=h.groupAll();this.totalCount=h.size(),this.filterCount=this.totalCount,h.onChange((()=>{this.results=g.top(p.value()),this.filterCount=h.allFiltered().length})),this.timeUnit=i.timeMonth.count(...r)>10?this.datesAgg.month:this.datesAgg.day;const f=h.dimension((t=>t.name)),g=h.dimension((t=>t[this.timeUnit.accessor]));d.dimension(h.dimension((t=>t.name.toLowerCase())));const m=f.group().reduceCount(),x=g.group().reduceCount(),C=[...new Set(this.results.map((t=>t.type)))],y=C.map((t=>({name:t,group:g.group().reduceSum((e=>e.type===t?1:0))})));c.width(i.select(`#top-chart-${this.graphId}`).node().getBoundingClientRect().width).height(252).margins({top:20,left:10,right:10,bottom:20}).group((0,u.removeEmptyBins)(m)).dimension(f).ordinalColors(t).label((t=>t.key)).data((t=>t.top(10))).title((t=>t.value)).elasticX(!0).xAxis().ticks(4);const w=i.select(`#area-chart-${this.graphId}`).node().getBoundingClientRect().width;a.margins({top:20,left:40,right:20,bottom:20}).width(w).turnOnControls(!1).curve(i.curveMonotoneX).xyTipsOn(!0).height(180).brushOn(!1).renderArea(!0).dimension(g).group(y[0].group,y[0].name).x(i.scaleTime().domain(r)).legend((new s.Legend).x(w-100).y(5).itemHeight(13).gap(5)).elasticY(!0).rangeChart(l).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).clipPadding(10).yAxisLabel(this.yAxisLabel).ordinalColors(t),a.xAxis().ticks(10),a.yAxis().ticks(6),y.slice(1).forEach((t=>a.stack(t.group,t.name))),y.forEach((t=>a.title(t.name,(r=>`${e(r.key)} : ${r.value} ${t.name}`)))),a.filterAll(),l.width(i.select(`#range-chart-${this.graphId}`).node().getBoundingClientRect().width).height(40).margins({top:0,right:10,bottom:20,left:40}).dimension(g).group(x).centerBar(!0).gap(1).x(i.scaleTime().domain(r)).valueAccessor((t=>t.value)).label((t=>t.key)).round(this.timeUnit.round).alwaysUseRounding(!0).xUnits(this.timeUnit.xUnits).ordinalColors(t).yAxis().ticks(0),s.renderAll()}}},m=f,x=(0,r(1001).Z)(m,(function(){var t=this,e=t._self._c;return e("VContainer",[e("ChartViewVRowWebShare",[e("VCol",{attrs:{cols:"12"}},[e("VRow",[e("VCol",{attrs:{cols:"12",md:"8"}},[e("div",{attrs:{id:`area-chart-${t.graphId}`}},[e("strong",[t._v(t._s(t.titleArea)+" "+t._s(t.$t("per"))+" "+t._s(t.$t(t.timeUnit.accessor)))]),e("ChartViewFilters")],1),e("div",{staticClass:"range-chart",attrs:{id:`range-chart-${t.graphId}`}},[e("ChartViewTextSelectTimeRange")],1)]),e("VCol",{attrs:{cols:"12",md:"4"}},[e("div",{attrs:{id:`top-chart-${t.graphId}`}},[e("div",{staticStyle:{display:"flex"}},[e("strong",[t._v(t._s(t.titleTop))]),e("VSpacer"),e("div",{attrs:{id:`top-search-${t.graphId}`}})],1),e("ChartViewFilters")],1)])],1)],1)],1),e("ChartViewDcFilterCount",t._b({},"ChartViewDcFilterCount",{filterCount:t.filterCount,totalCount:t.totalCount,rowLabel:t.rowLabel},!1)),e("VRow",[e("VCol",{attrs:{cols:"12"}},[e("UnitFilterableTable",t._b({},"UnitFilterableTable",{headers:t.header,items:t.results},!1))],1)],1)],1)}),[],!1,null,null,null),C=x.exports},18736:function(t,e,r){r.r(e),r.d(e,{default:function(){return p}});var i=r(12555),s=r(87261),n=r(97888),l=r(9934),o={components:{BaseButton:s.Z,BaseButtonDownloadData:n.Z,BaseButtonShare:l.Z},mixins:[(0,i.Z)()]},c=(0,r(1001).Z)(o,(function(){var t=this,e=t._self._c;return e("VRow",t._b({ref:"domToImageNode"},"VRow",t.$attrs,!1),[t._t("default"),e("VCol",{staticClass:"dom-to-image-exclude",attrs:{cols:"12"}},[e("BaseButton",t._b({attrs:{icon:"mdiExport",text:"Export"},on:{click:t.exportImage}},"BaseButton",{progress:t.progress,status:t.status,error:t.error},!1)),e("BaseButtonDownloadData",t._b({},"BaseButtonDownloadData",{disabled:!t.blob,extension:t.extension,filename:t.filename,data:t.blob},!1)),e("BaseButtonShare",t._b({attrs:{"file-share":""}},"BaseButtonShare",{files:t.files,disabled:!t.files},!1))],1)],2)}),[],!1,null,null,null),p=c.exports},92027:function(t,e,r){r.r(e),r.d(e,{default:function(){return o}});var i=r(40290),n={mixins:[r(659).Z],props:{filterCount:{type:Number,required:!0},totalCount:{type:Number,required:!0},rowLabel:{type:String,default:null}},methods:{resetAll(){i.filterAll(),i.renderAll()}}},l=(0,r(1001).Z)(n,(function(){var t=this,e=t._self._c;return e("VRow",[t.filterCount===t.totalCount?[e("i18n",{attrs:{tag:"div",path:t.kViewBlock("selected-all")},scopedSlots:t._u([{key:"totalCount",fn:function(){return[e("span",{staticClass:"font-weight-bold",domProps:{textContent:t._s(t.totalCount)}})]},proxy:!0},t.rowLabel?{key:"rowLabel",fn:function(){return[t._v(" "+t._s(t.rowLabel)+" ")]},proxy:!0}:null],null,!0)}),e("span",{directives:[{name:"t",rawName:"v-t",value:"click-graph",expression:"'click-graph'"}]})]:[e("i18n",{attrs:{tag:"div",path:t.kViewBlock("selected-some")},scopedSlots:t._u([t._l({filterCount:t.filterCount,totalCount:t.totalCount},(function(r,a){return{key:a,fn:function(){return[e("span",{key:a,staticClass:"font-weight-bold",domProps:{textContent:t._s(r)}})]},proxy:!0}})),t.rowLabel?{key:"rowLabel",fn:function(){return[t._v(" "+t._s(t.rowLabel)+" ")]},proxy:!0}:null],null,!0)}),e("span",[t._v("Â | "),e("a",{directives:[{name:"t",rawName:"v-t",value:"Reset All",expression:"'Reset All'"}],on:{click:t.resetAll}})])]],2)}),[],!1,null,null,null),o=l.exports},96622:function(t,e,r){r.r(e),r.d(e,{default:function(){return u}});var s={},n=(0,r(1001).Z)(s,(function(){var t=this,e=t._self._c;return e("p",{staticClass:"filters"},[e("span",[t._v(" "+t._s(t.$t("Current filter"))+" "),e("span",{staticClass:"filter"})]),e("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null),u=n.exports},49814:function(t,e,r){r.r(e),r.d(e,{default:function(){return l}});var n=(0,r(1001).Z)({},(function(){var t=this,e=t._self._c;return e("p",{staticClass:"muted pull-right text-subtitle-2 mr-4 mb-1"},[e("span",{domProps:{innerHTML:t._s(t.$t("select-time-range"))}}),t._t("default")],2)}),[],!1,null,null,null),l=n.exports},21297:function(t,e,r){r.r(e);var a=r(40290),n=r(18651),i=r(659);const s={props:{values:{type:Array,default:()=>[]},headers:{type:Array,default:()=>[]},messages:{type:Object,default:()=>({})}},data(){return{graphId:"graph_"+this._uid,totalCount:0,filterCount:0}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{drawViz(){},createTextFilterWidget(t,e="Search"){const r=new a.TextFilterWidget(t);return r.placeHolder(this.$tev(e,e)),r}}};e.default=(0,n.Z)(s,i.Z)},59201:function(t,e,r){r.r(e),r.d(e,{addPiePercentage:function(){return u},addXLabel:function(){return i},addYLabel:function(){return s},createCumulativeGroup:function(){return l},removeEmptyBins:function(){return o}});var a=r(60194),n=r(40290);function i(t,e){const r=t.svg().append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",t.width()/2).attr("y",t.height()-10).text(e),a=r.node().getBBox(),n=t.margins();r.attr("x",n.left+(t.width()-n.left-n.right)/2).attr("y",t.height()-Math.ceil(a.height)/2)}function s(t,e){const r=t.svg().append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-t.height()/2).attr("y",10).text(e),a=r.node().getBBox(),n=t.margins();r.attr("x",-n.top-(t.height()-n.top-n.bottom)/2).attr("y",Math.max(Math.ceil(a.height),n.left-Math.ceil(a.height)-5))}function l(t){return{all(){const e={};return t.all().map((function(t){return e[t.key[0]]?e[t.key[0]]+=t.value:e[t.key[0]]=t.value,{key:t.key,value:e[t.key[0]]}}))}}}function o(t){return{top:e=>t.top(1/0).filter((function(t){return 0!==t.value.count&&0!==t.value})).slice(0,e)}}function u(t){t.selectAll("text.pie-slice.pie-label").call((function(t){t.each((function(t){const e=a.select(this);let r=e.text();r.length>14&&(r=r.substring(0,14)+".. "),r.length>0&&(r=r+" ("+n.utils.printSingleValue((t.endAngle-t.startAngle)/(2*Math.PI)*100)+"%)"),e.text(r)}))}))}}}]);