{"version":3,"file":"data-experience.umd.6236.js","mappings":";;;;;;;;;;;;;;;AAAA,+BAA+B,6BAA6B,kCAAkC,qBAAqB,YAAY,4BAA4B,iFAAiF,4BAA4B,8FAA8F,2BAA2B,uBAAuB,UAAU,OAAO,8BAA8B,mBAAmB,IAAI,kDAAkD,eAAe,kDAAkD,sCAAsC,kBAAkB,SAAS,IAAI,SAAS,sFAAsF,8BAA8B,KAAK,oDAAoD,eAAe,oDAAoD,0CAA0C,kBAAkB,aAAa,IAAI,SAAS,6EAA6E,mDAAmD,KAAK,UAAU,wBAAwB,iDAAiD,eAAe,sBAAsB,aAAa,aAAa,wCAAwC,QAAQ,yDAAyD,4EAA4E,eAAe,qBAAqB,aAAa,OAAO,8PAA8P,gGAAgG,MAAM,aAAa,qBAAqB,aAAa,aAAa,oBAAoB,QAAQ,8FAA8F,4FAA4F,eAAe,oBAAoB,aAAa,OAAO,iOAAiO,aAAa,aAAa,uBAAuB,QAAQ,gFAAgF,qCAAqC;AACriF;AACA;;;;;;;;;ACqGwB;AACG;;AAE3B,qFAAe;AACf,WAAW,gBAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,aAAY;AAC/B,oBAAoB,mBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,aAAY;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAS;AACtB,sCAAsC,UAAS;AAC/C;AACA;AACA;AACA,aAAa,mBACW;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB,UACL;AACf;AACA;AACA;AACA,QAAQ,cAAa;AACrB;AACA,eAAe,OAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAS;AACpC;AACA;AACA,kBAAkB,aAAY,CAAC,YAAW;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,cAAa;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mBAAkB,CAAC,WAAU;AAC1C;AACA;AACA;AACA,QAAQ,mBAAkB,CAAC,WAAU,KAAK,kBAAiB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AChQyJ,CAAC,0FAAe,gDAAG,EAAC;;ACA9K;;;;;;;AEAmH;AACvC;AACL;AACvE,CAAiH;;;AAGjH;AACyG;AACzG,gBAAgB,sCAAU;AAC1B,EAAE,qDAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA,6DAAe;;;;;;;;;;;;;;;;ACnBf,+BAA+B,6BAA6B,kCAAkC,0BAA0B,YAAY,uBAAuB,iFAAiF,uBAAuB,8FAA8F,2BAA2B,uBAAuB,UAAU,OAAO,8BAA8B,mBAAmB,IAAI,UAAU,wBAAwB,sCAAsC,kBAAkB,SAAS,IAAI,SAAS,uDAAuD,8BAA8B,aAAa,wBAAwB,aAAa,OAAO,2DAA2D,sEAAsE,kBAAkB,SAAS,EAAE,SAAS,uCAAuC,8BAA8B,cAAc,4BAA4B,8CAA8C,eAAe,QAAQ,aAAa,OAAO,wNAAwN,0DAA0D,aAAa,qBAAqB,aAAa,aAAa,oBAAoB,QAAQ,8FAA8F,4FAA4F,eAAe,oBAAoB,aAAa,OAAO,iOAAiO,aAAa,aAAa,uBAAuB,QAAQ,gFAAgF,qCAAqC;AAChjE;AACA;;;;;;;;;ACoFwB;AACG;;AAE3B,iFAAe;AACf,WAAW,gBAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAQ;AACrB,oBAAoB,mBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,aAAY;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,cAAa;AACjC;AACA,aAAa,OAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAS;AACtB;AACA;AACA,aAAa,mBACW;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,cAAa;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AChNqJ,CAAC,sFAAe,4CAAG,EAAC;;ACA1K;;;;;;;AEA+G;AACvC;AACL;AACnE,CAA6G;;;AAG7G;AACyG;AACzG,gBAAgB,sCAAU;AAC1B,EAAE,iDAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA,yDAAe;;;;;;;;;;;;;;;;ACnBf,+BAA+B,6BAA6B,8CAA8C,OAAO,aAAa,WAAW,sBAAsB,sPAAsP,OAAO,sBAAsB,oCAAoC,OAAO,uGAAuG,0BAA0B,sDAAsD,wBAAwB,OAAO,sBAAsB,oCAAoC,OAAO,+FAA+F,0BAA0B,sDAAsD,uCAAuC,OAAO,aAAa,WAAW,sBAAsB,iFAAiF,OAAO,wDAAwD,8BAA8B,sDAAsD;AACnuC;AACA;;;;;;;;;;;AC6C2B;AACkC;AACQ;;AAErE,wFAAe;AACf,oCAAoC,2DAA0B;AAC9D,WAAW,gBAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AC7E4J,CAAC,6FAAe,mDAAG,EAAC;;;;ACAvE;AAC3B;AACL;;;AAG1E;AACA,CAAyG;AACzG,gBAAgB,sCAAU;AAC1B,EAAE,wDAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA,gEAAe;;;;;;;;;;;;AClBsB;AACJ;;AAEkB;;AAEnD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,wBAAwB;AACxB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,iBAAiB;AACjB;AACA,yBAAyB,gDAAgB;AACzC;AACA;AACA;AACA;AACA;;AAEA,+DAAe,8DAAK,QAAQ,qEAAe,CAAC","sources":["webpack://data-experience/./src/components/chart/view/ChartViewHeatMapCalendar.vue?7503","webpack://data-experience/src/components/chart/view/ChartViewHeatMapCalendar.vue","webpack://data-experience/./src/components/chart/view/ChartViewHeatMapCalendar.vue?658e","webpack://data-experience/./src/components/chart/view/ChartViewHeatMapCalendar.vue?34a7","webpack://data-experience/./src/components/chart/view/ChartViewHeatMapCalendar.vue?5281","webpack://data-experience/./src/components/chart/view/ChartViewHeatMapCalendar.vue","webpack://data-experience/./src/components/chart/view/ChartViewHeatMapHour.vue?8fc0","webpack://data-experience/src/components/chart/view/ChartViewHeatMapHour.vue","webpack://data-experience/./src/components/chart/view/ChartViewHeatMapHour.vue?18b0","webpack://data-experience/./src/components/chart/view/ChartViewHeatMapHour.vue?1929","webpack://data-experience/./src/components/chart/view/ChartViewHeatMapHour.vue?1c86","webpack://data-experience/./src/components/chart/view/ChartViewHeatMapHour.vue","webpack://data-experience/./src/components/chart/view/ChartViewHerMessageActivity.vue?760f","webpack://data-experience/src/components/chart/view/ChartViewHerMessageActivity.vue","webpack://data-experience/./src/components/chart/view/ChartViewHerMessageActivity.vue?a4e5","webpack://data-experience/./src/components/chart/view/ChartViewHerMessageActivity.vue","webpack://data-experience/./src/components/chart/view/mixin.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('VContainer',[_c('div',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"overline mb-3\"},[_vm._v(\" \"+_vm._s(_vm.title)+\" \")]),_c('VSpacer'),(_vm.includeTotal)?_c('div',{staticClass:\"overline mb-3\"},[_vm._v(\" total: \"),_c('strong',[_vm._v(_vm._s(_vm.items.length))])]):_vm._e()],1),_c('svg',{staticClass:\"graph\",attrs:{\"viewBox\":_vm.viewBox}},[_c('g',{attrs:{\"transform\":`translate(40.5,${_vm.cellSize * 1.5})`}},[_vm._l((_vm.itemsPerDay),function(year,idxYear){return _c('g',{key:'week-axis' + idxYear,staticClass:\"week-axis\"},_vm._l((_vm.$days()),function(d,idx){return _c('text',{key:`d_${idx}`,attrs:{\"x\":\"-5\",\"y\":idxYear * _vm.calendarHeight + (idx + 0.5) * _vm.cellSize,\"dy\":\"0.35em\"}},[_vm._v(\" \"+_vm._s(d)+\" \")])}),0)}),_vm._l((_vm.monthsPerYear),function(item,idxYear){return _c('g',{key:'month-axis' + idxYear,staticClass:\"month-axis\"},_vm._l((item.months),function(month,idx){return _c('text',{key:`month_${idx}`,attrs:{\"x\":_vm.xPosMonth(month),\"y\":idxYear * _vm.calendarHeight - 5,\"dy\":\"0.35em\"}},[_vm._v(\" \"+_vm._s(_vm.formatMonth(month))+\" \")])}),0)}),_c('g',{staticClass:\"calendars\"},_vm._l((_vm.itemsPerDay),function(year,idxYear){return _c('g',{key:'year_' + idxYear},[_c('text',{staticStyle:{\"font-weight\":\"bold\",\"font-size\":\"12px\"},attrs:{\"x\":0.5,\"y\":idxYear * _vm.calendarHeight - _vm.cellSize}},[_vm._v(\" \"+_vm._s(year[0])+\" \")]),_vm._l((year[1]),function(item,idxItem){return _c('g',{key:'day_' + idxItem},[_c('rect',{attrs:{\"width\":_vm.cellSize - _vm.cellSpacing,\"height\":_vm.cellSize - _vm.cellSpacing,\"x\":_vm.xPos(year[0], item[0], item[1]),\"y\":idxYear * _vm.calendarHeight + item[2] * _vm.cellSize + 0.5,\"fill\":_vm.color(item[3]),\"rx\":_vm.borderRadius,\"ry\":_vm.borderRadius}}),_c('title',[_vm._v(\" \"+_vm._s(_vm.generateTitle(year[0], item[0], item[1], item[3]))+\" \")])])})],2)}),0),_c('g',{staticClass:\"legend\"},[_c('text',{staticStyle:{\"text-anchor\":\"end\"},attrs:{\"x\":_vm.legendSquareXPos(0) - _vm.cellSize,\"y\":_vm.height - _vm.cellSize * 2.5,\"dy\":\"-.20em\"}},[_vm._v(\" \"+_vm._s(_vm.legendLabel)+\" \")]),_vm._l((_vm.legendSquares),function(square,idx){return _c('g',{key:'legend_' + idx},[_c('rect',{attrs:{\"width\":(_vm.cellSize - _vm.cellSpacing) * 2,\"height\":(_vm.cellSize - _vm.cellSpacing) / 2,\"x\":_vm.legendSquareXPos(idx),\"y\":_vm.height - _vm.cellSize * 3,\"fill\":_vm.color(square),\"rx\":_vm.borderRadius,\"ry\":_vm.borderRadius}}),_c('text',{staticStyle:{\"text-anchor\":\"middle\"},attrs:{\"x\":_vm.legendSquareXPos(idx) + _vm.cellSize,\"y\":_vm.height - _vm.cellSize * 2}},[_vm._v(\" \"+_vm._s(square)+\" \")])])})],2)],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <VContainer>\n    <div class=\"d-flex\">\n      <div class=\"overline mb-3\">\n        {{ title }}\n      </div>\n      <VSpacer />\n      <div v-if=\"includeTotal\" class=\"overline mb-3\">\n        total: <strong>{{ items.length }}</strong>\n      </div>\n    </div>\n    <svg class=\"graph\" :viewBox=\"viewBox\">\n      <g :transform=\"`translate(40.5,${cellSize * 1.5})`\">\n        <g\n          v-for=\"(year, idxYear) in itemsPerDay\"\n          :key=\"'week-axis' + idxYear\"\n          class=\"week-axis\"\n        >\n          <text\n            v-for=\"(d, idx) in $days()\"\n            :key=\"`d_${idx}`\"\n            x=\"-5\"\n            :y=\"idxYear * calendarHeight + (idx + 0.5) * cellSize\"\n            dy=\"0.35em\"\n          >\n            {{ d }}\n          </text>\n        </g>\n        <g\n          v-for=\"(item, idxYear) in monthsPerYear\"\n          :key=\"'month-axis' + idxYear\"\n          class=\"month-axis\"\n        >\n          <text\n            v-for=\"(month, idx) in item.months\"\n            :key=\"`month_${idx}`\"\n            :x=\"xPosMonth(month)\"\n            :y=\"idxYear * calendarHeight - 5\"\n            dy=\"0.35em\"\n          >\n            {{ formatMonth(month) }}\n          </text>\n        </g>\n        <g class=\"calendars\">\n          <g v-for=\"(year, idxYear) in itemsPerDay\" :key=\"'year_' + idxYear\">\n            <text\n              :x=\"0.5\"\n              :y=\"idxYear * calendarHeight - cellSize\"\n              style=\"font-weight: bold; font-size: 12px\"\n            >\n              {{ year[0] }}\n            </text>\n            <g v-for=\"(item, idxItem) in year[1]\" :key=\"'day_' + idxItem\">\n              <rect\n                :width=\"cellSize - cellSpacing\"\n                :height=\"cellSize - cellSpacing\"\n                :x=\"xPos(year[0], item[0], item[1])\"\n                :y=\"idxYear * calendarHeight + item[2] * cellSize + 0.5\"\n                :fill=\"color(item[3])\"\n                :rx=\"borderRadius\"\n                :ry=\"borderRadius\"\n              />\n              <title>\n                {{ generateTitle(year[0], item[0], item[1], item[3]) }}\n              </title>\n            </g>\n          </g>\n        </g>\n\n        <g class=\"legend\">\n          <text\n            style=\"text-anchor: end\"\n            :x=\"legendSquareXPos(0) - cellSize\"\n            :y=\"height - cellSize * 2.5\"\n            dy=\"-.20em\"\n          >\n            {{ legendLabel }}\n          </text>\n          <g v-for=\"(square, idx) in legendSquares\" :key=\"'legend_' + idx\">\n            <rect\n              :width=\"(cellSize - cellSpacing) * 2\"\n              :height=\"(cellSize - cellSpacing) / 2\"\n              :x=\"legendSquareXPos(idx)\"\n              :y=\"height - cellSize * 3\"\n              :fill=\"color(square)\"\n              :rx=\"borderRadius\"\n              :ry=\"borderRadius\"\n            />\n            <text\n              style=\"text-anchor: middle\"\n              :x=\"legendSquareXPos(idx) + cellSize\"\n              :y=\"height - cellSize * 2\"\n            >\n              {{ square }}\n            </text>\n          </g>\n        </g>\n      </g>\n    </svg>\n  </VContainer>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport mixin from './mixin'\n\nexport default {\n  mixins: [mixin],\n  props: {\n    dateAccessor: {\n      type: String,\n      required: true\n    },\n    title: {\n      type: String,\n      default: () => ''\n    },\n    cellSize: {\n      type: Number,\n      default: () => 20\n    },\n    cellSpacing: {\n      type: Number,\n      default: () => 2\n    },\n    dateFormat: {\n      type: String,\n      default: () => ''\n    },\n    valueAccessor: {\n      type: String,\n      default: () => ''\n    },\n    borderRadius: {\n      type: Number,\n      default: () => 3\n    },\n    legendPrefNbItems: {\n      type: Number,\n      default: () => 4\n    },\n    legendLabel: {\n      type: String,\n      default: () => ''\n    },\n    includeTotal: {\n      type: Boolean,\n      default: () => false\n    }\n  },\n  data() {\n    return {\n      formatMonth: d3.utcFormat('%b'),\n      colorPalette: d3.interpolateRdPu\n    }\n  },\n  computed: {\n    width() {\n      return this.cellSize * (52 + 3)\n    },\n    calendarHeight() {\n      return this.cellSize * (this.$days().length + 4)\n    },\n    height() {\n      return this.calendarHeight * this.itemsPerDay.length\n    },\n    viewBox() {\n      return `0 0 ${this.width} ${this.height}`\n    },\n    dateParser() {\n      if (this.dateFormat) { return d3.timeParse(this.dateFormat) } else {\n        return (d) => {\n          const date = new Date(d)\n          // return null if the date is not recognized\n          if (isNaN(date.getTime())) { return null } else { return date }\n        }\n      }\n    },\n    items() {\n      return this.values\n        .map((v) => {\n          return {\n            date: this.dateParser(v[this.dateAccessor]),\n            value: this.valueAccessor ? v[this.valueAccessor] : 1\n          }\n        })\n        .filter(v => v.date)\n    },\n    extent() {\n      return d3.extent(\n        this.itemsPerDay.flatMap(y => d3.extent(y[1], i => i[3]))\n      )\n    },\n    color() {\n      return d3\n        .scaleSequential()\n        .domain([this.extent[0], this.extent[1]])\n        .nice()\n        .interpolator(this.colorPalette)\n    },\n    itemsPerDay() {\n      const years = d3\n        .groups(this.items, v => v.date.getUTCFullYear())\n        .sort((a, b) => b[0] - a[0])\n      return years.map(y => [\n        y[0],\n        d3.flatRollup(\n          y[1],\n          v => d3.sum(v, d => d.value),\n          v => v.date.getUTCMonth(),\n          v => v.date.getUTCDate(),\n          v => v.date.getDay()\n        )\n      ])\n    },\n    monthsPerYear() {\n      const test = this.itemsPerDay.map((y) => {\n        const dateExtent = d3.extent(y[1], i => new Date(y[0], i[0], i[1]))\n        return {\n          year: y[0],\n          months: d3.utcMonths(d3.utcMonth(dateExtent[0]), dateExtent[1])\n        }\n      })\n\n      return test\n    },\n    legendSquares() {\n      return this.color.ticks(this.legendPrefNbItems)\n    },\n    legendNbItems() {\n      return this.legendSquares.length\n    }\n  },\n  methods: {\n    generateTitle(year, month, day, value) {\n      return (\n        d3.timeFormat('%a %d %B, %Y')(new Date(year, month, day)) +\n        ' - ' +\n        value +\n        ' records'\n      )\n    },\n    xPos(year, month, day) {\n      const date = new Date(year, month, day)\n      return d3.utcMonday.count(d3.utcYear(date), date) * this.cellSize + 0.5\n    },\n    xPosMonth(d) {\n      return (\n        d3.utcMonday.count(d3.utcYear(d), d3.utcMonday.ceil(d)) * this.cellSize\n      )\n    },\n    legendSquareXPos(idx) {\n      const { width: w, cellSize: s, legendNbItems: n } = this\n      return w - s * 2 * n + idx * s * 2 - s * 2\n    }\n  }\n}\n</script>\n<style scoped>\n/* AXES */\n/* ticks */\n::v-deep .week-axis {\n  text-anchor: end;\n}\n::v-deep .hour-axis {\n  text-anchor: middle;\n}\n::v-deep .graph {\n  font-family: 'Assistant', sans-serif;\n  font-size: 8px;\n  max-width: 100%;\n  height: auto;\n}\n</style>\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewHeatMapCalendar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewHeatMapCalendar.vue?vue&type=script&lang=js&\"","// extracted by mini-css-extract-plugin\nexport {};","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-54.use[0]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-54.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-54.use[2]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewHeatMapCalendar.vue?vue&type=style&index=0&id=5d9bc966&prod&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./ChartViewHeatMapCalendar.vue?vue&type=template&id=5d9bc966&scoped=true&\"\nimport script from \"./ChartViewHeatMapCalendar.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewHeatMapCalendar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChartViewHeatMapCalendar.vue?vue&type=style&index=0&id=5d9bc966&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d9bc966\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('VContainer',[_c('div',{staticClass:\"d-flex mb-3\"},[_c('div',{staticClass:\"overline\"},[_vm._v(\" \"+_vm._s(_vm.title)+\" \")]),_c('VSpacer'),(_vm.includeTotal)?_c('div',{staticClass:\"overline\"},[_vm._v(\" total: \"),_c('strong',[_vm._v(_vm._s(_vm.items.length))])]):_vm._e()],1),_c('svg',{staticClass:\"graph\",attrs:{\"viewBox\":_vm.viewBox}},[_c('g',{attrs:{\"transform\":`translate(40.5,${_vm.cellSize * 1.5})`}},[_c('g',{staticClass:\"week-axis\"},_vm._l((_vm.$days()),function(d,idx){return _c('text',{key:`d_${idx}`,attrs:{\"x\":\"-5\",\"y\":(idx + 0.5) * _vm.cellSize,\"dy\":\"0.35em\"}},[_vm._v(\" \"+_vm._s(d)+\" \")])}),0),_c('g',{staticClass:\"hour-axis\"},[_c('text',{attrs:{\"y\":\"-20\",\"x\":(_vm.hours.length / 2 + 0.5) * _vm.cellSize}},[_vm._v(_vm._s(_vm.$t('hour'))+\"s\")]),_vm._l((_vm.hours),function(h){return _c('text',{key:`h_${h}`,attrs:{\"y\":\"-5\",\"x\":(h + 0.5) * _vm.cellSize}},[_vm._v(\" \"+_vm._s(h)+\" \")])})],2),_c('g',{staticClass:\"calendar-hour\"},_vm._l((_vm.itemsPerHour),function(item,idx){return _c('g',{key:idx},[_c('rect',{attrs:{\"width\":_vm.cellSize - _vm.cellSpacing,\"height\":_vm.cellSize - _vm.cellSpacing,\"x\":item[0] * _vm.cellSize + 0.5,\"y\":item[1] * _vm.cellSize + 0.5,\"fill\":_vm.color(item[2]),\"rx\":_vm.borderRadius,\"ry\":_vm.borderRadius}}),_c('title',[_vm._v(_vm._s(_vm.generateTitle(item)))])])}),0),_c('g',{staticClass:\"legend\"},[_c('text',{staticStyle:{\"text-anchor\":\"end\"},attrs:{\"x\":_vm.legendSquareXPos(0) - _vm.cellSize,\"y\":_vm.height - _vm.cellSize * 2.5,\"dy\":\"-.20em\"}},[_vm._v(\" \"+_vm._s(_vm.legendLabel)+\" \")]),_vm._l((_vm.legendSquares),function(square,idx){return _c('g',{key:'legend_' + idx},[_c('rect',{attrs:{\"width\":(_vm.cellSize - _vm.cellSpacing) * 2,\"height\":(_vm.cellSize - _vm.cellSpacing) / 2,\"x\":_vm.legendSquareXPos(idx),\"y\":_vm.height - _vm.cellSize * 3,\"fill\":_vm.color(square),\"rx\":_vm.borderRadius,\"ry\":_vm.borderRadius}}),_c('text',{staticStyle:{\"text-anchor\":\"middle\"},attrs:{\"x\":_vm.legendSquareXPos(idx) + _vm.cellSize,\"y\":_vm.height - _vm.cellSize * 2}},[_vm._v(\" \"+_vm._s(square)+\" \")])])})],2)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <VContainer>\n    <div class=\"d-flex mb-3\">\n      <div class=\"overline\">\n        {{ title }}\n      </div>\n      <VSpacer />\n      <div v-if=\"includeTotal\" class=\"overline\">\n        total: <strong>{{ items.length }}</strong>\n      </div>\n    </div>\n    <svg class=\"graph\" :viewBox=\"viewBox\">\n      <g :transform=\"`translate(40.5,${cellSize * 1.5})`\">\n        <g class=\"week-axis\">\n          <text\n            v-for=\"(d, idx) in $days()\"\n            :key=\"`d_${idx}`\"\n            x=\"-5\"\n            :y=\"(idx + 0.5) * cellSize\"\n            dy=\"0.35em\"\n          >\n            {{ d }}\n          </text>\n        </g>\n\n        <g class=\"hour-axis\">\n          <text y=\"-20\" :x=\"(hours.length / 2 + 0.5) * cellSize\">{{ $t('hour') }}s</text>\n          <text\n            v-for=\"h in hours\"\n            :key=\"`h_${h}`\"\n            y=\"-5\"\n            :x=\"(h + 0.5) * cellSize\"\n          >\n            {{ h }}\n          </text>\n        </g>\n\n        <g class=\"calendar-hour\">\n          <g v-for=\"(item, idx) in itemsPerHour\" :key=\"idx\">\n            <rect\n              :width=\"cellSize - cellSpacing\"\n              :height=\"cellSize - cellSpacing\"\n              :x=\"item[0] * cellSize + 0.5\"\n              :y=\"item[1] * cellSize + 0.5\"\n              :fill=\"color(item[2])\"\n              :rx=\"borderRadius\"\n              :ry=\"borderRadius\"\n            />\n            <title>{{ generateTitle(item) }}</title>\n          </g>\n        </g>\n\n        <g class=\"legend\">\n          <text\n            style=\"text-anchor: end\"\n            :x=\"legendSquareXPos(0) - cellSize\"\n            :y=\"height - cellSize * 2.5\"\n            dy=\"-.20em\"\n          >\n            {{ legendLabel }}\n          </text>\n          <g v-for=\"(square, idx) in legendSquares\" :key=\"'legend_' + idx\">\n            <rect\n              :width=\"(cellSize - cellSpacing) * 2\"\n              :height=\"(cellSize - cellSpacing) / 2\"\n              :x=\"legendSquareXPos(idx)\"\n              :y=\"height - cellSize * 3\"\n              :fill=\"color(square)\"\n              :rx=\"borderRadius\"\n              :ry=\"borderRadius\"\n            />\n            <text\n              style=\"text-anchor: middle\"\n              :x=\"legendSquareXPos(idx) + cellSize\"\n              :y=\"height - cellSize * 2\"\n            >\n              {{ square }}\n            </text>\n          </g>\n        </g>\n      </g>\n    </svg>\n  </VContainer>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport mixin from './mixin'\n\nexport default {\n  mixins: [mixin],\n  props: {\n    dateAccessor: {\n      type: String,\n      required: true\n    },\n    title: {\n      type: String,\n      default: () => ''\n    },\n    cellSize: {\n      type: Number,\n      default: () => 20\n    },\n    cellSpacing: {\n      type: Number,\n      default: () => 2\n    },\n    dateFormat: {\n      type: String,\n      default: () => ''\n    },\n    valueAccessor: {\n      type: String,\n      default: () => ''\n    },\n    borderRadius: {\n      type: Number,\n      default: () => 3\n    },\n    legendPrefNbItems: {\n      type: Number,\n      default: () => 4\n    },\n    legendLabel: {\n      type: String,\n      default: () => ''\n    },\n    includeTotal: {\n      type: Boolean,\n      default: () => false\n    }\n  },\n  data() {\n    return {\n      hours: d3.range(24),\n      colorPalette: d3.interpolateRdPu\n    }\n  },\n  computed: {\n    width() {\n      return this.cellSize * (this.hours.length + 3)\n    },\n    height() {\n      return this.cellSize * (this.$days().length + 4)\n    },\n    viewBox() {\n      return `0 0 ${this.width} ${this.height}`\n    },\n    dateParser() {\n      if (this.dateFormat) { return d3.timeParse(this.dateFormat) } else {\n        return (d) => {\n          const date = new Date(d)\n          // return null if the date is not recognized\n          if (isNaN(date.getTime())) { return null } else { return date }\n        }\n      }\n    },\n    items() {\n      return this.values\n        .map((v) => {\n          return {\n            date: this.dateParser(v[this.dateAccessor]),\n            value: this.valueAccessor ? v[this.valueAccessor] : 1\n          }\n        })\n        .filter(v => v.date)\n    },\n    itemsPerHour() {\n      const hours = d3.flatRollup(\n        this.items,\n        v => d3.sum(v, d => d.value),\n        v => v.date.getHours(),\n        v => v.date.getDay()\n      )\n      return hours\n    },\n    extent() {\n      return d3.extent(this.itemsPerHour, v => v[2])\n    },\n    color() {\n      return d3\n        .scaleSequential()\n        .domain([this.extent[0], this.extent[1]])\n        .nice()\n        .interpolator(this.colorPalette)\n    },\n    legendSquares() {\n      return this.color.ticks(this.legendPrefNbItems)\n    },\n    legendNbItems() {\n      return this.legendSquares.length\n    }\n  },\n  methods: {\n    generateTitle(item) {\n      return (\n        d3.timeFormat('%a at %H:00')(new Date(2000, 12, item[1], item[0])) +\n        ' - ' +\n        item[2] +\n        ' records'\n      )\n    },\n    legendSquareXPos(idx) {\n      const { width: w, cellSize: s, legendNbItems: n } = this\n      return w - s * 2 * n + idx * s * 2 - s * 2\n    }\n  }\n}\n</script>\n<style scoped>\n/* AXES */\n/* ticks */\n::v-deep .week-axis {\n  text-anchor: end;\n}\n::v-deep .hour-axis {\n  text-anchor: middle;\n}\n::v-deep .graph {\n  font-family: 'Assistant', sans-serif;\n  font-size: 8px;\n  max-width: 100%;\n  height: auto;\n}\n</style>\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewHeatMapHour.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewHeatMapHour.vue?vue&type=script&lang=js&\"","// extracted by mini-css-extract-plugin\nexport {};","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-54.use[0]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-54.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-54.use[2]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewHeatMapHour.vue?vue&type=style&index=0&id=3f765ff4&prod&scoped=true&lang=css&\"","import { render, staticRenderFns } from \"./ChartViewHeatMapHour.vue?vue&type=template&id=3f765ff4&scoped=true&\"\nimport script from \"./ChartViewHeatMapHour.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewHeatMapHour.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChartViewHeatMapHour.vue?vue&type=style&index=0&id=3f765ff4&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3f765ff4\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('VContainer',[_c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\"}},[_c('h3',{staticClass:\"text-h6\"},[_vm._v(\" Messages exchanged per hour and day of week \")]),_c('p',[_vm._v(\" In total you exchanged \"),_c('strong',[_vm._v(_vm._s(_vm.nbMsg))]),_vm._v(\" messages with \"),_c('strong',[_vm._v(_vm._s(_vm.nbUser))]),_vm._v(\" users. \")])]),_c('VCol',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('ChartViewHeatMapHour',_vm._b({attrs:{\"values\":_vm.messageReceived,\"title\":\"Messages Received\",\"legend-label\":\"Messages\",\"include-total\":\"\"}},'ChartViewHeatMapHour',{ headers: _vm.headers, dateAccessor: _vm.dateAccessor },false))],1),_c('VCol',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('ChartViewHeatMapHour',_vm._b({attrs:{\"values\":_vm.messageSent,\"title\":\"Messages Sent\",\"legend-label\":\"Messages\",\"include-total\":\"\"}},'ChartViewHeatMapHour',{ headers: _vm.headers, dateAccessor: _vm.dateAccessor },false))],1)],1),_c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\"}},[_c('h3',{staticClass:\"text-h6\"},[_vm._v(\" Messages exchanged per day \")]),_c('ChartViewHeatMapCalendar',_vm._b({attrs:{\"values\":_vm.messageReceived,\"legend-label\":\"Messages\"}},'ChartViewHeatMapCalendar',{ headers: _vm.headers, dateAccessor: _vm.dateAccessor },false))],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <VContainer>\n    <VRow>\n      <VCol cols=\"12\">\n        <h3 class=\"text-h6\">\n          Messages exchanged per hour and day of week\n        </h3>\n        <p>\n          In total you exchanged <strong>{{ nbMsg }}</strong> messages with\n          <strong>{{ nbUser }}</strong> users.\n        </p>\n      </VCol>\n      <VCol cols=\"12\" md=\"6\">\n        <ChartViewHeatMapHour\n          v-bind=\"{ headers, dateAccessor }\"\n          :values=\"messageReceived\"\n          title=\"Messages Received\"\n          legend-label=\"Messages\"\n          include-total\n        />\n      </VCol>\n      <VCol cols=\"12\" md=\"6\">\n        <ChartViewHeatMapHour\n          v-bind=\"{ headers, dateAccessor }\"\n          :values=\"messageSent\"\n          title=\"Messages Sent\"\n          legend-label=\"Messages\"\n          include-total\n        />\n      </VCol>\n    </VRow>\n    <VRow>\n      <VCol cols=\"12\">\n        <h3 class=\"text-h6\">\n          Messages exchanged per day\n        </h3>\n        <ChartViewHeatMapCalendar\n          v-bind=\"{ headers, dateAccessor }\"\n          :values=\"messageReceived\"\n          legend-label=\"Messages\"\n        />\n      </VCol>\n    </VRow>\n  </VContainer>\n</template>\n\n<script>\nimport mixin from './mixin'\nimport ChartViewHeatMapHour from './ChartViewHeatMapHour.vue'\nimport ChartViewHeatMapCalendar from './ChartViewHeatMapCalendar.vue'\n\nexport default {\n  components: { ChartViewHeatMapHour, ChartViewHeatMapCalendar },\n  mixins: [mixin],\n  props: {\n    dateAccessor: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {}\n  },\n  computed: {\n    messageReceived() {\n      return this.values.filter(v => v.sender !== 'Her' && v.sender !== 'User')\n    },\n    messageSent() {\n      return this.values.filter(v => v.sender !== 'Her' && v.sender === 'User')\n    },\n    nbUser() {\n      return new Set(this.values.map(v => v.sender)).size - 2 // Remove Her and the user\n    },\n    nbMsg() {\n      return this.values.filter(v => v.sender !== 'Her').length // Remove Her\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewHerMessageActivity.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewHerMessageActivity.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartViewHerMessageActivity.vue?vue&type=template&id=e9657a3c&\"\nimport script from \"./ChartViewHerMessageActivity.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewHerMessageActivity.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { TextFilterWidget } from 'dc'\nimport { merge } from 'lodash-es'\n\nimport kViewBlockMixin from '@/mixins/k-view-block'\n\nconst mixin = {\n  props: {\n    values: {\n      type: Array,\n      default: () => []\n    },\n    headers: {\n      type: Array,\n      default: () => []\n    },\n    messages: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  data() {\n    return {\n      graphId: 'graph_' + this._uid,\n      totalCount: 0,\n      filterCount: 0\n    }\n  },\n  mounted() {\n    this.drawViz()\n  },\n  watch: {\n    values() {\n      this.drawViz()\n    }\n  },\n  methods: {\n    drawViz() { },\n    createTextFilterWidget(parent, placeholder = 'Search') {\n      const widget = new TextFilterWidget(parent)\n      widget.placeHolder(this.$tev(placeholder, placeholder))\n      return widget\n    }\n  }\n}\n\nexport default merge(mixin, kViewBlockMixin)\n"],"names":[],"sourceRoot":""}