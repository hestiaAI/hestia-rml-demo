"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[5008,1690,6622,9814],{45008:function(t,e,r){r.r(e),r.d(e,{default:function(){return h}});var s=r(46228),n=r(40290),l=r(31690),o=r(49814),d=r(96622);n.config.defaultColors(s.xHP);var u={components:{ChartViewTextSelectTimeRange:o.default,ChartViewFilters:d.default},mixins:[l.default],props:{dateAccessor:{type:String,required:!0},dateFormat:{type:String,default:""},valueAccessor:{type:String,default:""},defaultValue:{type:Number,default:0}},data(){const t={day:{name:"day",accessor:t=>s.rr1(this.dateParser(t)),xUnits:s.Nus,round:s.rr1.round},month:{name:"month",accessor:t=>s.F0B(this.dateParser(t)),xUnits:s.K_h,round:s.F0B.round},year:{name:"year",accessor:t=>s.jBk(this.dateParser(t)),xUnits:s.HK7,round:s.jBk.round}};return{timeUnits:t,timeUnit:t.day,dateFormatter:s.i$Z("%B %d, %Y")}},computed:{dateParser(){return this.dateFormat?s.Z1g(this.dateFormat):t=>new Date(t)}},methods:{drawViz(){const t=new n.LineChart(`#area-chart-${this.graphId}`),e=new n.BarChart(`#range-chart-${this.graphId}`);s.Ys(`#area-chart-${this.graphId} a.reset`).on("click",(function(){t.filterAll(),e.filterAll(),n.redrawAll()}));const r=s.Wem(this.ndx.all(),(t=>this.dateParser(t[this.dateAccessor])));r[0]=s.rr1.offset(r[0],-1),r[1]=s.rr1.offset(r[1],1);const a=s.F0B.count(...r);this.timeUnit=a>10?a>120?this.timeUnits.year:this.timeUnits.month:this.timeUnits.day;const i=this.ndx.dimension((t=>this.timeUnit.accessor(t[this.dateAccessor]))),l=this.valueAccessor?i.group().reduceSum((t=>t[this.valueAccessor])):i.group().reduceCount(),o=s.Ys(`#area-chart-${this.graphId}`).node().getBoundingClientRect().width;t.margins({top:20,left:40,right:20,bottom:20}).width(o).transitionDuration(1e3).turnOnControls(!1).curve(s.FdL).xyTipsOn(!0).height(.8*(this.height-30)).brushOn(!1).renderArea(!0).dimension(i).group(l).x(s.Xf().domain(r)).elasticY(!0).rangeChart(e).renderDataPoints({radius:3,fillOpacity:.8,strokeOpacity:0}).round(this.timeUnit.round).xUnits(this.timeUnit.xUnits).title((t=>`${this.dateFormatter(t.key)} : ${t.value} ${this.valueLabel}`)).clipPadding(10).yAxisLabel(`Total ${this.valueLabel}`).ordinalColors(this.colorPalette),t.xAxis().ticks(10),t.yAxis().ticks(6),t.filterAll(),e.width(o).height(.2*(this.height-30)).margins({top:0,right:10,bottom:20,left:40}).dimension(i).group(l).centerBar(!0).gap(1).x(s.Xf().domain(r)).valueAccessor((t=>t.value)).label((t=>t.key)).round(this.timeUnit.round).alwaysUseRounding(!0).xUnits(this.timeUnit.xUnits).ordinalColors(this.colorPalette).yAxis().ticks(0),n.renderAll()}}},c=u,p=(0,r(1001).Z)(c,(function(){var t=this,e=t._self._c;return e("VContainer",[e("div",{attrs:{id:`area-chart-${t.graphId}`}},[e("strong",[t._v(t._s(t.title))]),e("strong",{directives:[{name:"t",rawName:"v-t",value:"per",expression:"'per'"}]}),e("strong",{directives:[{name:"t",rawName:"v-t",value:t.timeUnit.name,expression:"timeUnit.name"}]}),e("ChartViewFilters")],1),e("div",{staticClass:"range-chart",attrs:{id:`range-chart-${t.graphId}`}},[e("ChartViewTextSelectTimeRange")],1)])}),[],!1,null,null,null),h=p.exports},96622:function(t,e,r){r.r(e),r.d(e,{default:function(){return o}});var n={},l=(0,r(1001).Z)(n,(function(){var t=this,e=t._self._c;return e("p",{staticClass:"filters"},[e("span",[t._v(" "+t._s(t.$t("Current filter"))+" "),e("span",{staticClass:"filter"})]),e("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null),o=l.exports},49814:function(t,e,r){r.r(e),r.d(e,{default:function(){return l}});var n=(0,r(1001).Z)({},(function(){var t=this,e=t._self._c;return e("p",{staticClass:"muted pull-right text-subtitle-2 mr-4 mb-1"},[e("span",{domProps:{innerHTML:t._s(t.$t("select-time-range"))}}),t._t("default")],2)}),[],!1,null,null,null),l=n.exports},31690:function(t,e,r){r.r(e);var a=r(40290);e.default={props:{ndx:{type:Object,required:!0},title:{type:String,default:""},valueLabel:{type:String,default:"records"},height:{type:Number,default:250},colorPalette:{type:Array,default:()=>["#58539E","#847CEB","#605BAB","#4A4685","#35325E"]}},data(){return{graphId:"graph_"+this.$store.state.xp.currentTab}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{createTextFilterWidget(t,e="Search"){const r=new a.TextFilterWidget(t);return r.placeHolder(this.$t(e)),r}}}}}]);