"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[339,1297],{30339:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var s=r(46228),l={mixins:[r(21297).default],props:{dateAccessor:{type:String,required:!0},title:{type:String,default:()=>""},cellSize:{type:Number,default:()=>20},cellSpacing:{type:Number,default:()=>2},dateFormat:{type:String,default:()=>""},valueAccessor:{type:String,default:()=>""},borderRadius:{type:Number,default:()=>3},legendPrefNbItems:{type:Number,default:()=>4},legendLabel:{type:String,default:()=>""},includeTotal:{type:Boolean,default:()=>!1}},data:()=>({formatMonth:s.g0u("%b"),colorPalette:s.A4V}),computed:{width(){return 55*this.cellSize},calendarHeight(){return this.cellSize*(this.$days().length+4)},height(){return this.calendarHeight*this.itemsPerDay.length},viewBox(){return`0 0 ${this.width} ${this.height}`},dateParser(){return this.dateFormat?s.Z1g(this.dateFormat):e=>{const t=new Date(e);return isNaN(t.getTime())?null:t}},items(){return this.values.map((e=>({date:this.dateParser(e[this.dateAccessor]),value:this.valueAccessor?e[this.valueAccessor]:1}))).filter((e=>e.date))},extent(){return s.Wem(this.itemsPerDay.flatMap((e=>s.Wem(e[1],(e=>e[3])))))},color(){return s.cJy().domain([this.extent[0],this.extent[1]]).nice().interpolator(this.colorPalette)},itemsPerDay(){const e=s.Xxj(this.items,(e=>e.date.getUTCFullYear())).sort(((e,t)=>t[0]-e[0]));return e.map((e=>[e[0],s.uTd(e[1],(e=>s.Smz(e,(e=>e.value))),(e=>e.date.getUTCMonth()),(e=>e.date.getUTCDate()),(e=>e.date.getDay()))]))},monthsPerYear(){const e=this.itemsPerDay.map((e=>{const t=s.Wem(e[1],(t=>new Date(e[0],t[0],t[1])));return{year:e[0],months:s.Ksh(s.meP(t[0]),t[1])}}));return e},legendSquares(){return this.color.ticks(this.legendPrefNbItems)},legendNbItems(){return this.legendSquares.length}},methods:{generateTitle:(e,t,r,a)=>s.i$Z("%a %d %B, %Y")(new Date(e,t,r))+" - "+a+" records",xPos(e,t,r){const a=new Date(e,t,r);return s.l68.count(s.olf(a),a)*this.cellSize+.5},xPosMonth(e){return s.l68.count(s.olf(e),s.l68.ceil(e))*this.cellSize},legendSquareXPos(e){const{width:t,cellSize:r,legendNbItems:a}=this;return t-2*r*a+e*r*2-2*r}}},n=l,c=(0,r(1001).Z)(n,(function(){var e=this,t=e._self._c;return t("VContainer",[t("div",{staticClass:"d-flex"},[t("div",{staticClass:"overline mb-3"},[e._v(" "+e._s(e.title)+" ")]),t("VSpacer"),e.includeTotal?t("div",{staticClass:"overline mb-3"},[e._v(" total: "),t("strong",[e._v(e._s(e.items.length))])]):e._e()],1),t("svg",{staticClass:"graph",attrs:{viewBox:e.viewBox}},[t("g",{attrs:{transform:`translate(40.5,${1.5*e.cellSize})`}},[e._l(e.itemsPerDay,(function(r,a){return t("g",{key:"week-axis"+a,staticClass:"week-axis"},e._l(e.$days(),(function(r,l){return t("text",{key:`d_${l}`,attrs:{x:"-5",y:a*e.calendarHeight+(l+.5)*e.cellSize,dy:"0.35em"}},[e._v(" "+e._s(r)+" ")])})),0)})),e._l(e.monthsPerYear,(function(r,a){return t("g",{key:"month-axis"+a,staticClass:"month-axis"},e._l(r.months,(function(r,l){return t("text",{key:`month_${l}`,attrs:{x:e.xPosMonth(r),y:a*e.calendarHeight-5,dy:"0.35em"}},[e._v(" "+e._s(e.formatMonth(r))+" ")])})),0)})),t("g",{staticClass:"calendars"},e._l(e.itemsPerDay,(function(r,a){return t("g",{key:"year_"+a},[t("text",{staticStyle:{"font-weight":"bold","font-size":"12px"},attrs:{x:.5,y:a*e.calendarHeight-e.cellSize}},[e._v(" "+e._s(r[0])+" ")]),e._l(r[1],(function(l,s){return t("g",{key:"day_"+s},[t("rect",{attrs:{width:e.cellSize-e.cellSpacing,height:e.cellSize-e.cellSpacing,x:e.xPos(r[0],l[0],l[1]),y:a*e.calendarHeight+l[2]*e.cellSize+.5,fill:e.color(l[3]),rx:e.borderRadius,ry:e.borderRadius}}),t("title",[e._v(" "+e._s(e.generateTitle(r[0],l[0],l[1],l[3]))+" ")])])}))],2)})),0),t("g",{staticClass:"legend"},[t("text",{staticStyle:{"text-anchor":"end"},attrs:{x:e.legendSquareXPos(0)-e.cellSize,y:e.height-2.5*e.cellSize,dy:"-.20em"}},[e._v(" "+e._s(e.legendLabel)+" ")]),e._l(e.legendSquares,(function(r,a){return t("g",{key:"legend_"+a},[t("rect",{attrs:{width:2*(e.cellSize-e.cellSpacing),height:(e.cellSize-e.cellSpacing)/2,x:e.legendSquareXPos(a),y:e.height-3*e.cellSize,fill:e.color(r),rx:e.borderRadius,ry:e.borderRadius}}),t("text",{staticStyle:{"text-anchor":"middle"},attrs:{x:e.legendSquareXPos(a)+e.cellSize,y:e.height-2*e.cellSize}},[e._v(" "+e._s(r)+" ")])])}))],2)],2)])])}),[],!1,null,"5d9bc966",null),u=c.exports},21297:function(e,t,r){r.r(t);var a=r(40290),l=r(18651),s=r(659);const i={props:{values:{type:Array,default:()=>[]},headers:{type:Array,default:()=>[]},messages:{type:Object,default:()=>({})}},data(){return{graphId:"graph_"+this.$store.state.xp.currentTab,totalCount:0,filterCount:0}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{drawViz(){},createTextFilterWidget(e,t="Search"){const r=new a.TextFilterWidget(e);return r.placeHolder(this.$tev(t,t)),r}}};t.default=(0,l.Z)(i,s.Z)}}]);