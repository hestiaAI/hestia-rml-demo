"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[5451,8842,8736,1297],{25451:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var r=a(21297),n={components:{ChartViewSunburst:a(58842).default},mixins:[r.default],props:{cardTitle:{type:String,default:""}},data:()=>({search:"",selected:[],selectedValues:[],items:[]}),computed:{headersTable(){return[{text:"Advertiser",value:"name"},{text:"Targeting criteria",value:"value"}].map((({text:t,...e})=>({text:this.$t(this.kViewBlock(t,"headers")),...e})))}},methods:{drawViz(){this.items=this.values.filter((t=>0===t.parent)).sort(((t,e)=>e.value-t.value)),this.values.forEach((t=>{0===t.parent&&(t.parent=null)}));const[t]=this.items;this.selected=[t],this.selectedValues=this.values.filter((e=>e.group===t.name))},drawSunburst(t){t.value&&(this.selectedValues=this.values.filter((e=>e.group===t.item.name)))},selectAdvertiser:({isSelected:t,select:e})=>t||e(!0)}},l=n,o=(0,a(1001).Z)(l,(function(){var t=this,e=t._self._c;return e("VContainer",[e("VRow",[e("VCol",{attrs:{cols:"12",md:"4"}},[e("VCard",[e("VCardTitle",[t._v(" "+t._s(t.cardTitle)+" "),e("VSpacer"),e("VTextField",{attrs:{"append-icon":"mdi-magnify",label:t.$t("Search"),placeholder:t.$t("Type..."),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e("VDataTable",{staticClass:"elevation-1 v-data-table__advertisers",attrs:{headers:t.headersTable,items:t.items,"single-select":"",search:t.search,"item-key":"name","show-select":""},on:{"item-selected":t.drawSunburst,"click:row":(e,a)=>t.selectAdvertiser(a)},scopedSlots:t._u([{key:"item.data-table-select",fn:function({isSelected:a,select:r}){return[e("VSimpleCheckbox",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{value:a},on:{click:function(e){return t.selectAdvertiser({isSelected:a,select:r})}}})]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1),e("VCol",{attrs:{cols:"12",md:"8"}},[e("ChartViewSunburst",{attrs:{values:t.selectedValues}})],1)],1)],1)}),[],!1,null,null,null),u=o.exports},58842:function(t,e,a){a.r(e),a.d(e,{default:function(){return o}});var r=a(46228),i=a(21297),n={components:{ChartViewVRowWebShare:a(18736).default},mixins:[i.default],data:()=>({bcItems:[]}),watch:{values(){this.drawViz()}},mounted(){this.drawViz()},methods:{k:t=>`chart-view.sunburst.${t}`,drawViz(){const{k:t}=this;if(!this.values||0===this.values.length)return;const e=[],a=r.QP8().id((function(t){return t.id})).parentId((function(t){return 0===t.parent&&e.push(t.name),t.parent}))(this.values),n=a.sum((t=>t.size)).sort(((t,e)=>e.value-t.value)),s=n.value,i=this.$tev(t(n.data.name),n.data.name);this.bcItems=[{text:i,disabled:!0}];const l=r.uKc().size([2*Math.PI,n.height+1])(n);l.each((t=>t.current=t));const o=Math.min(r.Ys("#"+this.graphId).node().getBoundingClientRect().width,600),d=o/6,c=r.PKp().domain(e).range(r.XgA),u=r.Nb1().startAngle((t=>t.x0)).endAngle((t=>t.x1)).padAngle((t=>Math.min((t.x1-t.x0)/2,.005))).padRadius(1.5*d).innerRadius((t=>t.y0*d)).outerRadius((t=>Math.max(t.y0*d,t.y1*d-1)));r.Ys("#"+this.graphId+" svg").remove();const h=r.Ys("#"+this.graphId).append("svg").attr("width",o).attr("height",o).append("g").attr("transform","translate("+o/2+","+o/2+")"),p=h.append("text").attr("x",0).attr("y",-50).attr("id","infoLabel").style("font-size","1rem").style("font-weight","light").attr("text-anchor","middle").style("cursor","default").style("fill","grey").text("").attr("opacity",0),f=h.append("text").attr("x",o/2).attr("y",-o/2+20).attr("id","infoLabel").style("font-size","1rem").style("font-weight","bold").attr("text-anchor","end").style("cursor","default").style("fill","grey").text(this.$t(t("Click to expand"))+"!").attr("opacity",0),m=h.append("text").attr("x",0).attr("y",0).attr("id","infoPercent").attr("text-anchor","middle").style("font-size","2.5rem").style("font-weight","bold").style("fill","grey").attr("font-family","Roboto").style("cursor","default").text("100%").attr("opacity",0),y=h.append("text").attr("x",0).attr("y",30).attr("id","infoNumber").style("font-size","1rem").style("font-weight","light").attr("text-anchor","middle").style("cursor","default").style("fill","grey").text(s).attr("opacity",0),x=h.append("g").selectAll("#"+this.graphId+" path").data(l.descendants().slice(1)).join("path").attr("fill",(t=>{for(;t.depth>1;)t=t.parent;return c(t.data.name)})).attr("fill-opacity",(t=>V(t.current)?t.children?.6:.4:0)).attr("d",(t=>u(t.current)));x.filter((t=>t.children)).style("cursor","pointer").on("click",w);const g=h.append("g").attr("pointer-events","none").attr("text-anchor","middle").style("user-select","none").selectAll("text").data(l.descendants().slice(1)).join("text").attr("dy","0.35em").attr("fill-opacity",(t=>+I(t.current))).attr("transform",(t=>C(t.current))).text((t=>t.data.name?t.data.name.length>10?t.data.name.substring(0,10)+"..":t.data.name:"undefined")).style("font-size","0.8rem").style("font-weight","bold").style("fill","white").attr("font-family","Roboto"),b=h.append("text").datum(l).attr("x",0).attr("y",50).style("font-size","1rem").style("font-weight","light").attr("text-anchor","middle").attr("text-decoration","underline").text(this.$t(t("Zoom out"))).attr("opacity",0).style("cursor","pointer").attr("pointer-events","all").on("click",w);let v=[{text:i,disabled:!0}];function w(t,e){const a=B(e);v=a.map((t=>({text:t.data.name,disabled:!0}))),v.unshift({text:i,disabled:!0}),this.bcItems=v,e.parent?(b.attr("opacity",1),b.style("cursor","pointer")):(b.attr("opacity",0),b.style("cursor","default")),b.datum(e.parent||l),l.each((t=>t.target={x0:2*Math.max(0,Math.min(1,(t.x0-e.x0)/(e.x1-e.x0)))*Math.PI,x1:2*Math.max(0,Math.min(1,(t.x1-e.x0)/(e.x1-e.x0)))*Math.PI,y0:Math.max(0,t.y0-e.depth),y1:Math.max(0,t.y1-e.depth)}));const n=h.transition().duration(750);x.transition(n).tween("data",(t=>{const e=r.sXR(t.current,t.target);return a=>t.current=e(a)})).filter((function(t){return+this.getAttribute("fill-opacity")||V(t.target)})).attr("fill-opacity",(t=>V(t.target)?t.children?.6:.4:0)).attrTween("d",(t=>()=>u(t.current))),g.filter((function(t){return+this.getAttribute("fill-opacity")||I(t.target)})).transition(n).attr("fill-opacity",(t=>+I(t.target))).attrTween("transform",(t=>()=>C(t.current)))}function V(t){return t.y1<=3&&t.y0>=1&&t.x1>t.x0}function I(t){return t.y1<=3&&t.y0>=1&&(t.y1-t.y0)*(t.x1-t.x0)>.05}function C(t){const e=(t.x0+t.x1)/2*180/Math.PI;return`rotate(${e-90}) translate(${(t.y0+t.y1)/2*d},0) rotate(${e<180?0:180})`}function B(t){const e=[];let a=t;for(;a.parent;)e.unshift(a),a=a.parent;return e}x.on("mouseover",((e,a)=>{if(a.depth-v.length>1)return;const n=B(a),l=(100*a.value/s).toPrecision(3);let o=l+"%";l<.1&&(o="< 0.1%"),p.text(a.data.name?.length>15?a.data.name.slice(0,15)+"..":a.data.name??"undefined"),this.bcItems=n.map((t=>({text:t.data.name??"undefined",disabled:!0}))),this.bcItems.unshift({text:i,disabled:!0}),m.text(o),y.text(this.$t(t("infoNumber"),{number:a.value,total:s})),m.attr("opacity",1),y.attr("opacity",1),p.attr("opacity",1),v.length<=1&&f.attr("opacity",1),r.td_("#"+this.graphId+" path").style("opacity",.3),h.selectAll("#"+this.graphId+" path").filter((t=>n.includes(t))).style("opacity",1)})),x.on("mouseleave",((t,e)=>{this.bcItems=v,m.attr("opacity",0),y.attr("opacity",0),p.attr("opacity",0),f.attr("opacity",0),r.td_("#"+this.graphId+" path").style("opacity",1)}))}}},l=n,u=(0,a(1001).Z)(l,(function(){var t=this,e=t._self._c;return e("VContainer",[e("ChartViewVRowWebShare",[e("VCol",{staticClass:"text-center",attrs:{cols:"12",md:"12"}},[e("div",{attrs:{id:t.graphId}},[e("VBreadcrumbs",{attrs:{items:t.bcItems,large:""}})],1)])],1)],1)}),[],!1,null,"13064b49",null),o=u.exports},18736:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var r=a(12555),i=a(4031),n=a(97888),l=a(9934),o={components:{BaseButton:i.Z,BaseButtonDownloadData:n.Z,BaseButtonShare:l.Z},mixins:[(0,r.Z)()]},d=(0,a(1001).Z)(o,(function(){var t=this,e=t._self._c;return e("VRow",t._b({ref:"domToImageNode"},"VRow",t.$attrs,!1),[t._t("default"),e("VCol",{staticClass:"dom-to-image-exclude",attrs:{cols:"12"}},[e("BaseButton",t._b({attrs:{icon:"mdiExport",text:"Export"},on:{click:t.exportImage}},"BaseButton",{progress:t.progress,status:t.status,error:t.error},!1)),e("BaseButtonDownloadData",t._b({},"BaseButtonDownloadData",{disabled:!t.blob,extension:t.extension,filename:t.filename,data:t.blob},!1)),e("BaseButtonShare",t._b({attrs:{"file-share":""}},"BaseButtonShare",{files:t.files,disabled:!t.files},!1))],1)],2)}),[],!1,null,null,null),p=d.exports},21297:function(t,e,a){a.r(e);var r=a(40290),s=a(18651),n=a(659);const i={props:{values:{type:Array,default:()=>[]},headers:{type:Array,default:()=>[]},messages:{type:Object,default:()=>({})}},data(){return{graphId:"graph_"+this.$store.state.xp.currentTab,totalCount:0,filterCount:0}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{drawViz(){},createTextFilterWidget(t,e="Search"){const a=new r.TextFilterWidget(t);return a.placeHolder(this.$tev(e,e)),a}}};e.default=(0,s.Z)(i,n.Z)}}]);