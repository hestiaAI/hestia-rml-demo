{"version":3,"file":"DataExperience.common.3558.js","mappings":";;;;;;;;;;;;;;;AAAA,+BAA+B,6BAA6B,iBAAiB,wBAAwB,8BAA8B,kDAAkD,kDAAkD,kBAAkB,oCAAoC,UAAU,cAAc,OAAO,2BAA2B,kBAAkB,OAAO,eAAe,mCAAmC,iCAAiC,gEAAgE,qDAAqD,yEAAyE,sBAAsB,8DAA8D,aAAa,OAAO,YAAY,aAAa,OAAO,0CAA0C,KAAK,yBAAyB,oBAAoB,2DAA2D,OAAO,aAAa,oCAAoC,yBAAyB,yCAAyC,4BAA4B,sBAAsB,gKAAgK,sBAAsB,6KAA6K,OAAO,0CAA0C,QAAQ,4CAA4C,eAAe,sBAAsB,YAAY,0BAA0B,YAAY,sBAAsB,gDAAgD,IAAI,yBAAyB,qBAAqB,uIAAuI,sBAAsB,mDAAmD,qBAAqB,yBAAyB,OAAO,eAAe,QAAQ,oDAAoD,qCAAqC,8BAA8B,yBAAyB,OAAO,aAAa,QAAQ,kDAAkD,mCAAmC,4BAA4B,gHAAgH,sBAAsB,mGAAmG,OAAO,sGAAsG,+CAA+C,OAAO,4GAA4G,wEAAwE,OAAO,yEAAyE,QAAQ,iDAAiD,kCAAkC,2BAA2B,kGAAkG,sBAAsB,qGAAqG,OAAO,4LAA4L,mEAAmE,OAAO,mEAAmE,QAAQ,+CAA+C,gCAAgC,yBAAyB,qGAAqG,sBAAsB,mGAAmG,OAAO,qDAAqD,6BAA6B,oBAAoB,QAAQ,kDAAkD,mCAAmC,4BAA4B,+GAA+G,sBAAsB,wJAAwJ,OAAO,YAAY,aAAa,OAAO,YAAY,sDAAsD,OAAO,YAAY,mBAAmB,OAAO,yCAAyC,QAAQ,wDAAwD,yCAAyC,kCAAkC,iBAAiB,OAAO,YAAY,mBAAmB,OAAO,2CAA2C,QAAQ,0DAA0D,2CAA2C,oCAAoC,qBAAqB,OAAO,YAAY,aAAa,OAAO,YAAY,sDAAsD,OAAO,YAAY,mBAAmB,OAAO,yCAAyC,QAAQ,wDAAwD,yCAAyC,kCAAkC,iBAAiB,OAAO,YAAY,mBAAmB,OAAO,2CAA2C,QAAQ,0DAA0D,2CAA2C,oCAAoC;AAC7jL;AACA;;;;;;;;ACFA,IAAI,oDAAM,qBAAqB,6BAA6B,mBAAmB,kBAAkB,oHAAoH,sBAAsB,8BAA8B,WAAW,EAAE,uCAAuC,OAAO,mDAAmD,QAAQ,mDAAmD,sBAAsB,6BAA6B,eAAe,wCAAwC,eAAe,UAAU,0CAA0C,aAAa,oBAAoB,oBAAoB,OAAO,cAAc,KAAK,wBAAwB,QAAQ,0CAA0C,aAAa,oBAAoB;AACzxB;AACA,IAAI,6DAAe;;;;;;;ACyBK;AACxB,6EAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,cAAa;AAC1C,uBAAuB,cAAa;AACpC,sBAAsB,aAAY;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;ACxE8I,CAAC,kFAAe,wCAAG,EAAC;;;;ACApE;AAC3B;AACL;;;AAG/D;AACA,CAAsG;AACtG,gBAAgB,sCAAU;AAC1B,EAAE,6CAAM;AACR,EAAE,oDAAM;AACR,EAAE,6DAAe;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA,qDAAe;;;;;;;ACgJY;AACiE;AACvB;AAC7C;AACY;AACK;AACzC,0FAAe;AACf,mCAAmC,sDAAkB;AACrD,WAAW,gBAAK;AAChB;AACA;AACA,uBAAuB,aAAY;AACnC,uBAAuB,UAAS;AAChC;AACA;AACA;AACA,uBAAuB,UAAS;AAChC;AACA,cAAc,cAAa;AAC3B,eAAe,cAAa;AAC5B,cAAc,cAAa;AAC3B,aAAa,cAAa;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kCAAI;AACzB;AACA,kBAAkB,aAAY;AAC9B;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAM;AACxB,sBAAsB,OAAM;AAC5B,mBAAmB,OAAM;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,gBAAK;AACtB;AACA;AACA;AACA;AACA,iBAAiB,gBAAK;AACtB;AACA;AACA;AACA;AACA,iBAAiB,gBAAK;AACtB;AACA;AACA;AACA;AACA,iBAAiB,gBAAK;AACtB;AACA;AACA;AACA;AACA,iBAAiB,gBAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,oBAAS;AACtB;AACA;AACA;AACA;AACA,CAAC;;;AClT8J,CAAC,+FAAe,qDAAG,EAAC;;ACAvE;AAC3B;AACL;;;AAG5E;AACA,CAAyG;AACzG,IAAI,uCAAS,GAAG,sCAAU;AAC1B,EAAE,0DAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA,kEAAe,uCAAS","sources":["webpack://@hestia.ai/data-experience/./src/components/chart/view/ChartViewUberDriverAccounting.vue?0a4a","webpack://@hestia.ai/data-experience/./src/components/base/BaseDateSelector.vue?c0bf","webpack://@hestia.ai/data-experience/src/components/base/BaseDateSelector.vue","webpack://@hestia.ai/data-experience/./src/components/base/BaseDateSelector.vue?f062","webpack://@hestia.ai/data-experience/./src/components/base/BaseDateSelector.vue","webpack://@hestia.ai/data-experience/src/components/chart/view/ChartViewUberDriverAccounting.vue","webpack://@hestia.ai/data-experience/./src/components/chart/view/ChartViewUberDriverAccounting.vue?d039","webpack://@hestia.ai/data-experience/./src/components/chart/view/ChartViewUberDriverAccounting.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"ma-0 pa-0\"},[_c('VContainer',[_c('VRow',{staticClass:\"d-flex align-stretch justify-center\"},[_vm._l((_vm.overviews),function(overview,index){return _c('VCol',{key:index,staticClass:\"pa-0\",attrs:{\"cols\":2}},[_c('VCard',{attrs:{\"height\":\"100%\",\"flat\":\"\"}},[_c('VListItem',{attrs:{\"two-line\":\"\"}},[_c('VListItemContent',[_c('div',{staticClass:\"text-overline mb-1\"},[_vm._v(\" \"+_vm._s(overview.title)+\" \")]),_c('VListItemTitle',{staticClass:\"text-h4 text--primary font-weight-bold\"},[_vm._v(\" \"+_vm._s(_vm.numberFormatter(overview.value))+\" \"),_c('span',{staticClass:\"caption\"},[_vm._v(\" \"+_vm._s(overview.suffix)+\" \")])])],1)],1)],1)],1)}),_c('VCol',{attrs:{\"cols\":\"2\"}},[_c('VBtn',{attrs:{\"color\":\"primary\",\"outlined\":\"\",\"dark\":\"\"},on:{\"click\":function($event){_vm.drawer = true}}},[_vm._v(\" More Options \")])],1)],2),_c('VRow',[_c('VCol',{attrs:{\"cols\":\"12\"}},[_c('UnitFilterableTable',_vm._b({},'UnitFilterableTable',{ headers: _vm.header, items: _vm.results },false))],1)],1),_c('span',{staticClass:\"caption\"},[_vm._v(\"* Km Cost to be covered: This value is computed with the following formula: \"),_c('strong',[_vm._v(\"Km * Cost per kilometre\")])]),_c('br'),_c('span',{staticClass:\"caption\"},[_vm._v(\"** Theoritical wage: This value is computed with the following formula: \"),_c('strong',[_vm._v(\"Time * Multiplying factor * Wage\")])])],1),_c('VNavigationDrawer',{attrs:{\"fixed\":\"\",\"width\":\"280px\",\"temporary\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('div',{staticClass:\"d-flex ma-3\"},[_c('div',{staticClass:\"text-h6\"},[_vm._v(\"Options\")]),_c('VSpacer'),_c('VIcon',{on:{\"click\":function($event){_vm.drawer = false}}},[_vm._v(\"$vuetify.icons.mdiClose\")])],1),_c('VListItem',[_c('VListItemContent',[_c('VListItemTitle',[_vm._v(\"Date range\")]),_c('div',{staticClass:\"caption\"},[_vm._v(\"The date range to include.\")]),_c('div',{staticClass:\"d-flex\"},[_c('BaseDateSelector',{attrs:{\"label\":\"From\"},model:{value:(_vm.form.startDate),callback:function ($$v) {_vm.$set(_vm.form, \"startDate\", $$v)},expression:\"form.startDate\"}}),_c('BaseDateSelector',{attrs:{\"label\":\"To\"},model:{value:(_vm.form.endDate),callback:function ($$v) {_vm.$set(_vm.form, \"endDate\", $$v)},expression:\"form.endDate\"}})],1)],1)],1),_c('VListItem',[_c('VListItemContent',[_c('VListItemTitle',[_vm._v(\"Kilometric cost\")]),_c('div',{staticClass:\"caption\"},[_vm._v(\" The average cost per kilometre is at 0.70CHF in Switzerland according to the \"),_c('a',{attrs:{\"href\":\"https://www.tcs.ch/fr/le-tcs/presse/communiques-de-presse-2021/couts-kilometriques-2021.php\"}},[_vm._v(\"TCS\")]),_vm._v(\".\"),_c('br'),_c('a',{attrs:{\"href\":\"https://www.tcs.ch/fr/tests-conseils/conseils/achat-vente-vehicule/recherche-auto-comparaison.php\"}},[_vm._v(\"Calculate yours according to your car.\")])]),_c('VTextField',{attrs:{\"label\":\"Costs per kilometre\",\"step\":0.01,\"type\":\"number\",\"prefix\":\"CHF\"},model:{value:(_vm.form.kmCost),callback:function ($$v) {_vm.$set(_vm.form, \"kmCost\", $$v)},expression:\"form.kmCost\"}})],1)],1),_c('VListItem',[_c('VListItemContent',[_c('VListItemTitle',[_vm._v(\"Wages\")]),_c('div',{staticClass:\"caption\"},[_vm._v(\" The minimum wage salary in Geneva since 1 november 2020 is CHF 23.27. \"),_c('br'),_c('a',{attrs:{\"href\":\"https://www.eda.admin.ch/missions/mission-onu-geneve/en/home/manual-regime-privileges-and-immunities/introduction/manual-labour-law/Salaire-minimum-dans-le-canton-de-Geneve.html\"}},[_vm._v(\"eda.admin.ch\")]),_vm._v(\".\"),_c('br')]),_c('VTextField',{attrs:{\"label\":\"Costs per hour\",\"step\":0.1,\"type\":\"number\",\"prefix\":\"CHF\"},model:{value:(_vm.form.wage),callback:function ($$v) {_vm.$set(_vm.form, \"wage\", $$v)},expression:\"form.wage\"}})],1)],1),_c('VListItem',[_c('VListItemContent',[_c('VListItemTitle',[_vm._v(\"Group by\")]),_c('div',{staticClass:\"caption\"},[_vm._v(\" Decide on the temporal granularity at which you will group the data. \")]),_c('VSelect',{attrs:{\"items\":Object.keys(_vm.aggregations),\"menu-props\":{ bottom: true, offsetY: true },\"label\":\"Group by\"},model:{value:(_vm.form.groupBy),callback:function ($$v) {_vm.$set(_vm.form, \"groupBy\", $$v)},expression:\"form.groupBy\"}})],1)],1),_c('VListItem',[_c('VListItemContent',[_c('VListItemTitle',[_vm._v(\"Multiplying factor\")]),_c('div',{staticClass:\"caption\"},[_vm._v(\" Depending on your situation, working at night or at weekends is not paid in the same way, please adapt the multipliers here. \")]),_c('VRow',{attrs:{\"dense\":\"\"}},[_c('VCol',{attrs:{\"cols\":\"4\"}},[_c('VSubheader',[_vm._v(\"WeekDay\")])],1),_c('VCol',{attrs:{\"cols\":\"4\"}},[_c('VTextField',{attrs:{\"label\":\"Day\",\"step\":0.1,\"type\":\"number\"},model:{value:(_vm.form.c.weekday.day),callback:function ($$v) {_vm.$set(_vm.form.c.weekday, \"day\", $$v)},expression:\"form.c.weekday.day\"}})],1),_c('VCol',{attrs:{\"cols\":\"4\"}},[_c('VTextField',{attrs:{\"label\":\"Night\",\"step\":0.1,\"type\":\"number\"},model:{value:(_vm.form.c.weekday.night),callback:function ($$v) {_vm.$set(_vm.form.c.weekday, \"night\", $$v)},expression:\"form.c.weekday.night\"}})],1)],1),_c('VRow',{attrs:{\"dense\":\"\"}},[_c('VCol',{attrs:{\"cols\":\"4\"}},[_c('VSubheader',[_vm._v(\"WeekEnd\")])],1),_c('VCol',{attrs:{\"cols\":\"4\"}},[_c('VTextField',{attrs:{\"label\":\"Day\",\"step\":0.1,\"type\":\"number\"},model:{value:(_vm.form.c.weekend.day),callback:function ($$v) {_vm.$set(_vm.form.c.weekend, \"day\", $$v)},expression:\"form.c.weekend.day\"}})],1),_c('VCol',{attrs:{\"cols\":\"4\"}},[_c('VTextField',{attrs:{\"label\":\"Night\",\"step\":0.1,\"type\":\"number\"},model:{value:(_vm.form.c.weekend.night),callback:function ($$v) {_vm.$set(_vm.form.c.weekend, \"night\", $$v)},expression:\"form.c.weekend.night\"}})],1)],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('VMenu',{ref:\"menu\",attrs:{\"close-on-content-click\":false,\"transition\":\"scale-transition\",\"offset-y\":\"\",\"max-width\":\"290px\",\"min-width\":\"auto\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('VTextField',_vm._g(_vm._b({attrs:{\"persistent-hint\":\"\",\"prepend-icon\":\"mdi-calendar\"},model:{value:(_vm.dateFormatted),callback:function ($$v) {_vm.dateFormatted=$$v},expression:\"dateFormatted\"}},'VTextField',{label: _vm.label, hint: _vm.hint, attrs},false),on))]}}]),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[_c('VDatePicker',{attrs:{\"no-title\":\"\"},on:{\"input\":_vm.handleInput},model:{value:(_vm.date),callback:function ($$v) {_vm.date=$$v},expression:\"date\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <VMenu\r\n    ref=\"menu\"\r\n    v-model=\"menu\"\r\n    :close-on-content-click=\"false\"\r\n    transition=\"scale-transition\"\r\n    offset-y\r\n    max-width=\"290px\"\r\n    min-width=\"auto\"\r\n  >\r\n    <template v-slot:activator=\"{ on, attrs }\">\r\n      <VTextField\r\n        v-model=\"dateFormatted\"\r\n        v-bind=\"{label, hint, attrs}\"\r\n        v-on=\"on\"\r\n        persistent-hint\r\n        prepend-icon=\"mdi-calendar\"\r\n      ></VTextField>\r\n    </template>\r\n    <VDatePicker\r\n      v-model=\"date\"\r\n      no-title\r\n      @input=\"handleInput\"\r\n    ></VDatePicker>\r\n  </VMenu>\r\n</template>\r\n<script>\r\nimport * as d3 from 'd3'\r\nexport default {\r\n  props: {\r\n    value: {\r\n      type: Date,\r\n      default: () => new Date()\r\n    },\r\n    label: {\r\n      type: String,\r\n      default: 'Date'\r\n    },\r\n    hint: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    dateFormat: {\r\n      type: String,\r\n      default: '%d/%m/%Y'\r\n    }\r\n  },\r\n  data() {\r\n    const formatDateCustom = d3.timeFormat(this.dateFormat)\r\n    const formatDate = d3.timeFormat('%Y-%m-%d')\r\n    const parseDate = d3.timeParse('%Y-%m-%d')\r\n    return {\r\n      date: formatDate(this.value),\r\n      dateFormatted: formatDateCustom(this.value),\r\n      menu: false,\r\n      formatDate,\r\n      parseDate,\r\n      formatDateCustom\r\n    }\r\n  },\r\n  watch: {\r\n    date() {\r\n      console.log(this.date)\r\n      this.dateFormatted = this.formatDateCustom(this.parseDate(this.date))\r\n    }\r\n  },\r\n  methods: {\r\n    handleInput() {\r\n      this.menu = false\r\n      this.$emit('input', this.parseDate(this.date))\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BaseDateSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BaseDateSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BaseDateSelector.vue?vue&type=template&id=54d6d56c&\"\nimport script from \"./BaseDateSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./BaseDateSelector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"ma-0 pa-0\">\r\n  <VContainer>\r\n    <VRow class=\"d-flex  align-stretch justify-center\">\r\n      <VCol v-for=\"(overview, index) in overviews\" :key=\"index\" :cols=\"2\" class=\"pa-0\">\r\n        <VCard height=\"100%\" flat>\r\n            <VListItem two-line>\r\n              <VListItemContent>\r\n                <div class=\"text-overline mb-1\">\r\n                  {{overview.title}}\r\n                </div>\r\n                <VListItemTitle class=\"text-h4 text--primary font-weight-bold\">\r\n                    {{numberFormatter(overview.value)}}\r\n                    <span class=\"caption\">\r\n                    {{overview.suffix}}\r\n                  </span>\r\n                </VListItemTitle>\r\n              </VListItemContent>\r\n          </VListItem>\r\n        </VCard>\r\n      </VCol>\r\n      <VCol cols=\"2\">\r\n        <VBtn\r\n          color=\"primary\"\r\n          outlined\r\n          dark\r\n          @click=\"drawer = true\"\r\n        >\r\n          More Options\r\n        </VBtn>\r\n      </VCol>\r\n    </VRow>\r\n    <VRow>\r\n      <VCol cols=\"12\">\r\n        <UnitFilterableTable v-bind=\"{ headers: header, items: results }\" />\r\n      </VCol>\r\n    </VRow>\r\n    <span class=\"caption\">* Km Cost to be covered: This value is computed with the following formula: <strong>Km * Cost per kilometre</strong></span><br>\r\n    <span class=\"caption\">** Theoritical wage: This value is computed with the following formula: <strong>Time * Multiplying factor * Wage</strong></span>\r\n  </VContainer>\r\n  <VNavigationDrawer\r\n      v-model=\"drawer\"\r\n      fixed\r\n      width=\"280px\"\r\n      temporary\r\n    >\r\n      <div class=\"d-flex ma-3\">\r\n        <div class=\"text-h6\">Options</div>\r\n        <VSpacer/>\r\n        <VIcon @click=\"drawer = false\">$vuetify.icons.mdiClose</VIcon>\r\n      </div>\r\n      <VListItem>\r\n        <VListItemContent>\r\n          <VListItemTitle>Date range</VListItemTitle>\r\n          <div class=\"caption\">The date range to include.</div>\r\n          <div class=\"d-flex\">\r\n            <BaseDateSelector v-model=\"form.startDate\" label=\"From\"></BaseDateSelector>\r\n            <BaseDateSelector v-model=\"form.endDate\" label=\"To\"></BaseDateSelector>\r\n          </div>\r\n        </VListItemContent>\r\n      </VListItem>\r\n       <VListItem>\r\n        <VListItemContent>\r\n          <VListItemTitle>Kilometric cost</VListItemTitle>\r\n          <div class=\"caption\">\r\n            The average cost per kilometre is at 0.70CHF in Switzerland according to the <a href=\"https://www.tcs.ch/fr/le-tcs/presse/communiques-de-presse-2021/couts-kilometriques-2021.php\">TCS</a>.<br>\r\n            <a href=\"https://www.tcs.ch/fr/tests-conseils/conseils/achat-vente-vehicule/recherche-auto-comparaison.php\">Calculate yours according to your car.</a>\r\n          </div>\r\n          <VTextField\r\n            label=\"Costs per kilometre\"\r\n            v-model=\"form.kmCost\"\r\n            :step=\"0.01\"\r\n            type=\"number\"\r\n            prefix=\"CHF\"\r\n          ></VTextField>\r\n        </VListItemContent>\r\n      </VListItem>\r\n      <VListItem>\r\n        <VListItemContent>\r\n          <VListItemTitle>Wages</VListItemTitle>\r\n          <div class=\"caption\">\r\n            The minimum wage salary in Geneva since 1 november 2020 is CHF 23.27. <br>\r\n            <a href=\"https://www.eda.admin.ch/missions/mission-onu-geneve/en/home/manual-regime-privileges-and-immunities/introduction/manual-labour-law/Salaire-minimum-dans-le-canton-de-Geneve.html\">eda.admin.ch</a>.<br>\r\n          </div>\r\n          <VTextField\r\n            label=\"Costs per hour\"\r\n            v-model=\"form.wage\"\r\n            :step=\"0.1\"\r\n            type=\"number\"\r\n            prefix=\"CHF\"\r\n          ></VTextField>\r\n        </VListItemContent>\r\n      </VListItem>\r\n      <VListItem>\r\n        <VListItemContent>\r\n          <VListItemTitle>Group by</VListItemTitle>\r\n          <div class=\"caption\">\r\n            Decide on the temporal granularity at which you will group the data.\r\n          </div>\r\n          <VSelect\r\n            :items=\"Object.keys(aggregations)\"\r\n            :menu-props=\"{ bottom: true, offsetY: true }\"\r\n            v-model=\"form.groupBy\"\r\n            label=\"Group by\"\r\n          ></VSelect>\r\n        </VListItemContent>\r\n      </VListItem>\r\n      <VListItem>\r\n        <VListItemContent>\r\n          <VListItemTitle>Multiplying factor</VListItemTitle>\r\n          <div class=\"caption\">\r\n            Depending on your situation, working at night or at weekends is not paid in the same way, please adapt the multipliers here.\r\n          </div>\r\n          <VRow dense>\r\n            <VCol cols=\"4\">\r\n              <VSubheader>WeekDay</VSubheader>\r\n            </VCol>\r\n            <VCol cols=\"4\">\r\n              <VTextField\r\n                v-model=\"form.c.weekday.day\"\r\n                label=\"Day\"\r\n                :step=\"0.1\"\r\n                type=\"number\"\r\n              ></VTextField>\r\n            </VCol>\r\n            <VCol cols=\"4\">\r\n              <VTextField\r\n                v-model=\"form.c.weekday.night\"\r\n                label=\"Night\"\r\n                :step=\"0.1\"\r\n                type=\"number\"\r\n              ></VTextField>\r\n            </VCol>\r\n          </VRow>\r\n          <VRow dense>\r\n            <VCol cols=\"4\">\r\n              <VSubheader>WeekEnd</VSubheader>\r\n            </VCol>\r\n            <VCol cols=\"4\">\r\n              <VTextField\r\n                v-model=\"form.c.weekend.day\"\r\n                label=\"Day\"\r\n                :step=\"0.1\"\r\n                type=\"number\"\r\n              ></VTextField>\r\n            </VCol>\r\n            <VCol cols=\"4\">\r\n              <VTextField\r\n                v-model=\"form.c.weekend.night\"\r\n                label=\"Night\"\r\n                :step=\"0.1\"\r\n                type=\"number\"\r\n              ></VTextField>\r\n            </VCol>\r\n          </VRow>\r\n        </VListItemContent>\r\n      </VListItem>\r\n  </VNavigationDrawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mixin from './mixin'\r\nimport UnitFilterableTable from '@/components/unit/filterable-table/UnitFilterableTable.vue'\r\nimport BaseDateSelector from '@/components/base/BaseDateSelector.vue'\r\nimport * as d3 from 'd3'\r\nimport { nest } from 'd3-collection'\r\nimport { sumBy, mapValues } from 'lodash'\r\nexport default {\r\n  components: { UnitFilterableTable, BaseDateSelector },\r\n  mixins: [mixin],\r\n  props: {},\r\n  data() {\r\n    const timeParser = d3.timeParse('%s')\r\n    const dateExtent = d3.extent(this.values, v => timeParser(v.begin_ts))\r\n    return {\r\n      drawer: false,\r\n      timeParser,\r\n      numberFormatter: d3.format('.2s'),\r\n      aggregations: {\r\n        Year: d3.timeFormat('%Y'),\r\n        Month: d3.timeFormat('%Y/%m'),\r\n        Week: d3.timeFormat('%Y week-%V'),\r\n        Day: d3.timeFormat('%Y/%m/%d')\r\n      },\r\n      form: {\r\n        startDate: dateExtent[0],\r\n        endDate: dateExtent[1],\r\n        groupBy: 'Year',\r\n        kmCost: 0.7,\r\n        wage: 23.27,\r\n        c: {\r\n          weekday: {\r\n            day: 1,\r\n            night: 1.2\r\n          },\r\n          weekend: {\r\n            day: 1,\r\n            night: 1.5\r\n          }\r\n        }\r\n      },\r\n      allValues: []\r\n    }\r\n  },\r\n  computed: {\r\n    results() {\r\n      // GroupBy\r\n      const rollup = nest()\r\n        .key(d => d[this.form.groupBy])\r\n        .sortKeys(d3.ascending)\r\n        .key(d => d.status)\r\n        .key(d => d.type)\r\n        .key(d => d.period)\r\n        .rollup((values) => {\r\n          return {\r\n            time: d3.sum(values, l => l.time),\r\n            distance: d3.sum(values, l => l.distance),\r\n            price: d3.sum(values, l => l.price)\r\n          }\r\n        })\r\n        .entries(this.allValues.filter(v => v.date >= this.form.startDate && v.date <= this.form.endDate))\r\n\r\n      // Flatten to array of object\r\n      const results = rollup.flatMap((groupBy) => {\r\n        const _groupBy = groupBy.key\r\n        return groupBy.values.flatMap((status) => {\r\n          const _status = status.key\r\n          return status.values.flatMap((type) => {\r\n            const _type = type.key\r\n            return type.values.map(period => (\r\n              {\r\n                [this.form.groupBy]: _groupBy,\r\n                Status: _status,\r\n                Type: _type,\r\n                Period: period.key,\r\n                Km: period.value.distance,\r\n                'Time (hr)': period.value.time,\r\n                'Km Cost to be covered*': period.value.distance * this.form.kmCost,\r\n                'Theoritical wage**': this.form.c[_type][period.key] * period.value.time * this.form.wage,\r\n                'Uber Income': period.value.price\r\n              }\r\n            ))\r\n          })\r\n        })\r\n      })\r\n      return results\r\n    },\r\n    header() {\r\n      if (this.results.length) {\r\n        return Object.keys(this.results[0])\r\n      } else {\r\n        return []\r\n      }\r\n    },\r\n    overviews() {\r\n      return [\r\n        {\r\n          title: 'Kilometers',\r\n          value: sumBy(this.results, 'Km'),\r\n          suffix: 'km'\r\n        },\r\n        {\r\n          title: 'Time',\r\n          value: sumBy(this.results, 'Time (hr)'),\r\n          suffix: 'hours'\r\n        },\r\n        {\r\n          title: 'Km Expenses',\r\n          value: sumBy(this.results, 'Km Cost to be covered*'),\r\n          suffix: 'CHF'\r\n        },\r\n        {\r\n          title: 'Estimated wages',\r\n          value: sumBy(this.results, 'Theoritical wage**'),\r\n          suffix: 'CHF'\r\n        },\r\n        {\r\n          title: 'Uber Income',\r\n          value: sumBy(this.results, 'Uber Income'),\r\n          suffix: 'CHF'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    drawViz() {\r\n      // Precompute the agg values for better performances\r\n      this.allValues = this.values.map((e) => {\r\n        const time = Math.max(0, e.end_ts - e.begin_ts) / (1000 * 60 * 60)\r\n        const date = this.timeParser(e.begin_ts)\r\n        const type = date.getDay() > 4 ? 'weekend' : 'weekday'\r\n        const period = date.getHours() > 22 || date.getHours() < 7 ? 'night' : 'day'\r\n        return {\r\n          date,\r\n          type,\r\n          period,\r\n          time,\r\n          status: e.status,\r\n          distance: e.distance,\r\n          price: e.price,\r\n          ...mapValues(this.aggregations, formatAgg => formatAgg(date))\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewUberDriverAccounting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChartViewUberDriverAccounting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartViewUberDriverAccounting.vue?vue&type=template&id=650b3a64&\"\nimport script from \"./ChartViewUberDriverAccounting.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartViewUberDriverAccounting.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":[],"sourceRoot":""}