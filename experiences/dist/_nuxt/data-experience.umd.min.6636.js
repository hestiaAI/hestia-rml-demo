"use strict";(("undefined"!=typeof self?self:this).webpackChunkdata_experience=("undefined"!=typeof self?self:this).webpackChunkdata_experience||[]).push([[6636,1690,6622,5253,9201],{26636:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=a(60194),r=a(40290),n=a(59201),l=a(31690),o=a(96622);a(5253),r.config.defaultColors(s.schemePaired);var u={components:{ChartViewFilters:o.default},mixins:[l.default],props:{valueAccessor:{type:String,required:!0},valueAsArray:{type:Boolean,default:!1},sumAccessor:{type:String,default:""},topK:{type:Number,default:10},isScrollable:{type:Boolean,default:!1},defaultValue:{type:String,default:""}},data:()=>({total:"N/A"}),computed:{cssProps(){return{"--height":this.height+6.5+"px"}}},methods:{drawViz(){const t=new r.RowChart(`#top-chart-${this.graphId}`),e=this.createTextFilterWidget(`#top-search-${this.graphId}`);s.select(`#top-chart-${this.graphId} a.reset`).on("click",(function(){t.filterAll(),r.redrawAll()}));const a=this.ndx.dimension((t=>this.valueAsArray?JSON.parse(t[this.valueAccessor])||[this.defaultValue]:t[this.valueAccessor]||this.defaultValue),this.valueAsArray);e.dimension(this.ndx.dimension((t=>this.valueAsArray?JSON.parse(t[this.valueAccessor].toLowerCase())||[this.defaultValue.toLowerCase()]:(t[this.valueAccessor]||this.defaultValue).toLowerCase()),this.valueAsArray));const i=this.sumAccessor?a.group().reduceSum((t=>t[this.sumAccessor])):a.group().reduceCount();this.total=i.size();const l=this.isScrollable?Math.max(20*Math.min(this.topK,i.size()),this.height):this.height,o=s.select(`#top-chart-${this.graphId}`).node().getBoundingClientRect().width;t.width(o).height(l).margins({top:20,left:10,right:10,bottom:-5}).group(this.isScrollable?i:(0,n.removeEmptyBins)(i)).dimension(a).ordinalColors([this.colorPalette[this.position%this.colorPalette.length]]).label((t=>t.key)).data((t=>t.top(this.topK))).title((t=>`${t.value} ${this.valueLabel}`)).elasticX(!0).xAxis().ticks(4),r.axisChart(`#top-chart-${this.graphId}-axis`).margins({top:0,left:10,right:10,bottom:10}).height(20).width(o).dimension(a).group(i).elastic(!0).axis().ticks(4),r.renderAll()}}},c=u,p=(0,a(1001).Z)(c,(function(){var t=this,e=t._self._c;return e("VContainer",{style:t.cssProps},[e("div",{staticStyle:{display:"flex"}},[e("strong",[t._v(t._s(t.title))]),e("VSpacer"),e("div",{attrs:{id:`top-search-${t.graphId}`}})],1),e("ChartViewFilters"),e("div",{class:{isScrollable:t.isScrollable},attrs:{id:`top-chart-${t.graphId}`}}),e("div",{attrs:{id:`top-chart-${t.graphId}-axis`}}),t.topK<t.total?e("div",{directives:[{name:"t",rawName:"v-t",value:{path:"show-top-n",args:{n:t.topK,m:t.total}},expression:"{ path: 'show-top-n', args: { n: topK, m: total } }"}],staticClass:"text-caption"}):t._e()],1)}),[],!1,null,"c8af34f6",null),h=p.exports},96622:function(t,e,a){a.r(e),a.d(e,{default:function(){return l}});var r={},n=(0,a(1001).Z)(r,(function(){var t=this,e=t._self._c;return e("p",{staticClass:"filters"},[e("span",[t._v(" "+t._s(t.$t("Current filter"))+" "),e("span",{staticClass:"filter"})]),e("a",{directives:[{name:"t",rawName:"v-t",value:"reset",expression:"'reset'"}],staticClass:"reset",staticStyle:{display:"none"}})])}),[],!1,null,null,null),l=n.exports},31690:function(t,e,a){a.r(e);var i=a(40290);e.default={props:{ndx:{type:Object,required:!0},title:{type:String,default:""},valueLabel:{type:String,default:"records"},height:{type:Number,default:250},position:{type:Number,required:!0},colorPalette:{type:Array,default:()=>["#bebada","#8dd3c7","#fb8072","#80b1d3","#fdb462","#b3de69","#bc80bd","#ccebc5"]}},data(){return{graphId:"graph_"+this._uid}},mounted(){this.drawViz()},watch:{values(){this.drawViz()}},methods:{createTextFilterWidget(t,e="Search"){const a=new i.TextFilterWidget(t);return a.placeHolder(this.$t(e)),a}}}},5253:function(t,e,a){a.r(e);var i=a(60194),r=a(40290);r.axisChart=function(t,e){let a;const s=new(r.CapMixin(r.MarginMixin));let n,l,o,c,u=i.axisBottom();const h=["axisBottom","axisTop","axisLeft","axisRight"];function p(){let t=a.select("g.axis");(function(){if(!n||l){const t=i.extent(c,(t=>s.cappedValueAccessor(t)));t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0),n=i.scaleLinear().domain(t).range([0,s.effectiveWidth()])}u.scale(n)})(),t.empty()&&(t=a.append("g").attr("class","axis")),r.transition(t,s.transitionDuration(),s.transitionDelay()).call(u)}function d(){c=s.data(),p()}return s.axisCap=s.cap,s._doRender=function(){return s.resetSvg(),a=s.svg().append("g").attr("transform","translate("+s.margins().left+","+s.margins().top+")"),d(),s},s.type=function(t){return arguments.length?(-1!==h.indexOf(t)?(u=i[t](),o=t):console.error(t+" is not a valid d3 axis type"),s):o},s.scale=function(t){return arguments.length?(n=t,s):n},s.elastic=function(t){return arguments.length?(l=t,s):l},s.axis=function(){return u},s._doRedraw=function(){return d(),s},s.anchor(t,e)}},59201:function(t,e,a){a.r(e),a.d(e,{addPiePercentage:function(){return c},addXLabel:function(){return s},addYLabel:function(){return n},createCumulativeGroup:function(){return l},removeEmptyBins:function(){return o}});var i=a(60194),r=a(40290);function s(t,e){const a=t.svg().append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",t.width()/2).attr("y",t.height()-10).text(e),i=a.node().getBBox(),r=t.margins();a.attr("x",r.left+(t.width()-r.left-r.right)/2).attr("y",t.height()-Math.ceil(i.height)/2)}function n(t,e){const a=t.svg().append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-t.height()/2).attr("y",10).text(e),i=a.node().getBBox(),r=t.margins();a.attr("x",-r.top-(t.height()-r.top-r.bottom)/2).attr("y",Math.max(Math.ceil(i.height),r.left-Math.ceil(i.height)-5))}function l(t){return{all(){const e={};return t.all().map((function(t){return e[t.key[0]]?e[t.key[0]]+=t.value:e[t.key[0]]=t.value,{key:t.key,value:e[t.key[0]]}}))}}}function o(t){return{top:e=>t.top(1/0).filter((function(t){return 0!==t.value.count&&0!==t.value})).slice(0,e)}}function c(t){t.selectAll("text.pie-slice.pie-label").call((function(t){t.each((function(t){const e=i.select(this);let a=e.text();a.length>14&&(a=a.substring(0,14)+".. "),a.length>0&&(a=a+" ("+r.utils.printSingleValue((t.endAngle-t.startAngle)/(2*Math.PI)*100)+"%)"),e.text(a)}))}))}}}]);