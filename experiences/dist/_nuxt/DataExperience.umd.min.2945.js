"use strict";(("undefined"!=typeof self?self:this).webpackChunkDataExperience=("undefined"!=typeof self?self:this).webpackChunkDataExperience||[]).push([[2945],{62945:function(e,t,l){l.r(t),l.d(t,{default:function(){return c}});var i=l(60194),r={mixins:[l(74097).default],props:{dateAccessor:{type:String,required:!0},title:{type:String,default:()=>""},cellSize:{type:Number,default:()=>20},cellSpacing:{type:Number,default:()=>2},dateFormat:{type:String,default:()=>""},valueAccessor:{type:String,default:()=>""},borderRadius:{type:Number,default:()=>3},legendPrefNbItems:{type:Number,default:()=>4},legendLabel:{type:String,default:()=>""},includeTotal:{type:Boolean,default:()=>!1}},data:()=>({hours:i.range(24),colorPalette:i.interpolateRdPu}),computed:{width(){return this.cellSize*(this.hours.length+3)},height(){return this.cellSize*(this.$days().length+4)},viewBox(){return`0 0 ${this.width} ${this.height}`},dateParser(){return this.dateFormat?i.timeParse(this.dateFormat):e=>{const t=new Date(e);return isNaN(t.getTime())?null:t}},items(){return this.values.map((e=>({date:this.dateParser(e[this.dateAccessor]),value:this.valueAccessor?e[this.valueAccessor]:1}))).filter((e=>e.date))},itemsPerHour(){return i.flatRollup(this.items,(e=>i.sum(e,(e=>e.value))),(e=>e.date.getHours()),(e=>e.date.getDay()))},extent(){return i.extent(this.itemsPerHour,(e=>e[2]))},color(){return i.scaleSequential().domain([this.extent[0],this.extent[1]]).nice().interpolator(this.colorPalette)},legendSquares(){return this.color.ticks(this.legendPrefNbItems)},legendNbItems(){return this.legendSquares.length}},methods:{generateTitle:e=>i.timeFormat("%a at %H:00")(new Date(2e3,12,e[1],e[0]))+" - "+e[2]+" records",legendSquareXPos(e){const{width:t,cellSize:l,legendNbItems:r}=this;return t-2*l*r+e*l*2-2*l}}},u=r,n=(0,l(1001).Z)(u,(function(){var e=this,t=e._self._c;return t("VContainer",[t("div",{staticClass:"d-flex mb-3"},[t("div",{staticClass:"overline"},[e._v(" "+e._s(e.title)+" ")]),t("VSpacer"),e.includeTotal?t("div",{staticClass:"overline"},[e._v(" total: "),t("strong",[e._v(e._s(e.items.length))])]):e._e()],1),t("svg",{staticClass:"graph",attrs:{viewBox:e.viewBox}},[t("g",{attrs:{transform:`translate(40.5,${1.5*e.cellSize})`}},[t("g",{staticClass:"week-axis"},e._l(e.$days(),(function(l,r){return t("text",{key:`d_${r}`,attrs:{x:"-5",y:(r+.5)*e.cellSize,dy:"0.35em"}},[e._v(" "+e._s(l)+" ")])})),0),t("g",{staticClass:"hour-axis"},[t("text",{attrs:{y:"-20",x:(e.hours.length/2+.5)*e.cellSize}},[e._v(e._s(e.$t("hour"))+"s")]),e._l(e.hours,(function(l){return t("text",{key:`h_${l}`,attrs:{y:"-5",x:(l+.5)*e.cellSize}},[e._v(" "+e._s(l)+" ")])}))],2),t("g",{staticClass:"calendar-hour"},e._l(e.itemsPerHour,(function(l,r){return t("g",{key:r},[t("rect",{attrs:{width:e.cellSize-e.cellSpacing,height:e.cellSize-e.cellSpacing,x:l[0]*e.cellSize+.5,y:l[1]*e.cellSize+.5,fill:e.color(l[2]),rx:e.borderRadius,ry:e.borderRadius}}),t("title",[e._v(e._s(e.generateTitle(l)))])])})),0),t("g",{staticClass:"legend"},[t("text",{staticStyle:{"text-anchor":"end"},attrs:{x:e.legendSquareXPos(0)-e.cellSize,y:e.height-2.5*e.cellSize,dy:"-.20em"}},[e._v(" "+e._s(e.legendLabel)+" ")]),e._l(e.legendSquares,(function(l,r){return t("g",{key:"legend_"+r},[t("rect",{attrs:{width:2*(e.cellSize-e.cellSpacing),height:(e.cellSize-e.cellSpacing)/2,x:e.legendSquareXPos(r),y:e.height-3*e.cellSize,fill:e.color(l),rx:e.borderRadius,ry:e.borderRadius}}),t("text",{staticStyle:{"text-anchor":"middle"},attrs:{x:e.legendSquareXPos(r)+e.cellSize,y:e.height-2*e.cellSize}},[e._v(" "+e._s(l)+" ")])])}))],2)])])])}),[],!1,null,"3f765ff4",null),c=n.exports}}]);