(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1165:function(e,r,t){"use strict";t.d(r,"a",(function(){return o}));var n=t(18);t(620),t(73),t(224);function o(e){return Object.fromEntries(Object.entries(e).map((function(e){var r=Object(n.a)(e,2),t=r[0],o=r[1];return[t,encodeURIComponent(o)]})))}},1265:function(e,r,t){"use strict";t.r(r);var n=t(1140),o=t(1525),c=t(1151),l=t(1142),m=t(1180),d=t(1505),f=t(1128),h=t(1210),v=(t(4),t(44),t(11),t(9),t(12),t(15),t(10),t(16),t(23)),y=t(1),O=(t(90),t(28),t(73),t(31),t(47),t(454),t(70),t(87)),x=t(1165);function j(object,e){var r=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),r.push.apply(r,t)}return r}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(r){Object(y.a)(e,r,source[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(source,r))}))}return e}var C={data:function(){return{firstName:"",lastName:"",email:"",phoneCountryCode:null,phoneNumber:"",dialCodes:[],maxLength:30,progress:!1,error:!1,success:!1,errorMessage:"Une erreur s'est produite. Veuillez réessayer plus tard ou nous contacter.",successMessage:"Félicitations, vous êtes maintenant un parain de Horkos Deluxe. Nous vous contacterons par email dans les plus brefs délais."}},computed:w(w({},Object(O.c)({serverlessUrl:function(e){return e.uploads.serverlessUrl}})),{},{requiredRule:function(){return function(e){return!!e||"This field is required"}},lengthRule:function(){return function(e){return e.length<=30||"This field must be at most 30 characters"}},emailRule:function(){return function(e){return/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e)||"Invalid email address"}},phoneNumberRule:function(){return function(e){return/^\+?[0-9]+$/.test(e)||"Invalid phone number"}}}),mounted:function(){this.fetchDialCodes()},methods:{fetchDialCodes:function(){var e=this;return Object(v.a)(regeneratorRuntime.mark((function r(){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("/data/dial-codes.json");case 2:return t=r.sent,r.next=5,t.json();case 5:n=r.sent,e.dialCodes=n.map((function(code){return code.header||code.divider?code:{name:"".concat(code.official_name_fr," (+").concat(code.Dial,")"),code:code.Dial}}));case 7:case"end":return r.stop()}}),r)})))()},submitForm:function(){var e=this;return Object(v.a)(regeneratorRuntime.mark((function r(){var t,n,o,text;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.progress=!0,e.error=!1,e.success=!1,!e.$refs.form.validate()){r.next=25;break}return t=Object(x.a)({firstname:e.firstName,lastname:e.lastName,email:e.email,mobile_country_code:"+".concat(e.phoneCountryCode),mobile_phone_number:e.phoneNumber}),r.prev=5,n=e.serverlessUrl+"createAffiliate?"+new URLSearchParams(t),r.next=9,fetch(n);case 9:if(200===(o=r.sent).status){r.next=15;break}return r.next=13,o.text();case 13:throw text=r.sent,new Error("le serveur à retourner le code d'erreur ".concat(o.status," : ").concat(text));case 15:r.next=23;break;case 17:return r.prev=17,r.t0=r.catch(5),e.error=!0,e.progress=!1,e.errorMessage="Une erreur s'est produite. Veuillez réessayer plus tard ou nous contacter. Détail: "+r.t0.toString(),r.abrupt("return");case 23:e.success=!0,e.progress=!1;case 25:case"end":return r.stop()}}),r,null,[[5,17]])})))()}}},N=t(50),component=Object(N.a)(C,(function(){var e=this,r=e._self._c;return r(c.a,{attrs:{outlined:""}},[r(l.c,[r(d.a,{ref:"form",on:{submit:function(r){return r.preventDefault(),e.submitForm.apply(null,arguments)}}},[r(f.a,[r(m.a,{attrs:{cols:"12",md:"6"}},[r(h.a,{attrs:{label:"Prénom",rules:[e.requiredRule,e.lengthRule],counter:e.maxLength,required:""},model:{value:e.firstName,callback:function(r){e.firstName=r},expression:"firstName"}})],1),e._v(" "),r(m.a,{attrs:{cols:"12",md:"6"}},[r(h.a,{attrs:{label:"Nom",rules:[e.requiredRule,e.lengthRule],counter:e.maxLength,required:""},model:{value:e.lastName,callback:function(r){e.lastName=r},expression:"lastName"}})],1),e._v(" "),r(m.a,{attrs:{cols:"12",md:"6"}},[r(h.a,{attrs:{label:"Email",type:"email",rules:[e.requiredRule,e.emailRule],required:""},model:{value:e.email,callback:function(r){e.email=r},expression:"email"}})],1),e._v(" "),r(m.a,{attrs:{cols:"4",md:"3"}},[r(o.a,{attrs:{"auto-select-first":"","clear-icon":e.$vuetify.icons.values.mdiClose,clearable:"",items:e.dialCodes,label:"Indicatif pays","item-text":"name","item-value":"code",rules:[e.requiredRule],required:""},model:{value:e.phoneCountryCode,callback:function(r){e.phoneCountryCode=r},expression:"phoneCountryCode"}})],1),e._v(" "),r(m.a,{attrs:{cols:"8",md:"3"}},[r(h.a,{attrs:{label:"Téléphone",rules:[e.requiredRule,e.phoneNumberRule],required:""},model:{value:e.phoneNumber,callback:function(r){e.phoneNumber=r},expression:"phoneNumber"}})],1)],1),e._v(" "),r(f.a,[r(m.a,{attrs:{cols:"12"}},[r("BaseButton",e._b({attrs:{type:"submit",color:"primary",text:"Devenir parrain","mdi-icon":"mdiSend"}},"BaseButton",{error:e.error,success:e.success,progress:e.progress},!1))],1)],1),e._v(" "),e.error||e.success?r(n.a,{staticClass:"mt-6 text-left",attrs:{type:e.error?"error":"success",text:""}},[r("div",{domProps:{textContent:e._s(e.error?e.errorMessage:e.successMessage)}})]):e._e()],1)],1)],1)}),[],!1,null,null,null);r.default=component.exports;installComponents(component,{BaseButton:t(621).default})}}]);